{"expireTime":9007200804686334000,"key":"transformer-remark-markdown-ast-1109fdf301c64bb6cf1a12c07a196948-gatsby-remark-graphvizgatsby-remark-code-titlesgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Using the ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":11,"offset":11},"indent":[]}},{"type":"link","title":null,"url":"/docs/node-apis/#onCreatePage","children":[{"type":"html","value":"<code class=\"language-text\">onCreatePage</code>","position":{"start":{"line":2,"column":12,"offset":12},"end":{"line":2,"column":26,"offset":26},"indent":[]}}],"position":{"start":{"line":2,"column":11,"offset":11},"end":{"line":2,"column":58,"offset":58},"indent":[]}},{"type":"text","value":" API in your project’s ","position":{"start":{"line":2,"column":58,"offset":58},"end":{"line":2,"column":81,"offset":81},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-node.js</code>","position":{"start":{"line":2,"column":81,"offset":81},"end":{"line":2,"column":97,"offset":97},"indent":[]}},{"type":"text","value":" file, it’s possible to create different 404 pages for different URL prefixes, such as ","position":{"start":{"line":2,"column":97,"offset":97},"end":{"line":2,"column":184,"offset":184},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/en/</code>","position":{"start":{"line":2,"column":184,"offset":184},"end":{"line":2,"column":190,"offset":190},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":2,"column":190,"offset":190},"end":{"line":2,"column":192,"offset":192},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":192,"offset":192},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the following example, we will create an English 404 page at ","position":{"start":{"line":4,"column":1,"offset":194},"end":{"line":4,"column":65,"offset":258},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">src/pages/en/404.js</code>","position":{"start":{"line":4,"column":65,"offset":258},"end":{"line":4,"column":86,"offset":279},"indent":[]}},{"type":"text","value":", and a German 404 page at ","position":{"start":{"line":4,"column":86,"offset":279},"end":{"line":4,"column":113,"offset":306},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/src/pages/de/404.js</code>","position":{"start":{"line":4,"column":113,"offset":306},"end":{"line":4,"column":135,"offset":328},"indent":[]}},{"type":"text","value":". Here is a simple example:","position":{"start":{"line":4,"column":135,"offset":328},"end":{"line":4,"column":162,"offset":355},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":194},"end":{"line":4,"column":162,"offset":355},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">src/pages/en/404.js</div>"},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../components/layout\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Page Not Found<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Oops<span class=\"token punctuation\">,</span> we couldn't find <span class=\"token keyword\">this</span> page<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span></code></pre></div>","position":{"start":{"line":6,"column":1,"offset":357},"end":{"line":16,"column":4,"offset":593},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"html","value":"<div class=\"gatsby-code-title\">src/pages/de/404.js</div>"},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../components/layout\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Seite nicht gefunden<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Ups<span class=\"token punctuation\">,</span> wir konnten diese Seite nicht finden<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span></code></pre></div>","position":{"start":{"line":18,"column":1,"offset":595},"end":{"line":28,"column":4,"offset":846},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now, open up your project’s ","position":{"start":{"line":30,"column":1,"offset":848},"end":{"line":30,"column":29,"offset":876},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-node.js</code>","position":{"start":{"line":30,"column":29,"offset":876},"end":{"line":30,"column":45,"offset":892},"indent":[]}},{"type":"text","value":" and add the following code:","position":{"start":{"line":30,"column":45,"offset":892},"end":{"line":30,"column":73,"offset":920},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":848},"end":{"line":30,"column":73,"offset":920},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">gatsby-node.js</div>"},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span>onCreatePage <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage<span class=\"token punctuation\">,</span> deletePage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token comment\">// Check if the page is a localized 404</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/^\\/[a-z]{2}\\/404\\/$/</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> oldPage <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>page <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Get the language code from the path, and match all paths</span>\n    <span class=\"token comment\">// starting with this code (apart from other valid paths)</span>\n    <span class=\"token keyword\">const</span> langCode <span class=\"token operator\">=</span> page<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`/`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n    page<span class=\"token punctuation\">.</span>matchPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>langCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/*`</span></span>\n\n    <span class=\"token comment\">// Recreate the modified page</span>\n    <span class=\"token function\">deletePage</span><span class=\"token punctuation\">(</span>oldPage<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":32,"column":1,"offset":922},"end":{"line":50,"column":4,"offset":1478},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now, whenever Gatsby creates a page, it will check if the page is a localized 404 with a path in the format of ","position":{"start":{"line":52,"column":1,"offset":1480},"end":{"line":52,"column":112,"offset":1591},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/XX/404/</code>","position":{"start":{"line":52,"column":112,"offset":1591},"end":{"line":52,"column":122,"offset":1601},"indent":[]}},{"type":"text","value":". If this is the case, then it will get the language code, and match all paths starting with this code, apart from other valid paths. This means that whenever you visit a non-existent page on your site, whose path starts with ","position":{"start":{"line":52,"column":122,"offset":1601},"end":{"line":52,"column":348,"offset":1827},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/en/</code>","position":{"start":{"line":52,"column":348,"offset":1827},"end":{"line":52,"column":354,"offset":1833},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":52,"column":354,"offset":1833},"end":{"line":52,"column":358,"offset":1837},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/de/</code>","position":{"start":{"line":52,"column":358,"offset":1837},"end":{"line":52,"column":364,"offset":1843},"indent":[]}},{"type":"text","value":" (e.g. ","position":{"start":{"line":52,"column":364,"offset":1843},"end":{"line":52,"column":371,"offset":1850},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/en/this-does-not-exist</code>","position":{"start":{"line":52,"column":371,"offset":1850},"end":{"line":52,"column":396,"offset":1875},"indent":[]}},{"type":"text","value":"), your localized 404 page will be displayed instead.","position":{"start":{"line":52,"column":396,"offset":1875},"end":{"line":52,"column":449,"offset":1928},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":1480},"end":{"line":52,"column":449,"offset":1928},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For best results, you should configure your server to serve these 404 pages in the same manner - i.e. for ","position":{"start":{"line":54,"column":1,"offset":1930},"end":{"line":54,"column":107,"offset":2036},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/en/&lt;non existent path&gt;</code>","position":{"start":{"line":54,"column":107,"offset":2036},"end":{"line":54,"column":132,"offset":2061},"indent":[]}},{"type":"text","value":", your server should serve the page ","position":{"start":{"line":54,"column":132,"offset":2061},"end":{"line":54,"column":168,"offset":2097},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/en/404/</code>","position":{"start":{"line":54,"column":168,"offset":2097},"end":{"line":54,"column":178,"offset":2107},"indent":[]}},{"type":"text","value":". Otherwise, you’ll briefly see the default 404 page until the Gatsby runtime loads. If you’re using Netlify, you can use ","position":{"start":{"line":54,"column":178,"offset":2107},"end":{"line":54,"column":300,"offset":2229},"indent":[]}},{"type":"link","title":null,"url":"/packages/gatsby-plugin-netlify/","children":[{"type":"html","value":"<code class=\"language-text\">gatsby-plugin-netlify</code>","position":{"start":{"line":54,"column":301,"offset":2230},"end":{"line":54,"column":324,"offset":2253},"indent":[]}}],"position":{"start":{"line":54,"column":300,"offset":2229},"end":{"line":54,"column":359,"offset":2288},"indent":[]}},{"type":"text","value":" to do this automatically. Note that you should still create a default 404 page (usually at ","position":{"start":{"line":54,"column":359,"offset":2288},"end":{"line":54,"column":451,"offset":2380},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">src/pages/404.js</code>","position":{"start":{"line":54,"column":451,"offset":2380},"end":{"line":54,"column":469,"offset":2398},"indent":[]}},{"type":"text","value":") to handle non-prefixed paths, e.g. ","position":{"start":{"line":54,"column":469,"offset":2398},"end":{"line":54,"column":506,"offset":2435},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">https://example.com/this-does-not-exist</code>","position":{"start":{"line":54,"column":506,"offset":2435},"end":{"line":54,"column":547,"offset":2476},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":54,"column":547,"offset":2476},"end":{"line":54,"column":548,"offset":2477},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":1930},"end":{"line":54,"column":548,"offset":2477},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":55,"column":1,"offset":2478}}}}