{"expireTime":9007200804686336000,"key":"transformer-remark-markdown-html-0d933aa882dde567e5c507f2150d82e8-gatsby-remark-graphvizgatsby-remark-code-titlesgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<h1 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h1>\n<ul>\n<li><a href=\"#table-of-contents\">Table of Contents</a></li>\n<li><a href=\"#why-use-gatsby-for-an-e-commerce-site\">Why use Gatsby for an e-commerce site?</a></li>\n<li>\n<p><a href=\"#prerequisites\">Prerequisites</a></p>\n<ul>\n<li><a href=\"#how-does-gatsby-work-with-stripe\">How does Gatsby work with Stripe?</a></li>\n</ul>\n</li>\n<li><a href=\"#setting-up-a-gatsby-site\">Setting up a Gatsby site</a></li>\n<li>\n<p><a href=\"#installing-the-stripejs-plugin\">Installing the StripeJS plugin</a></p>\n<ul>\n<li><a href=\"#see-your-site-hot-reload-in-the-browser\">See your site hot reload in the browser!</a></li>\n<li><a href=\"#how-does-the-stripejs-plugin-work\">How does the StripeJS plugin work?</a></li>\n<li><a href=\"#getting-your-stripe-test-keys\">Getting your Stripe test keys</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#examples\">Examples</a></p>\n<ul>\n<li><a href=\"#easy-one-button\">Easy: One Button</a></li>\n<li><a href=\"#advanced-import-skus-via-source-plugin\">Advanced: Import SKUs via source plugin</a></li>\n<li><a href=\"#custom-fully-custom-checkout-flow-requires-backend-component\">Custom: Fully custom checkout flow (requires backend component)</a></li>\n</ul>\n</li>\n<li><a href=\"#testing-payments\">Testing Payments</a></li>\n</ul>\n<h1 id=\"why-use-gatsby-for-an-e-commerce-site\"><a href=\"#why-use-gatsby-for-an-e-commerce-site\" aria-label=\"why use gatsby for an e commerce site permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why use Gatsby for an e-commerce site?</h1>\n<p>In this advanced tutorial, you’ll learn how to use Gatsby to build the UI for a basic e-commerce site that can accept payments, with <a href=\"https://stripe.com\">Stripe</a> as the backend for processing payments. Benefits of using Gatsby for e-commerce sites include the following:</p>\n<ul>\n<li>Security inherent in static sites</li>\n<li>Blazing fast performance when your pages are converted from React into static files</li>\n<li>Easy to host</li>\n</ul>\n<p>You can see the working demo hosted here: <a href=\"https://gatsby-ecommerce.netlify.com/\">https://gatsby-ecommerce.netlify.com/</a></p>\n<h1 id=\"prerequisites\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h1>\n<ul>\n<li>Since this is a more advanced tutorial, building a site with Gatsby before will likely make this tutorial less time-consuming (<a href=\"/tutorial/\">see the main tutorial here</a>)</li>\n<li>Stripe account: <a href=\"https://dashboard.stripe.com/register\">register for an account here</a></li>\n</ul>\n<h2 id=\"how-does-gatsby-work-with-stripe\"><a href=\"#how-does-gatsby-work-with-stripe\" aria-label=\"how does gatsby work with stripe permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How does Gatsby work with Stripe?</h2>\n<p>Stripe is a payment processing service that allows you to securely collect and process payment information from your customers. To try out Stripe for yourself, go to <a href=\"https://stripe.com/docs/payments/checkout#tryout\">Stripe’s Quick Start Guide</a>.</p>\n<p>There are alternatives to Stripe, like Square and Braintree, and their setup is very similar to Stripe.</p>\n<p>Stripe offers a <a href=\"https://stripe.com/docs/payments/checkout\">hosted checkout</a> that doesn’t require any backend component. You can configure products, SKUs, and subscription plans in the <a href=\"https://stripe.com/docs/payments/checkout#configure\">Stripe Dashboard</a>. If you’re selling a single product or subscription (like an eBook) you can hardcode the product’s SKU ID in your Gatsby side. If you’re selling multiple products, you can use the <a href=\"https://www.gatsbyjs.org/packages/gatsby-source-stripe/\">Stripe source plugin</a> to retrieve all SKUs at build time. If you want your Gatsby site to automatically update, you can use the Stripe webhook event to <a href=\"https://www.netlify.com/docs/webhooks/\">trigger a redeploy</a> when a new product or SKU is added.</p>\n<blockquote>\n<p><strong>NOTE</strong>: Stripe Checkout is currently in beta. You can sign up to receive updates on the <a href=\"https://stripe.com/docs/payments/checkout\">Stripe website</a>. In the meantime, if you’re looking to build more custom checkout flows, you might need to set up a simple function that your Gatsby project can POST to in order to handle the payment. See the <a href=\"#custom-fully-custom-checkout-flow-requires-backend-component\">“custom example”</a> section below for more details.</p>\n</blockquote>\n<h1 id=\"setting-up-a-gatsby-site\"><a href=\"#setting-up-a-gatsby-site\" aria-label=\"setting up a gatsby site permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up a Gatsby site</h1>\n<p>Create a new Gatsby project by running the <code class=\"language-text\">gatsby new</code> command in the terminal and change directories into the new project you just started:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">npx gatsby new ecommerce-gatsby-tutorial\n<span class=\"token function\">cd</span> ecommerce-gatsby-tutorial</code></pre></div>\n<h1 id=\"installing-the-stripejs-plugin\"><a href=\"#installing-the-stripejs-plugin\" aria-label=\"installing the stripejs plugin permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installing the StripeJS plugin</h1>\n<p>You can extend the functionality of this default starter with plugins. One such plugin is <code class=\"language-text\">gatsby-plugin-stripe</code>, which you’ll install in this project:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-plugin-stripe</code></pre></div>\n<p>Open the root site directory in a text editor and navigate to <code class=\"language-text\">gatsby-config.js</code> and add the StripeJS plugin to <code class=\"language-text\">gatsby-config.js</code> in the plugins section. Your <code class=\"language-text\">gatsby-config.js</code> should look like the following code example:</p>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Gatsby E-Commerce Starter\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"gatsby-plugin-react-helmet\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"gatsby-plugin-stripe\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"see-your-site-hot-reload-in-the-browser\"><a href=\"#see-your-site-hot-reload-in-the-browser\" aria-label=\"see your site hot reload in the browser permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>See your site hot reload in the browser!</h2>\n<p>Run <code class=\"language-text\">npm run develop</code> in the terminal, which starts a development server and reloads changes you make to your site so you can preview them in the browser. Open up your browser to <a href=\"http://localhost:8000/\">localhost:8000</a> and you should see a default homepage.</p>\n<blockquote>\n<p><strong>NOTE</strong>: If you have already started your Gatsby development server using <code class=\"language-text\">npm run develop</code>, you will need to restart the server by pressing CTRL + C in the terminal where the command was run and running <code class=\"language-text\">npm run develop</code> again to see changes in your <code class=\"language-text\">gatsby-config.js</code> reflected on <a href=\"http://localhost:8000/\">localhost:8000</a></p>\n</blockquote>\n<h2 id=\"how-does-the-stripejs-plugin-work\"><a href=\"#how-does-the-stripejs-plugin-work\" aria-label=\"how does the stripejs plugin work permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How does the StripeJS plugin work?</h2>\n<p>Stripe provides a JavaScript library the allows you to securely redirect your customer to the Stripe hosted checkout page. The Gatsby plugin, <code class=\"language-text\">gatsby-plugin-stripe</code>, will add this snippet:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://js.stripe.com/v3/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>to the end of the <code class=\"language-text\">&lt;body&gt;</code> tag across all of your pages. This helps facilitate Stripe’s <a href=\"https://stripe.com/docs/stripe-js/reference#including-stripejs\">fraud detection</a>.</p>\n<p>If you want to further customise the checkout process or pull Stripe data into your site, check out <a href=\"https://www.gatsbyjs.org/plugins/?=stripe\">Gatsby’s plugin library for more Stripe plugins</a>.</p>\n<h2 id=\"getting-your-stripe-test-keys\"><a href=\"#getting-your-stripe-test-keys\" aria-label=\"getting your stripe test keys permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting your Stripe test keys</h2>\n<p>View your API credentials by logging into your Stripe account, and then going to Developers > API Keys.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d2b907c751c6433c99b90cd55096251c/e16ac/stripe-public-test-key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 600px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 46.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABdElEQVQoz22SW26DMBRE2f8Gqv50A11JN9CftikJj0CAgLHxG0+vDYmUqBJHti/2MMN1dqwH/FY9TucrqgvDxGZoJeGshTUm4ayB9x5O9BvOp5rWBovUEFKBLwpsFsgOxQV52aFsxyTIpwFKMKhFQMsIh9ULgtMIq0XwdpsT646h985IcEGCX3mDKFp3LAmOTNBXFYx18GsgZyvcjtYO1q1EoHXYasamvdG1kAbZ97HFkSLX3USCHONcQ5pPWF/chbbDHpfxHeXlBUX7im56gzIDxGJTZKUtxdabw7wcSHBODmeybcyCleIhBHo24tx7BikbStCQq57W9J/JndKaxihMgj/FgZrygXNfbA4pMheKovgU2cXY+2hsAA13onNFjeFCJmY6lxVtT4IVOdy63I0cVxJlXKbOxU03Ym3eDz7WVIp7ZQuynP5fXg10bca9MVMidv2Z/+q3/TeyeP/yqkPRXBPHur9zeuKhdh7SOp6JRm78ASnqr05pQQE6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"Stripe public test key location in Stripe account\"\n        title=\"\"\n        src=\"/static/d2b907c751c6433c99b90cd55096251c/e16ac/stripe-public-test-key.png\"\n        srcset=\"/static/d2b907c751c6433c99b90cd55096251c/97512/stripe-public-test-key.png 197w,\n/static/d2b907c751c6433c99b90cd55096251c/1bc31/stripe-public-test-key.png 393w,\n/static/d2b907c751c6433c99b90cd55096251c/e16ac/stripe-public-test-key.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>You have 2 keys in both test mode and production mode:</p>\n<ul>\n<li>a publishable key</li>\n<li>a secret key</li>\n</ul>\n<p>While testing, you must use the key(s) that include <em>test</em>. For production code, you will need to use the live keys. As the names imply, your publishable key may be included in code that you share publicly (for example, on the frontend, and in GitHub), whereas your secret key should not be shared with anyone or committed to any public repo. It’s important to restrict access to this secret key because anyone who has it could potentially read or send requests from your Stripe account and see information about charges or purchases or even refund customers.</p>\n<h1 id=\"examples\"><a href=\"#examples\" aria-label=\"examples permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Examples</h1>\n<p>You can find an implementation of these examples <a href=\"https://github.com/thorsten-stripe/ecommerce-gatsby-tutorial\">on GitHub</a>.</p>\n<h2 id=\"easy-one-button\"><a href=\"#easy-one-button\" aria-label=\"easy one button permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Easy: One Button</h2>\n<p>If you’re selling a simple product, like an eBook for example, you can create a single button that will perform a redirect to the Stripe Checkout page:</p>\n<h3 id=\"create-a-product-and-sku\"><a href=\"#create-a-product-and-sku\" aria-label=\"create a product and sku permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create a product and SKU</h3>\n<p>For Stripe Checkout to work without any backend component, you need to create a product listing in the Stripe Dashboard. This is required for Stripe to validate that the request coming from the frontend is legitimate and to charge the right amount for the selected product/SKU. To set this up, simply follow the steps in the <a href=\"https://stripe.com/docs/payments/checkout#configure\">Stripe docs</a>.</p>\n<h3 id=\"create-a-checkout-component-that-loads-stripejs-and-redirects-to-the-checkout\"><a href=\"#create-a-checkout-component-that-loads-stripejs-and-redirects-to-the-checkout\" aria-label=\"create a checkout component that loads stripejs and redirects to the checkout permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create a checkout component that loads StripeJS and redirects to the checkout</h3>\n<p>Create a new file at <code class=\"language-text\">src/components/checkout.js</code>. Your <code class=\"language-text\">checkout.js</code> file should look like this:</p>\n<div class=\"gatsby-code-title\">src/components/checkout.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">const</span> buttonStyles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  fontSize<span class=\"token punctuation\">:</span> <span class=\"token string\">\"13px\"</span><span class=\"token punctuation\">,</span>\n  textAlign<span class=\"token punctuation\">:</span> <span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span>\n  color<span class=\"token punctuation\">:</span> <span class=\"token string\">\"#fff\"</span><span class=\"token punctuation\">,</span>\n  outline<span class=\"token punctuation\">:</span> <span class=\"token string\">\"none\"</span><span class=\"token punctuation\">,</span>\n  padding<span class=\"token punctuation\">:</span> <span class=\"token string\">\"12px 60px\"</span><span class=\"token punctuation\">,</span>\n  boxShadow<span class=\"token punctuation\">:</span> <span class=\"token string\">\"2px 5px 10px rgba(0,0,0,.1)\"</span><span class=\"token punctuation\">,</span>\n  backgroundColor<span class=\"token punctuation\">:</span> <span class=\"token string\">\"rgb(255, 178, 56)\"</span><span class=\"token punctuation\">,</span>\n  borderRadius<span class=\"token punctuation\">:</span> <span class=\"token string\">\"6px\"</span><span class=\"token punctuation\">,</span>\n  letterSpacing<span class=\"token punctuation\">:</span> <span class=\"token string\">\"1.5px\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> Checkout <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> React<span class=\"token punctuation\">.</span>Component <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Initialise Stripe.js with your publishable key.</span>\n  <span class=\"token comment\">// You can find your key in the Dashboard:</span>\n  <span class=\"token comment\">// https://dashboard.stripe.com/account/apikeys</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>stripe <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">Stripe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pk_test_jG9s3XMdSjZF9Kdm5g59zlYd\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      betas<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"checkout_beta_4\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">redirectToCheckout</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>stripe<span class=\"token punctuation\">.</span><span class=\"token function\">redirectToCheckout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      items<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> sku<span class=\"token punctuation\">:</span> <span class=\"token string\">\"sku_DjQJN2HJ1kkvI3\"</span><span class=\"token punctuation\">,</span> quantity<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      successUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`http://localhost:8000/page-2/`</span></span><span class=\"token punctuation\">,</span>\n      cancelUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`http://localhost:8000/`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error:\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>buttonStyles<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>event <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">redirectToCheckout</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        BUY MY BOOK\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Checkout</code></pre></div>\n<h3 id=\"what-did-you-just-do\"><a href=\"#what-did-you-just-do\" aria-label=\"what did you just do permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What did you just do?</h3>\n<p>You imported React, added a button with some styles, and introduced some React functions. The <code class=\"language-text\">componentDidMount()</code> and <code class=\"language-text\">redirectToCheckout()</code> functions are most important for the Stripe functionality. The <code class=\"language-text\">componentDidMount()</code> function is a React lifecycle method that launches when the component is first mounted to the DOM, making it a good place to initialise the Stripe.js client. It looks like this:</p>\n<div class=\"gatsby-code-title\">src/components/checkout.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>stripe <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">Stripe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pk_test_jG9s3XMdSjZF9Kdm5g59zlYd'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      betas<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'checkout_beta_4'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>This identifies you with the Stripe platform, validates the checkout request against your products and security settings, and processes the payment on your Stripe account.</p>\n<div class=\"gatsby-code-title\">src/components/checkout.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token keyword\">async</span> <span class=\"token function\">redirectToCheckout</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>stripe<span class=\"token punctuation\">.</span><span class=\"token function\">redirectToCheckout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      items<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> sku<span class=\"token punctuation\">:</span> <span class=\"token string\">'sku_DjQJN2HJ1kkvI3'</span><span class=\"token punctuation\">,</span> quantity<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      successUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`http://localhost:8000/page-2/`</span></span><span class=\"token punctuation\">,</span>\n      cancelUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`http://localhost:8000/`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">redirectToCheckout()</code> function validates your checkout request and either redirects to the Stripe hosted checkout page or resolves with an error object. Make sure to replace <code class=\"language-text\">successUrl</code> and <code class=\"language-text\">cancelUrl</code> with the appropriate URLs for your application.</p>\n<div class=\"gatsby-code-title\">src/components/checkout.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>button\n        style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>buttonStyles<span class=\"token punctuation\">}</span>\n        onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>event <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">redirectToCheckout</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">></span>\n        <span class=\"token constant\">BUY</span> <span class=\"token constant\">MY</span> <span class=\"token constant\">BOOK</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">render()</code> function applies our styles to the button and binds the <code class=\"language-text\">redirectToCheckout()</code> function to the button’s onclick event.</p>\n<h3 id=\"importing-the-checkout-component-into-the-homepage\"><a href=\"#importing-the-checkout-component-into-the-homepage\" aria-label=\"importing the checkout component into the homepage permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Importing the checkout component into the homepage</h3>\n<p>Now go to your <code class=\"language-text\">src/pages/index.js</code> file. This is your homepage that shows at the root URL. Import your new checkout component in the file underneath the other imports and add your <code class=\"language-text\">&lt;Checkout /&gt;</code> component within the <code class=\"language-text\">&lt;Layout&gt;</code> element. Your <code class=\"language-text\">index.js</code> file should now look like similar to this:</p>\n<div class=\"gatsby-code-title\">src/pages/index.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span>\n<span class=\"token keyword\">import</span> Image <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/image\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token constant\">SEO</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/seo\"</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> Checkout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/checkout\"</span></span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">IndexPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token constant\">SEO</span> title<span class=\"token operator\">=</span><span class=\"token string\">\"Home\"</span> keywords<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`gatsby`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`application`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`react`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hi people<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Welcome to your <span class=\"token keyword\">new</span> <span class=\"token class-name\">Gatsby</span> site<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Now go build something great<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token operator\">&lt;</span>Checkout <span class=\"token operator\">/</span><span class=\"token operator\">></span></span>    <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> maxWidth<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`300px`</span></span><span class=\"token punctuation\">,</span> marginBottom<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`1.45rem`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Image <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token string\">\"/page-2/\"</span><span class=\"token operator\">></span>Go to page <span class=\"token number\">2</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> IndexPage</code></pre></div>\n<p>If you go back to <a href=\"http://localhost:8000/\">localhost:8000</a> in your browser and you have <code class=\"language-text\">npm run develop</code> running, you should now see a big, enticing “BUY MY BOOK” button. C’mon and give it a click!</p>\n<h2 id=\"advanced-import-skus-via-source-plugin\"><a href=\"#advanced-import-skus-via-source-plugin\" aria-label=\"advanced import skus via source plugin permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Advanced: Import SKUs via source plugin</h2>\n<p>Instead of hardcoding the SKU IDs, you can use the <a href=\"https://www.gatsbyjs.org/packages/gatsby-source-stripe/\">gatsby-source-stripe plugin</a> to retrieve your SKUs at build time.</p>\n<h3 id=\"add-the-stripe-source-plugin\"><a href=\"#add-the-stripe-source-plugin\" aria-label=\"add the stripe source plugin permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add the Stripe source plugin</h3>\n<p>Add the <a href=\"https://www.gatsbyjs.org/packages/gatsby-source-stripe/\">gatsby-source-stripe plugin</a> which you can use to pull in the SKUs from your Stripe account.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-source-stripe</code></pre></div>\n<p>Now you can add the plugin configuration in your <code class=\"language-text\">gatsby-config</code> file:</p>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`Gatsby E-Commerce Starter`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-react-helmet`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"gatsby-plugin-stripe\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-stripe`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        objects<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Sku\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        secretKey<span class=\"token punctuation\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">STRIPE_SECRET_KEY</span><span class=\"token punctuation\">,</span>\n        downloadFiles<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To retrieve your SKUs from your Stripe account you will need to provide your secret API key. This key needs to kept secret and must never be shared on the frontend or on GitHub. Therefore we need to set an environment variable to store the secret key. You can read more about the usage of env variables in Gatsby <a href=\"https://www.gatsbyjs.org/docs/environment-variables/\">here</a>.</p>\n<p>In the root directory of your project add a <code class=\"language-text\">.env.development</code> file:</p>\n<div class=\"gatsby-code-title\">.env.development</div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Stripe secret API key\nSTRIPE_SECRET_KEY=sk_test_xxx</code></pre></div>\n<p>To use the defined env variable you need to require it in your <code class=\"language-text\">gatsby-config.js</code> or <code class=\"language-text\">gatsby-node.js</code> like this:</p>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`.env.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Lastly, make sure that your <code class=\"language-text\">.gitignore</code> file excludes all of your <code class=\"language-text\">.env.*</code> files:</p>\n<div class=\"gatsby-code-title\">.gitignore</div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># dotenv environment variables files\n.env\n.env.development\n.env.production</code></pre></div>\n<h3 id=\"create-a-component-that-lists-your-skus\"><a href=\"#create-a-component-that-lists-your-skus\" aria-label=\"create a component that lists your skus permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create a component that lists your SKUs</h3>\n<p>In your components folder add a new <code class=\"language-text\">Products</code> folder. This folder will include the components that interact with the Stripe SKUs. First, you need a component that queries and lists your SKUs:</p>\n<div class=\"gatsby-code-title\">src/components/Products/Skus.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> StaticQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> props <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>StaticQuery\n    query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>graphql<span class=\"token template-string\"><span class=\"token string\">`\n      query SkusForProduct {\n        skus: allStripeSku {\n          edges {\n            node {\n              id\n              currency\n              price\n              attributes {\n                name\n              }\n            }\n          }\n        }\n      }\n    `</span></span><span class=\"token punctuation\">}</span>\n    render<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> skus <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>skus<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">:</span> sku <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>sku<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>sku<span class=\"token punctuation\">.</span>attributes<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>You can validate your query and see what data is being returned in GraphiQL, which is available at <a href=\"http://localhost:8000/___graphql\">http://localhost:8000/___graphql</a> when running <code class=\"language-text\">npm run develop</code>.</p>\n<p>Once you’re happy with your query, create a new page where you can import the newly created Sku component:</p>\n<div class=\"gatsby-code-title\">src/pages/advanced.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token constant\">SEO</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/seo\"</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> Skus <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/Products/Skus\"</span></span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">AdvancedExamplePage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Layout</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SEO</span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Advanced Example<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">This is the advanced example</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Skus</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> </span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Layout</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> AdvancedExamplePage</code></pre></div>\n<p>When navigating to <a href=\"http://localhost:8000/advanced/\">http://localhost:8000/advanced/</a> you should now see a list of paragraphs with your SKU names.</p>\n<h3 id=\"create-a-component-that-presents-a-single-sku\"><a href=\"#create-a-component-that-presents-a-single-sku\" aria-label=\"create a component that presents a single sku permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create a component that presents a single SKU</h3>\n<p>To make your SKUs more visually appealing and interactive, create a new <code class=\"language-text\">SkuCard</code> component in your <code class=\"language-text\">Products</code> folder:</p>\n<div class=\"gatsby-code-title\">src/components/Products/SkuCard.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">const</span> cardStyles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  display<span class=\"token punctuation\">:</span> <span class=\"token string\">\"flex\"</span><span class=\"token punctuation\">,</span>\n  flexDirection<span class=\"token punctuation\">:</span> <span class=\"token string\">\"column\"</span><span class=\"token punctuation\">,</span>\n  justifyContent<span class=\"token punctuation\">:</span> <span class=\"token string\">\"space-around\"</span><span class=\"token punctuation\">,</span>\n  alignItems<span class=\"token punctuation\">:</span> <span class=\"token string\">\"flex-start\"</span><span class=\"token punctuation\">,</span>\n  padding<span class=\"token punctuation\">:</span> <span class=\"token string\">\"1rem\"</span><span class=\"token punctuation\">,</span>\n  marginBottom<span class=\"token punctuation\">:</span> <span class=\"token string\">\"1rem\"</span><span class=\"token punctuation\">,</span>\n  boxShadow<span class=\"token punctuation\">:</span> <span class=\"token string\">\"5px 5px 25px 0 rgba(46,61,73,.2)\"</span><span class=\"token punctuation\">,</span>\n  backgroundColor<span class=\"token punctuation\">:</span> <span class=\"token string\">\"#fff\"</span><span class=\"token punctuation\">,</span>\n  borderRadius<span class=\"token punctuation\">:</span> <span class=\"token string\">\"6px\"</span><span class=\"token punctuation\">,</span>\n  maxWidth<span class=\"token punctuation\">:</span> <span class=\"token string\">\"300px\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> buttonStyles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  fontSize<span class=\"token punctuation\">:</span> <span class=\"token string\">\"13px\"</span><span class=\"token punctuation\">,</span>\n  textAlign<span class=\"token punctuation\">:</span> <span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span>\n  color<span class=\"token punctuation\">:</span> <span class=\"token string\">\"#fff\"</span><span class=\"token punctuation\">,</span>\n  outline<span class=\"token punctuation\">:</span> <span class=\"token string\">\"none\"</span><span class=\"token punctuation\">,</span>\n  padding<span class=\"token punctuation\">:</span> <span class=\"token string\">\"12px\"</span><span class=\"token punctuation\">,</span>\n  boxShadow<span class=\"token punctuation\">:</span> <span class=\"token string\">\"2px 5px 10px rgba(0,0,0,.1)\"</span><span class=\"token punctuation\">,</span>\n  backgroundColor<span class=\"token punctuation\">:</span> <span class=\"token string\">\"rgb(255, 178, 56)\"</span><span class=\"token punctuation\">,</span>\n  borderRadius<span class=\"token punctuation\">:</span> <span class=\"token string\">\"6px\"</span><span class=\"token punctuation\">,</span>\n  letterSpacing<span class=\"token punctuation\">:</span> <span class=\"token string\">\"1.5px\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">formatPrice</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">,</span> currency<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> price <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>amount <span class=\"token operator\">/</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">let</span> numberFormat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intl<span class=\"token punctuation\">.</span>NumberFormat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"en-US\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    style<span class=\"token punctuation\">:</span> <span class=\"token string\">\"currency\"</span><span class=\"token punctuation\">,</span>\n    currency<span class=\"token punctuation\">:</span> currency<span class=\"token punctuation\">,</span>\n    currencyDisplay<span class=\"token punctuation\">:</span> <span class=\"token string\">\"symbol\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> numberFormat<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> SkuCard <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> React<span class=\"token punctuation\">.</span>Component <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">redirectToCheckout</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> sku<span class=\"token punctuation\">,</span> quantity <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>stripe<span class=\"token punctuation\">.</span><span class=\"token function\">redirectToCheckout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      items<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> sku<span class=\"token punctuation\">,</span> quantity <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      successUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`http://localhost:8000/page-2/`</span></span><span class=\"token punctuation\">,</span>\n      cancelUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`http://localhost:8000/advanced`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error:\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> sku <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>sku\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>cardStyles<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h4</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>sku<span class=\"token punctuation\">.</span>attributes<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h4</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Price: </span><span class=\"token punctuation\">{</span><span class=\"token function\">formatPrice</span><span class=\"token punctuation\">(</span>sku<span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">,</span> sku<span class=\"token punctuation\">.</span>currency<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n          <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>buttonStyles<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>event <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">redirectToCheckout</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> sku<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          BUY ME\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> SkuCard</code></pre></div>\n<p>This component renders a neat card for each individual SKU, with the SKU name, nicely formatted pricing, and a “BUY ME” button. The button triggers the <code class=\"language-text\">redirectToCheckout()</code> function with the corresponding SKU ID.</p>\n<p>Lastly, we need to refactor our <code class=\"language-text\">Skus</code> component to initialise the Stripe.js client, and render <code class=\"language-text\">SkuCards</code> while handing down the Stripe.js client in the <code class=\"language-text\">props</code>:</p>\n<div class=\"gatsby-code-title\">src/components/Products/Skus.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> StaticQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> SkuCard <span class=\"token keyword\">from</span> <span class=\"token string\">'./SkuCard'</span></span>\n<span class=\"token keyword\">const</span> conatinerStyles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  display<span class=\"token punctuation\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n  flexDirection<span class=\"token punctuation\">:</span> <span class=\"token string\">'row'</span><span class=\"token punctuation\">,</span>\n  flexWrap<span class=\"token punctuation\">:</span> <span class=\"token string\">'wrap'</span><span class=\"token punctuation\">,</span>\n  justifyContent<span class=\"token punctuation\">:</span> <span class=\"token string\">'space-between'</span><span class=\"token punctuation\">,</span>\n  padding<span class=\"token punctuation\">:</span> <span class=\"token string\">'1rem 0 1rem 0'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Skus</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Initialise Stripe.js with your publishable key.</span>\n  <span class=\"token comment\">// You can find your key in the Dashboard:</span>\n  <span class=\"token comment\">// https://dashboard.stripe.com/account/apikeys</span>\n<span class=\"gatsby-highlight-code-line\">  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    stripe<span class=\"token punctuation\">:</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">Stripe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pk_test_qOUT7QyfVVOJlWXtnbzzZ9Tn'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      betas<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'checkout_beta_4'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>StaticQuery\n        query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>graphql<span class=\"token template-string\"><span class=\"token string\">`\n          query SkusForProduct {\n            skus: allStripeSku {\n              edges {\n                node {\n                  id\n                  currency\n                  price\n                  attributes {\n                    name\n                  }\n                }\n              }\n            }\n          }\n        `</span></span><span class=\"token punctuation\">}</span>\n        render<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> skus <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>conatinerStyles<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token punctuation\">{</span>skus<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">:</span> sku <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SkuCard</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>sku<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">sku</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>sku<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">stripe</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>stripe<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></span>            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Skus</code></pre></div>\n<h3 id=\"adding-a-cart-component\"><a href=\"#adding-a-cart-component\" aria-label=\"adding a cart component permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding a cart component</h3>\n<p>You can call <code class=\"language-text\">redirectToCheckout()</code> providing an array of SKUs and their quantities to charge for multiple items at the same time. Instead of each “BUY ME” button redirecting to the checkout page, you can therefore provide a central “GO TO CHECKOUT” button that uses the state of a cart component. You can see the necessary changes for this example <a href=\"https://github.com/thorsten-stripe/ecommerce-gatsby-tutorial/tree/cart-example\">on GitHub</a>.</p>\n<h2 id=\"custom-fully-custom-checkout-flow-requires-backend-component\"><a href=\"#custom-fully-custom-checkout-flow-requires-backend-component\" aria-label=\"custom fully custom checkout flow requires backend component permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom: Fully custom checkout flow (requires backend component)</h2>\n<p>Stripe Checkout is currently in beta. You can sign up to receive updates on the <a href=\"https://stripe.com/docs/payments/checkout\">Stripe website</a>. In the meantime, if you’re looking to build more custom checkout flows, you can set up a simple function that your Gatsby project can POST to in order to handle the payment. See the previous version of <a href=\"https://github.com/gatsbyjs/gatsby/blob/6b3c08782d0898719b61181638b6a0967da49dd6/docs/docs/ecommerce-tutorial/index.md\">this tutorial</a> for detailed steps.</p>\n<h1 id=\"testing-payments\"><a href=\"#testing-payments\" aria-label=\"testing payments permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testing Payments</h1>\n<p>In test mode (when using the API key that includes <em>test</em>) Stripe provides <a href=\"https://stripe.com/docs/testing#cards\">test cards</a> for you to test different checkout scenarios.</p>"}