{"expireTime":9007200804686336000,"key":"transformer-remark-markdown-html-9da1df7c639645f9ccc2d167dee3fde3-gatsby-remark-graphvizgatsby-remark-code-titlesgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<p><a href=\"https://www.cypress.io/\">Cypress</a> is one of the options when it comes to end-to-end (E2E) testing. Cypress is an all-in-one testing framework focused on E2E testing meaning that you don’t have to install 10 different things to get your test suite set up. You can write your first passing test in minutes without any configuration with the help of Cypress’ API which is easy to read and understand. It runs tests as fast as your browser can render content which also makes test-driven development possible. You’ll also profit from the time travel feature or the extensive debugging capabilities with Chrome DevTools. Of course you can also use it with Gatsby and this guide will explain how.</p>\n<p>In order to run Gatsby’s development server and Cypress at the same time you’ll use the little helper <a href=\"https://github.com/bahmutov/start-server-and-test\">start-server-and-test</a>. If you’re already using <a href=\"/docs/testing-react-components\">react-testing-library</a> for <a href=\"/docs/unit-testing\">unit testing</a> you might want to install <a href=\"https://github.com/kentcdodds/cypress-testing-library\">cypress-testing-library</a>, too. This way you can use the exact same methods you used with <code class=\"language-text\">react-testing-library</code> in your Cypress tests. Install the following packages to your <code class=\"language-text\">devDependencies</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev cypress start-server-and-test</code></pre></div>\n<p>We also want the urls used by <code class=\"language-text\">cy.visit()</code> or <code class=\"language-text\">cy.request()</code> to be prefixed hence you have to create the file <code class=\"language-text\">cypress.json</code> at the root of your project with the following content:</p>\n<div class=\"gatsby-code-title\">cypress.json</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"baseUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:8000/\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Last but not least you add additional scripts to your <code class=\"language-text\">package.json</code> to run Cypress:</p>\n<div class=\"gatsby-code-title\">package.json</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"develop\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby develop\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"cy:open\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cypress open\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"test:e2e\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"start-server-and-test develop http://localhost:8000 cy:open\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Run <code class=\"language-text\">test:e2e</code> in your command line and see Cypress running for the first time. A folder named <code class=\"language-text\">cypress</code> will be created at the root of your project and a new application window will pop up. <a href=\"https://docs.cypress.io/guides/getting-started/writing-your-first-test.html#\">Cypress’ getting started guide</a> is a good start to learn how to write tests!</p>\n<h3 id=\"continuous-integration\"><a href=\"#continuous-integration\" aria-label=\"continuous integration permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Continuous Integration</h3>\n<p>If you want to run Cypress in Continuous Integration (CI) you have to use <code class=\"language-text\">cypress run</code> instead of <code class=\"language-text\">cypress open</code>:</p>\n<div class=\"gatsby-code-title\">package.json</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"develop\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby develop\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"cy:open\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cypress open\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"cy:run\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cypress run\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"test:e2e:ci\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"start-server-and-test develop http://localhost:8000 cy:run\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Please read the <a href=\"https://docs.cypress.io/guides/guides/continuous-integration.html\">Cypress’ official documentation</a> on CI if you want to know how to setup Travis or GitLab with Cypress.</p>"}