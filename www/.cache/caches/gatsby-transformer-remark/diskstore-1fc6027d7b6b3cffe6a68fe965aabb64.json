{"expireTime":9007200804686340000,"key":"transformer-remark-markdown-ast-d0bcae82ac12ee6c03845107aec1acf7-gatsby-remark-graphvizgatsby-remark-code-titlesgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"In the ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":8,"offset":8},"indent":[]}},{"type":"link","title":null,"url":"/docs/production-app/","children":[{"type":"text","value":"previous section","position":{"start":{"line":2,"column":9,"offset":9},"end":{"line":2,"column":25,"offset":25},"indent":[]}}],"position":{"start":{"line":2,"column":8,"offset":8},"end":{"line":2,"column":49,"offset":49},"indent":[]}},{"type":"text","value":", we saw how Gatsby uses webpack to build the JavaScript bundles required to take over the user experience once the first HTML page has finished loading. But how do the original HTML pages get generated?","position":{"start":{"line":2,"column":49,"offset":49},"end":{"line":2,"column":252,"offset":252},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":252,"offset":252},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The high level process is:","position":{"start":{"line":4,"column":1,"offset":254},"end":{"line":4,"column":27,"offset":280},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":254},"end":{"line":4,"column":27,"offset":280},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a webpack configuration for Node.js Server Side Rendering (SSR)","position":{"start":{"line":6,"column":4,"offset":285},"end":{"line":6,"column":74,"offset":355},"indent":[]}}],"position":{"start":{"line":6,"column":4,"offset":285},"end":{"line":6,"column":74,"offset":355},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":282},"end":{"line":6,"column":74,"offset":355},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Build a ","position":{"start":{"line":7,"column":4,"offset":359},"end":{"line":7,"column":12,"offset":367},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">page-renderer.js</code>","position":{"start":{"line":7,"column":12,"offset":367},"end":{"line":7,"column":30,"offset":385},"indent":[]}},{"type":"text","value":" that takes a page path and renders its HTML","position":{"start":{"line":7,"column":30,"offset":385},"end":{"line":7,"column":74,"offset":429},"indent":[]}}],"position":{"start":{"line":7,"column":4,"offset":359},"end":{"line":7,"column":74,"offset":429},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":356},"end":{"line":7,"column":74,"offset":429},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"For each page in redux, call ","position":{"start":{"line":8,"column":4,"offset":433},"end":{"line":8,"column":33,"offset":462},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">page-renderer.js</code>","position":{"start":{"line":8,"column":33,"offset":462},"end":{"line":8,"column":51,"offset":480},"indent":[]}}],"position":{"start":{"line":8,"column":4,"offset":433},"end":{"line":8,"column":51,"offset":480},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":430},"end":{"line":8,"column":51,"offset":480},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":282},"end":{"line":8,"column":51,"offset":480},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#webpack","title":null,"data":{"hProperties":{"aria-label":"webpack permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Webpack","position":{"start":{"line":10,"column":4,"offset":485},"end":{"line":10,"column":11,"offset":492},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":482},"end":{"line":10,"column":11,"offset":492},"indent":[]},"data":{"id":"webpack","htmlAttributes":{"id":"webpack"},"hProperties":{"id":"webpack"}}},{"type":"paragraph","children":[{"type":"text","value":"For the first step, we use webpack to build an optimized Node.js bundle. The entry point for this is called ","position":{"start":{"line":12,"column":1,"offset":494},"end":{"line":12,"column":109,"offset":602},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">static-entry.js</code>","position":{"start":{"line":12,"column":109,"offset":602},"end":{"line":12,"column":126,"offset":619},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":494},"end":{"line":12,"column":126,"offset":619},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#static-entryjs","title":null,"data":{"hProperties":{"aria-label":"static entryjs permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"static-entry.js","position":{"start":{"line":14,"column":4,"offset":624},"end":{"line":14,"column":19,"offset":639},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":621},"end":{"line":14,"column":19,"offset":639},"indent":[]},"data":{"id":"static-entryjs","htmlAttributes":{"id":"static-entryjs"},"hProperties":{"id":"static-entryjs"}}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby/cache-dir/static-entry.js","children":[{"type":"text","value":"static-entry.js","position":{"start":{"line":16,"column":2,"offset":642},"end":{"line":16,"column":17,"offset":657},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":641},"end":{"line":16,"column":108,"offset":748},"indent":[]}},{"type":"text","value":" exports a function that takes a path and returns rendered HTML. Hereâ€™s what it does to create that HTML:","position":{"start":{"line":16,"column":108,"offset":748},"end":{"line":16,"column":213,"offset":853},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":641},"end":{"line":16,"column":213,"offset":853},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/docs/html-generation/#1-require-page-json-and-webpack-chunk-data-sources","children":[{"type":"text","value":"Require page, json, and webpack chunk data sources","position":{"start":{"line":18,"column":5,"offset":859},"end":{"line":18,"column":55,"offset":909},"indent":[]}}],"position":{"start":{"line":18,"column":4,"offset":858},"end":{"line":18,"column":131,"offset":985},"indent":[]}}],"position":{"start":{"line":18,"column":4,"offset":858},"end":{"line":18,"column":131,"offset":985},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":855},"end":{"line":18,"column":131,"offset":985},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/docs/html-generation/#2-create-html-react-container","children":[{"type":"text","value":"Create HTML React Container","position":{"start":{"line":19,"column":5,"offset":990},"end":{"line":19,"column":32,"offset":1017},"indent":[]}}],"position":{"start":{"line":19,"column":4,"offset":989},"end":{"line":19,"column":87,"offset":1072},"indent":[]}}],"position":{"start":{"line":19,"column":4,"offset":989},"end":{"line":19,"column":87,"offset":1072},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":986},"end":{"line":19,"column":87,"offset":1072},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/docs/html-generation/#3-load-page-and-data","children":[{"type":"text","value":"Load Page and Data","position":{"start":{"line":20,"column":5,"offset":1077},"end":{"line":20,"column":23,"offset":1095},"indent":[]}}],"position":{"start":{"line":20,"column":4,"offset":1076},"end":{"line":20,"column":69,"offset":1141},"indent":[]}}],"position":{"start":{"line":20,"column":4,"offset":1076},"end":{"line":20,"column":69,"offset":1141},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1073},"end":{"line":20,"column":69,"offset":1141},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/docs/html-generation/#4-create-page-component","children":[{"type":"text","value":"Create Page Component","position":{"start":{"line":21,"column":5,"offset":1146},"end":{"line":21,"column":26,"offset":1167},"indent":[]}}],"position":{"start":{"line":21,"column":4,"offset":1145},"end":{"line":21,"column":75,"offset":1216},"indent":[]}}],"position":{"start":{"line":21,"column":4,"offset":1145},"end":{"line":21,"column":75,"offset":1216},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1142},"end":{"line":21,"column":75,"offset":1216},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/docs/html-generation/#5-add-preload-link-and-script-tags","children":[{"type":"text","value":"Add Preload Link and Script Tags","position":{"start":{"line":22,"column":5,"offset":1221},"end":{"line":22,"column":37,"offset":1253},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":1220},"end":{"line":22,"column":97,"offset":1313},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":1220},"end":{"line":22,"column":97,"offset":1313},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1217},"end":{"line":22,"column":97,"offset":1313},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/docs/html-generation/#6-inject-page-info-to-cdata","children":[{"type":"text","value":"Inject Page Info to CDATA","position":{"start":{"line":23,"column":5,"offset":1318},"end":{"line":23,"column":30,"offset":1343},"indent":[]}}],"position":{"start":{"line":23,"column":4,"offset":1317},"end":{"line":23,"column":83,"offset":1396},"indent":[]}}],"position":{"start":{"line":23,"column":4,"offset":1317},"end":{"line":23,"column":83,"offset":1396},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1314},"end":{"line":23,"column":83,"offset":1396},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/docs/html-generation/#7-render-final-html-document","children":[{"type":"text","value":"Render Final HTML Document","position":{"start":{"line":24,"column":5,"offset":1401},"end":{"line":24,"column":31,"offset":1427},"indent":[]}}],"position":{"start":{"line":24,"column":4,"offset":1400},"end":{"line":24,"column":85,"offset":1481},"indent":[]}}],"position":{"start":{"line":24,"column":4,"offset":1400},"end":{"line":24,"column":85,"offset":1481},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1397},"end":{"line":24,"column":85,"offset":1481},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":855},"end":{"line":24,"column":85,"offset":1481},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#1-require-page-json-and-webpack-chunk-data-sources","title":null,"data":{"hProperties":{"aria-label":"1 require page json and webpack chunk data sources permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"1. Require page, json, and webpack chunk data sources","position":{"start":{"line":26,"column":6,"offset":1488},"end":{"line":26,"column":59,"offset":1541},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1483},"end":{"line":26,"column":59,"offset":1541},"indent":[]},"data":{"id":"1-require-page-json-and-webpack-chunk-data-sources","htmlAttributes":{"id":"1-require-page-json-and-webpack-chunk-data-sources"},"hProperties":{"id":"1-require-page-json-and-webpack-chunk-data-sources"}}},{"type":"paragraph","children":[{"type":"text","value":"In order to perform the rest of the operations, we need some data sources to work off. These are:","position":{"start":{"line":28,"column":1,"offset":1543},"end":{"line":28,"column":98,"offset":1640},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1543},"end":{"line":28,"column":98,"offset":1640},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#sync-requiresjs","title":null,"data":{"hProperties":{"aria-label":"sync requiresjs permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"sync-requires.js","position":{"start":{"line":30,"column":7,"offset":1648},"end":{"line":30,"column":23,"offset":1664},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1642},"end":{"line":30,"column":23,"offset":1664},"indent":[]},"data":{"id":"sync-requiresjs","htmlAttributes":{"id":"sync-requiresjs"},"hProperties":{"id":"sync-requiresjs"}}},{"type":"paragraph","children":[{"type":"text","value":"Exports ","position":{"start":{"line":32,"column":1,"offset":1666},"end":{"line":32,"column":9,"offset":1674},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">components</code>","position":{"start":{"line":32,"column":9,"offset":1674},"end":{"line":32,"column":21,"offset":1686},"indent":[]}},{"type":"text","value":" which is a map of componentChunkName to require statements for the disk location of the component. See ","position":{"start":{"line":32,"column":21,"offset":1686},"end":{"line":32,"column":125,"offset":1790},"indent":[]}},{"type":"link","title":null,"url":"/docs/write-pages/#sync-requiresjs","children":[{"type":"text","value":"Write Out Pages","position":{"start":{"line":32,"column":126,"offset":1791},"end":{"line":32,"column":141,"offset":1806},"indent":[]}}],"position":{"start":{"line":32,"column":125,"offset":1790},"end":{"line":32,"column":178,"offset":1843},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":32,"column":178,"offset":1843},"end":{"line":32,"column":179,"offset":1844},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":1666},"end":{"line":32,"column":179,"offset":1844},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#datajson","title":null,"data":{"hProperties":{"aria-label":"datajson permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"data.json","position":{"start":{"line":34,"column":7,"offset":1852},"end":{"line":34,"column":16,"offset":1861},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1846},"end":{"line":34,"column":16,"offset":1861},"indent":[]},"data":{"id":"datajson","htmlAttributes":{"id":"datajson"},"hProperties":{"id":"datajson"}}},{"type":"paragraph","children":[{"type":"text","value":"Contains all the pages (with componentChunkName, jsonName, and path) and the dataPaths which map jsonName to dataPath. See ","position":{"start":{"line":36,"column":1,"offset":1863},"end":{"line":36,"column":124,"offset":1986},"indent":[]}},{"type":"link","title":null,"url":"/docs/write-pages/#datajson","children":[{"type":"text","value":"Write Out Pages","position":{"start":{"line":36,"column":125,"offset":1987},"end":{"line":36,"column":140,"offset":2002},"indent":[]}}],"position":{"start":{"line":36,"column":124,"offset":1986},"end":{"line":36,"column":170,"offset":2032},"indent":[]}},{"type":"text","value":" for more.","position":{"start":{"line":36,"column":170,"offset":2032},"end":{"line":36,"column":180,"offset":2042},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1863},"end":{"line":36,"column":180,"offset":2042},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#webpackstatsjson","title":null,"data":{"hProperties":{"aria-label":"webpackstatsjson permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"webpack.stats.json","position":{"start":{"line":38,"column":7,"offset":2050},"end":{"line":38,"column":25,"offset":2068},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":2044},"end":{"line":38,"column":25,"offset":2068},"indent":[]},"data":{"id":"webpackstatsjson","htmlAttributes":{"id":"webpackstatsjson"},"hProperties":{"id":"webpackstatsjson"}}},{"type":"paragraph","children":[{"type":"text","value":"Contains a mapping from componentChunkName to the webpack chunks comprising it. See ","position":{"start":{"line":40,"column":1,"offset":2070},"end":{"line":40,"column":85,"offset":2154},"indent":[]}},{"type":"link","title":null,"url":"/docs/how-code-splitting-works/#webpackstatsjson","children":[{"type":"text","value":"Code Splitting","position":{"start":{"line":40,"column":86,"offset":2155},"end":{"line":40,"column":100,"offset":2169},"indent":[]}}],"position":{"start":{"line":40,"column":85,"offset":2154},"end":{"line":40,"column":151,"offset":2220},"indent":[]}},{"type":"text","value":" for more.","position":{"start":{"line":40,"column":151,"offset":2220},"end":{"line":40,"column":161,"offset":2230},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":2070},"end":{"line":40,"column":161,"offset":2230},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#chunk-mapjson","title":null,"data":{"hProperties":{"aria-label":"chunk mapjson permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"chunk-map.json","position":{"start":{"line":42,"column":7,"offset":2238},"end":{"line":42,"column":21,"offset":2252},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":2232},"end":{"line":42,"column":21,"offset":2252},"indent":[]},"data":{"id":"chunk-mapjson","htmlAttributes":{"id":"chunk-mapjson"},"hProperties":{"id":"chunk-mapjson"}}},{"type":"paragraph","children":[{"type":"text","value":"Contains a mapping from componentChunkName to their core (non-shared) chunks. See ","position":{"start":{"line":44,"column":1,"offset":2254},"end":{"line":44,"column":83,"offset":2336},"indent":[]}},{"type":"link","title":null,"url":"/docs/how-code-splitting-works/#chunk-mapjson","children":[{"type":"text","value":"Code Splitting","position":{"start":{"line":44,"column":84,"offset":2337},"end":{"line":44,"column":98,"offset":2351},"indent":[]}}],"position":{"start":{"line":44,"column":83,"offset":2336},"end":{"line":44,"column":146,"offset":2399},"indent":[]}},{"type":"text","value":" for more.","position":{"start":{"line":44,"column":146,"offset":2399},"end":{"line":44,"column":156,"offset":2409},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":2254},"end":{"line":44,"column":156,"offset":2409},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#2-create-html-react-container","title":null,"data":{"hProperties":{"aria-label":"2 create html react container permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"2. Create HTML React Container","position":{"start":{"line":46,"column":6,"offset":2416},"end":{"line":46,"column":36,"offset":2446},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":2411},"end":{"line":46,"column":36,"offset":2446},"indent":[]},"data":{"id":"2-create-html-react-container","htmlAttributes":{"id":"2-create-html-react-container"},"hProperties":{"id":"2-create-html-react-container"}}},{"type":"paragraph","children":[{"type":"text","value":"We create an ","position":{"start":{"line":48,"column":1,"offset":2448},"end":{"line":48,"column":14,"offset":2461},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">html</code>","position":{"start":{"line":48,"column":14,"offset":2461},"end":{"line":48,"column":20,"offset":2467},"indent":[]}},{"type":"text","value":" React component that will eventually be rendered to a file. It will have props for each section (e.g ","position":{"start":{"line":48,"column":20,"offset":2467},"end":{"line":48,"column":122,"offset":2569},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">head</code>","position":{"start":{"line":48,"column":122,"offset":2569},"end":{"line":48,"column":128,"offset":2575},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":48,"column":128,"offset":2575},"end":{"line":48,"column":130,"offset":2577},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">preBodyComponents</code>","position":{"start":{"line":48,"column":130,"offset":2577},"end":{"line":48,"column":149,"offset":2596},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":48,"column":149,"offset":2596},"end":{"line":48,"column":151,"offset":2598},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">postBodyComponents</code>","position":{"start":{"line":48,"column":151,"offset":2598},"end":{"line":48,"column":171,"offset":2618},"indent":[]}},{"type":"text","value":"). This is owned by ","position":{"start":{"line":48,"column":171,"offset":2618},"end":{"line":48,"column":191,"offset":2638},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby/cache-dir/default-html.js","children":[{"type":"text","value":"default-html.js","position":{"start":{"line":48,"column":192,"offset":2639},"end":{"line":48,"column":207,"offset":2654},"indent":[]}}],"position":{"start":{"line":48,"column":191,"offset":2638},"end":{"line":48,"column":298,"offset":2745},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":48,"column":298,"offset":2745},"end":{"line":48,"column":299,"offset":2746},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":2448},"end":{"line":48,"column":299,"offset":2746},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#3-load-page-and-data","title":null,"data":{"hProperties":{"aria-label":"3 load page and data permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"3. Load Page and Data","position":{"start":{"line":50,"column":6,"offset":2753},"end":{"line":50,"column":27,"offset":2774},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":2748},"end":{"line":50,"column":27,"offset":2774},"indent":[]},"data":{"id":"3-load-page-and-data","htmlAttributes":{"id":"3-load-page-and-data"},"hProperties":{"id":"3-load-page-and-data"}}},{"type":"paragraph","children":[{"type":"text","value":"The only input to ","position":{"start":{"line":52,"column":1,"offset":2776},"end":{"line":52,"column":19,"offset":2794},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">static-entry.js</code>","position":{"start":{"line":52,"column":19,"offset":2794},"end":{"line":52,"column":36,"offset":2811},"indent":[]}},{"type":"text","value":" is a path. So we must look up the page for that path in order to find its ","position":{"start":{"line":52,"column":36,"offset":2811},"end":{"line":52,"column":111,"offset":2886},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">componentChunkName</code>","position":{"start":{"line":52,"column":111,"offset":2886},"end":{"line":52,"column":131,"offset":2906},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":52,"column":131,"offset":2906},"end":{"line":52,"column":136,"offset":2911},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">jsonName</code>","position":{"start":{"line":52,"column":136,"offset":2911},"end":{"line":52,"column":146,"offset":2921},"indent":[]}},{"type":"text","value":". This is achieved by simply looking up the pages array contained in ","position":{"start":{"line":52,"column":146,"offset":2921},"end":{"line":52,"column":215,"offset":2990},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">data.json</code>","position":{"start":{"line":52,"column":215,"offset":2990},"end":{"line":52,"column":226,"offset":3001},"indent":[]}},{"type":"text","value":". We can then load its data by looking it up in ","position":{"start":{"line":52,"column":226,"offset":3001},"end":{"line":52,"column":274,"offset":3049},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">dataPaths</code>","position":{"start":{"line":52,"column":274,"offset":3049},"end":{"line":52,"column":285,"offset":3060},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":52,"column":285,"offset":3060},"end":{"line":52,"column":286,"offset":3061},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":2776},"end":{"line":52,"column":286,"offset":3061},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#4-create-page-component","title":null,"data":{"hProperties":{"aria-label":"4 create page component permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"4. Create Page Component","position":{"start":{"line":54,"column":6,"offset":3068},"end":{"line":54,"column":30,"offset":3092},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":3063},"end":{"line":54,"column":30,"offset":3092},"indent":[]},"data":{"id":"4-create-page-component","htmlAttributes":{"id":"4-create-page-component"},"hProperties":{"id":"4-create-page-component"}}},{"type":"paragraph","children":[{"type":"text","value":"Now weâ€™re ready to create a React component for the page (inside the Html container). This is handled by ","position":{"start":{"line":56,"column":1,"offset":3094},"end":{"line":56,"column":106,"offset":3199},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby/cache-dir/static-entry.js#L123","children":[{"type":"text","value":"RouteHandler","position":{"start":{"line":56,"column":107,"offset":3200},"end":{"line":56,"column":119,"offset":3212},"indent":[]}}],"position":{"start":{"line":56,"column":106,"offset":3199},"end":{"line":56,"column":215,"offset":3308},"indent":[]}},{"type":"text","value":". Its render will create an element from the component in ","position":{"start":{"line":56,"column":215,"offset":3308},"end":{"line":56,"column":273,"offset":3366},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">sync-requires.js</code>","position":{"start":{"line":56,"column":273,"offset":3366},"end":{"line":56,"column":291,"offset":3384},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":56,"column":291,"offset":3384},"end":{"line":56,"column":292,"offset":3385},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":3094},"end":{"line":56,"column":292,"offset":3385},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#5-add-preload-link-and-script-tags","title":null,"data":{"hProperties":{"aria-label":"5 add preload link and script tags permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"5. Add Preload Link and Script Tags","position":{"start":{"line":58,"column":6,"offset":3392},"end":{"line":58,"column":41,"offset":3427},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":3387},"end":{"line":58,"column":41,"offset":3427},"indent":[]},"data":{"id":"5-add-preload-link-and-script-tags","htmlAttributes":{"id":"5-add-preload-link-and-script-tags"},"hProperties":{"id":"5-add-preload-link-and-script-tags"}}},{"type":"paragraph","children":[{"type":"text","value":"This is covered by the ","position":{"start":{"line":60,"column":1,"offset":3429},"end":{"line":60,"column":24,"offset":3452},"indent":[]}},{"type":"link","title":null,"url":"/docs/how-code-splitting-works/#construct-link-and-script-tags-for-current-page","children":[{"type":"text","value":"Code Splitting","position":{"start":{"line":60,"column":25,"offset":3453},"end":{"line":60,"column":39,"offset":3467},"indent":[]}}],"position":{"start":{"line":60,"column":24,"offset":3452},"end":{"line":60,"column":121,"offset":3549},"indent":[]}},{"type":"text","value":" docs. We essentially create a ","position":{"start":{"line":60,"column":121,"offset":3549},"end":{"line":60,"column":152,"offset":3580},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">&lt;link rel=&quot;preload&quot; href=&quot;component.js&quot;&gt;</code>","position":{"start":{"line":60,"column":152,"offset":3580},"end":{"line":60,"column":194,"offset":3622},"indent":[]}},{"type":"text","value":" in the document head, and a follow up ","position":{"start":{"line":60,"column":194,"offset":3622},"end":{"line":60,"column":233,"offset":3661},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">&lt;script src=&quot;component.js&quot;&gt;</code>","position":{"start":{"line":60,"column":233,"offset":3661},"end":{"line":60,"column":262,"offset":3690},"indent":[]}},{"type":"text","value":" at the end of the document. For each component and page JSON.","position":{"start":{"line":60,"column":262,"offset":3690},"end":{"line":60,"column":324,"offset":3752},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":3429},"end":{"line":60,"column":324,"offset":3752},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#6-inject-page-info-to-cdata","title":null,"data":{"hProperties":{"aria-label":"6 inject page info to cdata permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"6. Inject Page Info to CDATA","position":{"start":{"line":62,"column":6,"offset":3759},"end":{"line":62,"column":34,"offset":3787},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":3754},"end":{"line":62,"column":34,"offset":3787},"indent":[]},"data":{"id":"6-inject-page-info-to-cdata","htmlAttributes":{"id":"6-inject-page-info-to-cdata"},"hProperties":{"id":"6-inject-page-info-to-cdata"}}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":64,"column":1,"offset":3789},"end":{"line":64,"column":5,"offset":3793},"indent":[]}},{"type":"link","title":null,"url":"/docs/production-app/#first-load","children":[{"type":"text","value":"production-app.js","position":{"start":{"line":64,"column":6,"offset":3794},"end":{"line":64,"column":23,"offset":3811},"indent":[]}}],"position":{"start":{"line":64,"column":5,"offset":3793},"end":{"line":64,"column":58,"offset":3846},"indent":[]}},{"type":"text","value":" needs to know the page that itâ€™s rendering. The way we pass this information is by setting it in CDATA during HTML generation, since we know that page at this point. So we add the following to the ","position":{"start":{"line":64,"column":58,"offset":3846},"end":{"line":64,"column":256,"offset":4044},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby/cache-dir/static-entry.js#L325","children":[{"type":"text","value":"top of the HTML document","position":{"start":{"line":64,"column":257,"offset":4045},"end":{"line":64,"column":281,"offset":4069},"indent":[]}}],"position":{"start":{"line":64,"column":256,"offset":4044},"end":{"line":64,"column":377,"offset":4165},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":64,"column":377,"offset":4165},"end":{"line":64,"column":378,"offset":4166},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":3789},"end":{"line":64,"column":378,"offset":4166},"indent":[]}},{"type":"html","lang":"html","value":"<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">/*\n&lt;![\n  CDATA[ */\n    window.page={\n      \"path\": \"/blog/2.js\",\n      \"componentChunkName\": \"component---src-blog-2-js\",\n      jsonName\": \"blog-2-995\"\n    };\n    window.dataPath=\"621/path---blog-2-995-a74-dwfQIanOJGe2gi27a9CLKHjamc\";\n  */ ]\n]>\n*/</code></pre></div>","position":{"start":{"line":66,"column":1,"offset":4168},"end":{"line":79,"column":4,"offset":4427},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#7-render-final-html-document","title":null,"data":{"hProperties":{"aria-label":"7 render final html document permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"7. Render Final HTML Document","position":{"start":{"line":81,"column":6,"offset":4434},"end":{"line":81,"column":35,"offset":4463},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":4429},"end":{"line":81,"column":35,"offset":4463},"indent":[]},"data":{"id":"7-render-final-html-document","htmlAttributes":{"id":"7-render-final-html-document"},"hProperties":{"id":"7-render-final-html-document"}}},{"type":"paragraph","children":[{"type":"text","value":"Finally, we call ","position":{"start":{"line":83,"column":1,"offset":4465},"end":{"line":83,"column":18,"offset":4482},"indent":[]}},{"type":"link","title":null,"url":"https://reactjs.org/docs/react-dom.html","children":[{"type":"text","value":"react-dom","position":{"start":{"line":83,"column":19,"offset":4483},"end":{"line":83,"column":28,"offset":4492},"indent":[]}}],"position":{"start":{"line":83,"column":18,"offset":4482},"end":{"line":83,"column":70,"offset":4534},"indent":[]}},{"type":"text","value":" and render our top level Html component to a string and return it.","position":{"start":{"line":83,"column":70,"offset":4534},"end":{"line":83,"column":137,"offset":4601},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":4465},"end":{"line":83,"column":137,"offset":4601},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#build-htmljs","title":null,"data":{"hProperties":{"aria-label":"build htmljs permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"build-html.js","position":{"start":{"line":85,"column":4,"offset":4606},"end":{"line":85,"column":17,"offset":4619},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":4603},"end":{"line":85,"column":17,"offset":4619},"indent":[]},"data":{"id":"build-htmljs","htmlAttributes":{"id":"build-htmljs"},"hProperties":{"id":"build-htmljs"}}},{"type":"paragraph","children":[{"type":"text","value":"So, weâ€™ve built the means to generate HTML for a page. This webpack bundle is saved to ","position":{"start":{"line":87,"column":1,"offset":4621},"end":{"line":87,"column":88,"offset":4708},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">public/page-renderer.js</code>","position":{"start":{"line":87,"column":88,"offset":4708},"end":{"line":87,"column":113,"offset":4733},"indent":[]}},{"type":"text","value":". Next, we need to use it to generate HTML for all the siteâ€™s pages.","position":{"start":{"line":87,"column":113,"offset":4733},"end":{"line":87,"column":181,"offset":4801},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":4621},"end":{"line":87,"column":181,"offset":4801},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Page HTML does not depend on other pages. So we can perform this step in parallel. We use the ","position":{"start":{"line":89,"column":1,"offset":4803},"end":{"line":89,"column":95,"offset":4897},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/facebook/jest/tree/master/packages/jest-worker","children":[{"type":"text","value":"jest-worker","position":{"start":{"line":89,"column":96,"offset":4898},"end":{"line":89,"column":107,"offset":4909},"indent":[]}}],"position":{"start":{"line":89,"column":95,"offset":4897},"end":{"line":89,"column":175,"offset":4977},"indent":[]}},{"type":"text","value":" library to make this easier. The ","position":{"start":{"line":89,"column":175,"offset":4977},"end":{"line":89,"column":209,"offset":5011},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby/src/utils/html-renderer-queue.js","children":[{"type":"text","value":"html-renderer-queue.js","position":{"start":{"line":89,"column":210,"offset":5012},"end":{"line":89,"column":232,"offset":5034},"indent":[]}}],"position":{"start":{"line":89,"column":209,"offset":5011},"end":{"line":89,"column":330,"offset":5132},"indent":[]}},{"type":"text","value":" creates a pool of workers equal to the number of cores on your machine. It then partitions the pages into groups and sends them to the workers, which run ","position":{"start":{"line":89,"column":330,"offset":5132},"end":{"line":89,"column":485,"offset":5287},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby/src/utils/worker.js","children":[{"type":"text","value":"worker.js","position":{"start":{"line":89,"column":486,"offset":5288},"end":{"line":89,"column":495,"offset":5297},"indent":[]}}],"position":{"start":{"line":89,"column":485,"offset":5287},"end":{"line":89,"column":580,"offset":5382},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":89,"column":580,"offset":5382},"end":{"line":89,"column":581,"offset":5383},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":4803},"end":{"line":89,"column":581,"offset":5383},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The workers simply iterate over each page in their partition, and call the ","position":{"start":{"line":91,"column":1,"offset":5385},"end":{"line":91,"column":76,"offset":5460},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">page-renderer.js</code>","position":{"start":{"line":91,"column":76,"offset":5460},"end":{"line":91,"column":94,"offset":5478},"indent":[]}},{"type":"text","value":" with the page. It then saves the html for the pageâ€™s path in ","position":{"start":{"line":91,"column":94,"offset":5478},"end":{"line":91,"column":156,"offset":5540},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/public</code>","position":{"start":{"line":91,"column":156,"offset":5540},"end":{"line":91,"column":165,"offset":5549},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":91,"column":165,"offset":5549},"end":{"line":91,"column":166,"offset":5550},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":5385},"end":{"line":91,"column":166,"offset":5550},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Once all workers have finished, weâ€™re done!","position":{"start":{"line":93,"column":1,"offset":5552},"end":{"line":93,"column":44,"offset":5595},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":5552},"end":{"line":93,"column":44,"offset":5595},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":94,"column":1,"offset":5596}}}}