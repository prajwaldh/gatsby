{"expireTime":9007200804686347000,"key":"transformer-remark-markdown-html-ba18e49e5f139dab6c079c886b34e94a-gatsby-remark-graphvizgatsby-remark-code-titlesgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<p>In this guide, we’ll walk through setting up a site with content management using <a href=\"https://prismic.io/\">Prismic</a>.</p>\n<p>Prismic is a hosted, proprietary Headless CMS (SaaS) with a web app for creating and publishing content. It’s suitable for marketers, editors, and developers as it has both a “Writing Room” and a fully-fledged API &#x26; content backend. Besides the usual advantages of a SaaS CMS (hosting, security, updates), Prismic offers features like custom type builder, scheduling and content versioning, and multi-language support.</p>\n<p>Moreover, their <a href=\"https://prismic.io/feature/dynamic-layout-content-components\">Content Slices</a> feature enables you to build dynamic layouts by defining reusable custom components and placing them on your landing page, case studies, or in your blog posts. Fortunately, you can use those in Gatsby to realize features like PrismJS highlighting or using <code class=\"language-text\">gatsby-image</code>. <a href=\"https://github.com/LekoArts/gatsby-starter-prismic\">This starter</a> shows you how to do just that!</p>\n<p>In addition to written instructions, this guide also includes videos for more complex steps. You can find all of them in a <a href=\"https://www.youtube.com/playlist?list=PLB-cmN3u7PHJCG-phPyiydhHfiosyd0VC\">YouTube playlist</a>.</p>\n<p><em>Note: This guide uses the Gatsby Hello World starter to provide a very basic understanding of how Prismic can work with your Gatsby site. If you’d like to start with a full blown template, check out <a href=\"https://github.com/LekoArts/gatsby-starter-prismic\">gatsby-starter-prismic</a>. If you’re not familiar with Prismic and its functionalities yet, we highly recommend to check out <a href=\"https://prismic.io/docs\">Prismic’s official documentation</a> which also includes user guides and tutorials. This guide assumes that you have basic knowledge of Prismic &#x26; Gatsby (See <a href=\"/tutorial\">Gatsby’s official tutorial</a>).</em></p>\n<h2 id=\"setup\"><a href=\"#setup\" aria-label=\"setup permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup</h2>\n<h3 id=\"prismic\"><a href=\"#prismic\" aria-label=\"prismic permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prismic</h3>\n<p>Before initializing your Gatsby project you should sign up for an account on <a href=\"https://prismic.io/\">Prismic.io</a>. The free plan is a perfect fit for personal or smaller projects. Create a new blank repository to get to the content overview of your repository.</p>\n<p>Create your first custom type (Repeatable Type) with the name <code class=\"language-text\">Post</code> and add some fields to it. Choose rational names for the <code class=\"language-text\">API ID</code> input while configuring a field because these names will appear in your queries. You should always add the <code class=\"language-text\">uid</code> field in order to have a unique identifier (e.g. for filtering). Then switch to the content overview and create a new document with your <code class=\"language-text\">Post</code> type. Fill out the fields and publish the item.</p>\n<div>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.05rem\"\n          >\n            <iframe src=\"https://www.youtube-nocookie.com/embed/yrOYLNiYtBQ?rel=0\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          </div>\n<p>In order for Gatsby to grab all information from Prismic you’ll need to generate an access token. Head over to <code class=\"language-text\">Settings → API &amp; Security</code>, fill out the <code class=\"language-text\">Application name</code> field (the Callback URL can be left empty), and press <code class=\"language-text\">Add this application</code>.</p>\n<div>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.05rem\"\n          >\n            <iframe src=\"https://www.youtube-nocookie.com/embed/iH0P4KcOeVc?rel=0\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          </div>\n<h3 id=\"gatsby\"><a href=\"#gatsby\" aria-label=\"gatsby permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby</h3>\n<p>First, open a new terminal window and run the following command to create a new site:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">npx gatsby new prismic-tutorial https://github.com/gatsbyjs/gatsby-starter-hello-world</code></pre></div>\n<p>This will create a new directory called <code class=\"language-text\">prismic-tutorial</code> that contains the starters site, but you can change <code class=\"language-text\">prismic-tutorial</code> in the command above to whatever name you prefer!\nNow move into the newly created directory and install the Gatsby plugin for Prismic:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">cd</span> prismic-tutorial\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-source-prismic</code></pre></div>\n<p>In addition to installing the Prismic plugin, you also have to install the package <code class=\"language-text\">dotenv</code> to securely use your access tokens locally as you should never commit secret API keys to your repository!</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev dotenv</code></pre></div>\n<p>Create a file called <code class=\"language-text\">.env.development</code> at the root of your project with the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">API_KEY=paste-your-secret-access-token-here-wou7evoh0eexuf</code></pre></div>\n<p><em>Note: If you want to locally build your project you’ll also have to create a <code class=\"language-text\">.env.production</code> file with the same content.</em></p>\n<p>Now you need to configure the plugin (See all <a href=\"https://github.com/angeloashmore/gatsby-source-prismic/tree/master\">available options</a>). The <code class=\"language-text\">repositoryName</code> is the name you have entered at the creation of the repository (you’ll also find it as the subdomain in the URL). The <code class=\"language-text\">linkResolver</code> function is used to process links in your content. Fields with rich text formatting or links to internal content use this function to generate the correct link URL. The document node, field key (i.e. API ID), and field value are provided to the function. This allows you to use different <a href=\"https://prismic.io/docs/javascript/query-the-api/link-resolving\">link resolver logic</a> for each field if necessary.</p>\n<p>Add the following to register the plugin:</p>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`.env.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-prismic`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        repositoryName<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`your-repository-name`</span></span><span class=\"token punctuation\">,</span>\n        accessToken<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">API_KEY</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">,</span>\n        linkResolver<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> post <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token string\">`/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>uid<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The best way to create your queries now is to first develop them in <em>GraphiQL</em> at <code class=\"language-text\">http://localhost:8000/___graphql</code> and then paste them into your files. Start the local development server and experiment a bit with the available queries. You should be able to get this query:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/81e0ee16627f436a74d011da2a5436a0/291c3/prismic-index-query.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.88817065287654%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAQAF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3hgmP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEAAQUCX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABgQAQEAAwAAAAAAAAAAAAAAAAEQABEx/9oACAEBAAE/IQMezd//2gAMAwEAAgADAAAAEOMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQACAwAAAAAAAAAAAAAAAQARMRBBUf/aAAgBAQABPxARoh0CweELE74//9k='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"Prismic Index Query\"\n        title=\"\"\n        src=\"/static/81e0ee16627f436a74d011da2a5436a0/00eda/prismic-index-query.jpg\"\n        srcset=\"/static/81e0ee16627f436a74d011da2a5436a0/c1503/prismic-index-query.jpg 197w,\n/static/81e0ee16627f436a74d011da2a5436a0/a941d/prismic-index-query.jpg 393w,\n/static/81e0ee16627f436a74d011da2a5436a0/00eda/prismic-index-query.jpg 786w,\n/static/81e0ee16627f436a74d011da2a5436a0/8e8ca/prismic-index-query.jpg 1179w,\n/static/81e0ee16627f436a74d011da2a5436a0/291c3/prismic-index-query.jpg 1547w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Because you defined the custom type as <code class=\"language-text\">Post</code> the query is called <code class=\"language-text\">allPrismicPost</code> (and <code class=\"language-text\">prismicPost</code>). You can also see the API IDs (from the field names) you created earlier.</p>\n<p>With this information you can create pages/templates as usual:</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n\nexports<span class=\"token punctuation\">.</span>createPages <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">const</span> pages <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`\n    {\n      allPrismicPost {\n        edges {\n          node {\n            id\n            uid\n          }\n        }\n      }\n    }\n  `</span></span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> template <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"src/templates/post.jsx\"</span><span class=\"token punctuation\">)</span>\n\n  pages<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allPrismicPost<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>edge <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>uid<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">,</span>\n      component<span class=\"token punctuation\">:</span> template<span class=\"token punctuation\">,</span>\n      context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        uid<span class=\"token punctuation\">:</span> edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>uid<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-code-title\">src/templates/post.jsx</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Post</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> prismicPost <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> prismicPost\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>React.Fragment</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> data<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>React.Fragment</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Post\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n  query PostBySlug($uid: String!) {\n    prismicPost(uid: { eq: $uid }) {\n      uid\n      data {\n        title {\n          text\n        }\n        content {\n          html\n        }\n      }\n    }\n  }\n`</span></span></code></pre></div>\n<h2 id=\"deploying-to-netlify\"><a href=\"#deploying-to-netlify\" aria-label=\"deploying to netlify permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploying to Netlify</h2>\n<p>Earlier you defined an <code class=\"language-text\">API_KEY</code> environment variable for the source plugin. Netlify can set <a href=\"https://www.netlify.com/docs/continuous-deployment/#build-environment-variables\">build environment variables</a>, too. Go to your site and enter the <code class=\"language-text\">API_KEY</code> variable under <code class=\"language-text\">Settings → Build &amp; deploy</code>. This way the source plugin gets the access token passed on the build.</p>\n<p>Netlify is able to automatically start builds on pushes to a repository and accepts <a href=\"https://www.netlify.com/docs/webhooks/\">webhooks</a> to do so. Fortunately, Prismic can <a href=\"https://user-guides.prismic.io/webhooks/webhooks\">trigger webhook</a> URLs when publishing content. With those features set up, new content will automatically appear on your Netlify site.</p>\n<p>Setup your Netlify project and afterwards go to the <code class=\"language-text\">Build hooks</code> setting at <code class=\"language-text\">Settings → Build &amp; deploy</code>. You’ll receive a URL of the format <code class=\"language-text\">https://api.netlify.com/build_hooks/-randomstring-</code> after clicking <code class=\"language-text\">Add build hook</code>. On your Prismic project, visit the <code class=\"language-text\">Webhooks</code> setting and insert the copied URL into the respective field. Confirm with <code class=\"language-text\">Add this webhook</code>. Everytime you publish a new document, Netlify will re-build your site.</p>\n<h2 id=\"adding-more-features\"><a href=\"#adding-more-features\" aria-label=\"adding more features permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding more features</h2>\n<h3 id=\"categories\"><a href=\"#categories\" aria-label=\"categories permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Categories</h3>\n<p>Prismic offers a <a href=\"https://user-guides.prismic.io/content-modeling-and-custom-types/field-reference/content-relationship\">Content Relationship</a> field which is used to link to another document in your Prismic repository. You can use that in combination with a custom type to create a tagging system (in this example <em>categories</em>). And what’s cool about that? You can edit your entries any time and they’ll update in every post! Read the <a href=\"https://user-guides.prismic.io/how-to-guides/create-a-custom-tagging-system\">official docs</a> on that or watch the video:</p>\n<div>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.05rem\"\n          >\n            <iframe src=\"https://www.youtube-nocookie.com/embed/67yir-jQrFk?rel=0\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          </div>\n<p>The video shows the usage of a group field and relationship field — if you only want to have one category, skip the group field. Similar as to the <code class=\"language-text\">Post</code> custom type the <code class=\"language-text\">Category</code> one can also be queried. Furthermore, the <code class=\"language-text\">allPrismicPost</code> query also has the <code class=\"language-text\">categories</code> node available:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0b548aa70c14ea23547619a7fca22dd4/b2d49/prismic-categories-query.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 59.43970767356882%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAQAF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3hgmP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEAAQUCX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABgQAAIDAAAAAAAAAAAAAAAAAAEQABEx/9oACAEBAAE/IQIdVv8A/9oADAMBAAIAAwAAABDjD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhUTH/2gAIAQEAAT8QCvCA4lHCCqO28f/Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"Prismic Categories Query\"\n        title=\"\"\n        src=\"/static/0b548aa70c14ea23547619a7fca22dd4/00eda/prismic-categories-query.jpg\"\n        srcset=\"/static/0b548aa70c14ea23547619a7fca22dd4/c1503/prismic-categories-query.jpg 197w,\n/static/0b548aa70c14ea23547619a7fca22dd4/a941d/prismic-categories-query.jpg 393w,\n/static/0b548aa70c14ea23547619a7fca22dd4/00eda/prismic-categories-query.jpg 786w,\n/static/0b548aa70c14ea23547619a7fca22dd4/8e8ca/prismic-categories-query.jpg 1179w,\n/static/0b548aa70c14ea23547619a7fca22dd4/f009a/prismic-categories-query.jpg 1572w,\n/static/0b548aa70c14ea23547619a7fca22dd4/b2d49/prismic-categories-query.jpg 1642w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id=\"single-type\"><a href=\"#single-type\" aria-label=\"single type permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Single Type</h3>\n<p>When creating a new custom type, you are able to choose <code class=\"language-text\">Single Type</code>, too. In this example, you’ll fill the homepage with content from Prismic and therefore have complete control over the content of your site. The goal is to eliminate the need to change website code, and to change your content in Prismic instead. Visit your Prismic repository and follow the video:</p>\n<div>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.05rem\"\n          >\n            <iframe src=\"https://www.youtube-nocookie.com/embed/bvDAUEaJXrM?rel=0\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          </div>\n<p>Single pages (like your homepage, privacy policy page etc.) don’t need <a href=\"https://blog.apollographql.com/explaining-graphql-connections-c48b7c3d6976\">GraphQL connections</a> (e.g. <code class=\"language-text\">allPrismicHomepage</code>) due to the fact that only one document for that type exists in Prismic anyway. Therefore you need to use <code class=\"language-text\">prismicHomepage</code> for your query. This also has the benefit that you don’t have to map over an array. Your page could look something like this:</p>\n<div class=\"gatsby-code-title\">src/pages/index.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Index</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> prismicHomepage <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>React.Fragment</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>prismicHomepage<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n      <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> prismicHomepage<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>React.Fragment</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Index\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n  query IndexQuery {\n    prismicHomepage {\n      data {\n        title {\n          text\n        }\n        content {\n          html\n        }\n      }\n    }\n  }\n`</span></span></code></pre></div>\n<h2 id=\"wrapping-up\"><a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Wrapping Up</h2>\n<p>This was an example meant to help you understand how Prismic works with Gatsby. With your newfound knowledge of Prismic (and perhaps even Gatsby), you’re now able to:</p>\n<ul>\n<li>Create a Prismic repository and setting it up together with the Gatsby plugin</li>\n<li>Query data from Prismic and using it to programmatically create blogpost pages</li>\n<li>Use Prismic together with Netlify</li>\n<li>Add relationships between posts, e.g. with categories</li>\n<li>Query data from Prismic for single pages</li>\n</ul>\n<p>As mentioned in the beginning of this guide, if you got stuck, you can compare your code to the <a href=\"https://github.com/LeKoArts/gatsby-starter-prismic\">gatsby-starter-prismic</a> which is the project set up in the videos. A working example created by following this guide is available in the <a href=\"https://github.com/LeKoArts/gatsby-starter-prismic/tree/4aa5d52e79a0b4d90f0a671c24eb8289eb15a42b\">commit history</a> of the aforementioned starter. More advanced usages of Prismic in Gatsby would be <a href=\"https://intercom.help/prismicio/content-modeling-and-custom-types/field-reference/slices\">Slices</a> and <a href=\"https://intercom.help/prismicio/content-modeling-and-custom-types/structure-your-content/add-custom-styles-to-rich-text\">Labels</a>.</p>\n<!-- Links to more advanced tutorials will go here -->"}