{"expireTime":9007200804686336000,"key":"transformer-remark-markdown-ast-9eb9f1fab79d1b3b48ee3af4b84e51d7-gatsby-remark-graphvizgatsby-remark-code-titlesgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"heading","depth":2,"children":[{"type":"link","url":"#environments-and-environment-variables","title":null,"data":{"hProperties":{"aria-label":"environments and environment variables permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Environments and Environment Variables","position":{"start":{"line":2,"column":4,"offset":4},"end":{"line":2,"column":42,"offset":42},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":42,"offset":42},"indent":[]},"data":{"id":"environments-and-environment-variables","htmlAttributes":{"id":"environments-and-environment-variables"},"hProperties":{"id":"environments-and-environment-variables"}}},{"type":"paragraph","children":[{"type":"text","value":"You can provide environment variables to your site to customise its behaviour in different environments.","position":{"start":{"line":4,"column":1,"offset":44},"end":{"line":4,"column":105,"offset":148},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":44},"end":{"line":4,"column":105,"offset":148},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Note that we need to distinguish in this discussion between variables which have been defined in\nspecial places in order to be used in different deployment environments, and true OS-level\nenvironment variables that could be used in, for example, command-line calls.\nWe’ll call the former “Project Env Vars” and the latter “OS Env Vars”.\nIn both cases we want to be able to access the relevant value of these variable for the environment\nwe’re in.","position":{"start":{"line":6,"column":1,"offset":150},"end":{"line":11,"column":10,"offset":596},"indent":[1,1,1,1,1]}}],"position":{"start":{"line":6,"column":1,"offset":150},"end":{"line":11,"column":10,"offset":596},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"By default gatsby supports only 2 environments:","position":{"start":{"line":13,"column":1,"offset":598},"end":{"line":13,"column":48,"offset":645},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":598},"end":{"line":13,"column":48,"offset":645},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If you run the develop script then you will be in the ","position":{"start":{"line":15,"column":3,"offset":649},"end":{"line":15,"column":57,"offset":703},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">development</code>","position":{"start":{"line":15,"column":57,"offset":703},"end":{"line":15,"column":70,"offset":716},"indent":[]}},{"type":"text","value":" environment.","position":{"start":{"line":15,"column":70,"offset":716},"end":{"line":15,"column":83,"offset":729},"indent":[]}}],"position":{"start":{"line":15,"column":3,"offset":649},"end":{"line":15,"column":83,"offset":729},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":647},"end":{"line":15,"column":83,"offset":729},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If you run the build or serve scripts, then you will be in the ","position":{"start":{"line":16,"column":3,"offset":732},"end":{"line":16,"column":66,"offset":795},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">production</code>","position":{"start":{"line":16,"column":66,"offset":795},"end":{"line":16,"column":78,"offset":807},"indent":[]}},{"type":"text","value":" environment.","position":{"start":{"line":16,"column":78,"offset":807},"end":{"line":16,"column":91,"offset":820},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":732},"end":{"line":16,"column":91,"offset":820},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":730},"end":{"line":16,"column":91,"offset":820},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":647},"end":{"line":16,"column":91,"offset":820},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"If you want to define other environments then you’ll need to do a little more work. See ‘Additional Environments’ below. You can also have a look at our ","position":{"start":{"line":18,"column":1,"offset":822},"end":{"line":18,"column":154,"offset":975},"indent":[]}},{"type":"link","title":null,"url":"https://codesandbox.io/s/6w9jjrnnjn","children":[{"type":"text","value":"environment variables codesandbox","position":{"start":{"line":18,"column":155,"offset":976},"end":{"line":18,"column":188,"offset":1009},"indent":[]}}],"position":{"start":{"line":18,"column":154,"offset":975},"end":{"line":18,"column":226,"offset":1047},"indent":[]}},{"type":"text","value":" while reading the examples below.","position":{"start":{"line":18,"column":226,"offset":1047},"end":{"line":18,"column":260,"offset":1081},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":822},"end":{"line":18,"column":260,"offset":1081},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#accessing-environment-variables-in-javascript","title":null,"data":{"hProperties":{"aria-label":"accessing environment variables in javascript permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Accessing Environment Variables in JavaScript","position":{"start":{"line":20,"column":4,"offset":1086},"end":{"line":20,"column":49,"offset":1131},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1083},"end":{"line":20,"column":49,"offset":1131},"indent":[]},"data":{"id":"accessing-environment-variables-in-javascript","htmlAttributes":{"id":"accessing-environment-variables-in-javascript"},"hProperties":{"id":"accessing-environment-variables-in-javascript"}}},{"type":"paragraph","children":[{"type":"text","value":"All of the Project and OS Env Vars are only directly available at build time, or\nwhen Node.Js is running. They aren’t immediately available at run time of the client code; they\nneed to be actively captured and embedded into our client-side JavaScript.\nThis is achieved during the build using Webpack’s ","position":{"start":{"line":22,"column":1,"offset":1133},"end":{"line":25,"column":51,"offset":1435},"indent":[1,1,1]}},{"type":"link","title":null,"url":"https://webpack.js.org/plugins/define-plugin/","children":[{"type":"text","value":"DefinePlugin","position":{"start":{"line":25,"column":52,"offset":1436},"end":{"line":25,"column":64,"offset":1448},"indent":[]}}],"position":{"start":{"line":25,"column":51,"offset":1435},"end":{"line":25,"column":112,"offset":1496},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":25,"column":112,"offset":1496},"end":{"line":25,"column":113,"offset":1497},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1133},"end":{"line":25,"column":113,"offset":1497},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Once the environment variables have been embedded into the client-side, they are accessible from the\nglobal variable ","position":{"start":{"line":27,"column":1,"offset":1499},"end":{"line":28,"column":17,"offset":1616},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">process.env</code>","position":{"start":{"line":28,"column":17,"offset":1616},"end":{"line":28,"column":30,"offset":1629},"indent":[]}},{"type":"text","value":".\nOS Env Vars are accessible in Node.js from the same ","position":{"start":{"line":28,"column":30,"offset":1629},"end":{"line":29,"column":53,"offset":1683},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">process.env</code>","position":{"start":{"line":29,"column":53,"offset":1683},"end":{"line":29,"column":66,"offset":1696},"indent":[]}},{"type":"text","value":" global variable.","position":{"start":{"line":29,"column":66,"offset":1696},"end":{"line":29,"column":83,"offset":1713},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1499},"end":{"line":29,"column":83,"offset":1713},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note that since these variables are embedded at build time, you will need to restart your dev server\nor rebuild your site after changing them.","position":{"start":{"line":31,"column":1,"offset":1715},"end":{"line":32,"column":42,"offset":1857},"indent":[1]}}],"position":{"start":{"line":31,"column":1,"offset":1715},"end":{"line":32,"column":42,"offset":1857},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#defining-environment-variables","title":null,"data":{"hProperties":{"aria-label":"defining environment variables permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Environment Variables","position":{"start":{"line":34,"column":4,"offset":1862},"end":{"line":34,"column":34,"offset":1892},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1859},"end":{"line":34,"column":34,"offset":1892},"indent":[]},"data":{"id":"defining-environment-variables","htmlAttributes":{"id":"defining-environment-variables"},"hProperties":{"id":"defining-environment-variables"}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#client-side-javascript","title":null,"data":{"hProperties":{"aria-label":"client side javascript permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Client-side JavaScript","position":{"start":{"line":36,"column":6,"offset":1899},"end":{"line":36,"column":28,"offset":1921},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1894},"end":{"line":36,"column":28,"offset":1921},"indent":[]},"data":{"id":"client-side-javascript","htmlAttributes":{"id":"client-side-javascript"},"hProperties":{"id":"client-side-javascript"}}},{"type":"paragraph","children":[{"type":"text","value":"For Project Env Vars that you want to access in client-side browser JavaScript, you can define\nan environment config file, ","position":{"start":{"line":38,"column":1,"offset":1923},"end":{"line":39,"column":29,"offset":2046},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">.env.development</code>","position":{"start":{"line":39,"column":29,"offset":2046},"end":{"line":39,"column":47,"offset":2064},"indent":[]}},{"type":"text","value":" and/or ","position":{"start":{"line":39,"column":47,"offset":2064},"end":{"line":39,"column":55,"offset":2072},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">.env.production</code>","position":{"start":{"line":39,"column":55,"offset":2072},"end":{"line":39,"column":72,"offset":2089},"indent":[]}},{"type":"text","value":", in your root folder.\nDepending on your active environment, the correct one will be found and its values embedded as environment variables in the\nbrowser JavaScript.","position":{"start":{"line":39,"column":72,"offset":2089},"end":{"line":41,"column":20,"offset":2255},"indent":[1,1]}}],"position":{"start":{"line":38,"column":1,"offset":1923},"end":{"line":41,"column":20,"offset":2255},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In addition to these Project Environment Variables defined in ","position":{"start":{"line":43,"column":1,"offset":2257},"end":{"line":43,"column":63,"offset":2319},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">.env.*</code>","position":{"start":{"line":43,"column":63,"offset":2319},"end":{"line":43,"column":71,"offset":2327},"indent":[]}},{"type":"text","value":" files, you could also define\nOS Env Vars. OS Env Vars which are prefixed with ","position":{"start":{"line":43,"column":71,"offset":2327},"end":{"line":44,"column":50,"offset":2406},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">GATSBY_</code>","position":{"start":{"line":44,"column":50,"offset":2406},"end":{"line":44,"column":59,"offset":2415},"indent":[]}},{"type":"text","value":" will become available in\nbrowser JavaScript.","position":{"start":{"line":44,"column":59,"offset":2415},"end":{"line":45,"column":20,"offset":2460},"indent":[1]}}],"position":{"start":{"line":43,"column":1,"offset":2257},"end":{"line":45,"column":20,"offset":2460},"indent":[1,1]}},{"type":"html","value":"<div class=\"gatsby-code-title\">.env.*</div>"},{"type":"html","lang":"text","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GATSBY_API_URL=https://dev.example.com/api</code></pre></div>","position":{"start":{"line":47,"column":1,"offset":2462},"end":{"line":49,"column":4,"offset":2529},"indent":[1,1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#server-side-nodejs","title":null,"data":{"hProperties":{"aria-label":"server side nodejs permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Server-side Node.js","position":{"start":{"line":51,"column":6,"offset":2536},"end":{"line":51,"column":25,"offset":2555},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":2531},"end":{"line":51,"column":25,"offset":2555},"indent":[]},"data":{"id":"server-side-nodejs","htmlAttributes":{"id":"server-side-nodejs"},"hProperties":{"id":"server-side-nodejs"}}},{"type":"paragraph","children":[{"type":"text","value":"Gatsby runs several Node.js scripts at build time, notably ","position":{"start":{"line":53,"column":1,"offset":2557},"end":{"line":53,"column":60,"offset":2616},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-config.js</code>","position":{"start":{"line":53,"column":60,"offset":2616},"end":{"line":53,"column":78,"offset":2634},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":53,"column":78,"offset":2634},"end":{"line":53,"column":83,"offset":2639},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-node.js</code>","position":{"start":{"line":53,"column":83,"offset":2639},"end":{"line":53,"column":99,"offset":2655},"indent":[]}},{"type":"text","value":".\nOS Env Vars will already be available when Node is running, so you can add environment variables the\nnormal ways e.g. by adding environment variables through your hosting/build tool, your OS, or when\ncalling Gatsby on the command line.","position":{"start":{"line":53,"column":99,"offset":2655},"end":{"line":56,"column":36,"offset":2892},"indent":[1,1,1]}}],"position":{"start":{"line":53,"column":1,"offset":2557},"end":{"line":56,"column":36,"offset":2892},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In Linux terminals this can be done with:","position":{"start":{"line":58,"column":1,"offset":2894},"end":{"line":58,"column":42,"offset":2935},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2894},"end":{"line":58,"column":42,"offset":2935},"indent":[]}},{"type":"html","lang":"shell","value":"<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">MY_ENV_VAR<span class=\"token operator\">=</span>foo <span class=\"token function\">npm</span> run develop</code></pre></div>","position":{"start":{"line":60,"column":1,"offset":2937},"end":{"line":62,"column":4,"offset":2980},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In Windows it’s a little more complex. ","position":{"start":{"line":64,"column":1,"offset":2982},"end":{"line":64,"column":40,"offset":3021},"indent":[]}},{"type":"link","title":null,"url":"https://stackoverflow.com/questions/1420719/powershell-setting-an-environment-variable-for-a-single-command-only","children":[{"type":"text","value":"Check out this Stack Overflow article for some options","position":{"start":{"line":64,"column":41,"offset":3022},"end":{"line":64,"column":95,"offset":3076},"indent":[]}}],"position":{"start":{"line":64,"column":40,"offset":3021},"end":{"line":64,"column":210,"offset":3191},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":2982},"end":{"line":64,"column":210,"offset":3191},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Project environment variables that you defined in the ","position":{"start":{"line":66,"column":1,"offset":3193},"end":{"line":66,"column":55,"offset":3247},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">.env.*</code>","position":{"start":{"line":66,"column":55,"offset":3247},"end":{"line":66,"column":63,"offset":3255},"indent":[]}},{"type":"text","value":" files will ","position":{"start":{"line":66,"column":63,"offset":3255},"end":{"line":66,"column":75,"offset":3267},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"NOT","position":{"start":{"line":66,"column":76,"offset":3268},"end":{"line":66,"column":79,"offset":3271},"indent":[]}}],"position":{"start":{"line":66,"column":75,"offset":3267},"end":{"line":66,"column":80,"offset":3272},"indent":[]}},{"type":"text","value":" be immediately available\nin your Node.js scripts. To use those variables, use NPM package ","position":{"start":{"line":66,"column":80,"offset":3272},"end":{"line":67,"column":66,"offset":3363},"indent":[1]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/dotenv","children":[{"type":"text","value":"dotenv","position":{"start":{"line":67,"column":67,"offset":3364},"end":{"line":67,"column":73,"offset":3370},"indent":[]}}],"position":{"start":{"line":67,"column":66,"offset":3363},"end":{"line":67,"column":112,"offset":3409},"indent":[]}},{"type":"text","value":" to\nexamine the active ","position":{"start":{"line":67,"column":112,"offset":3409},"end":{"line":68,"column":20,"offset":3432},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">.env.*</code>","position":{"start":{"line":68,"column":20,"offset":3432},"end":{"line":68,"column":28,"offset":3440},"indent":[]}},{"type":"text","value":" file and attached those values,\nIt’s already a dependency of Gatsby, so you can require it in your ","position":{"start":{"line":68,"column":28,"offset":3440},"end":{"line":69,"column":68,"offset":3540},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">gatsby-config.js</code>","position":{"start":{"line":69,"column":68,"offset":3540},"end":{"line":69,"column":86,"offset":3558},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":69,"column":86,"offset":3558},"end":{"line":69,"column":90,"offset":3562},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-node.js</code>","position":{"start":{"line":69,"column":90,"offset":3562},"end":{"line":69,"column":106,"offset":3578},"indent":[]}},{"type":"text","value":" like this:","position":{"start":{"line":69,"column":106,"offset":3578},"end":{"line":69,"column":117,"offset":3589},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":3193},"end":{"line":69,"column":117,"offset":3589},"indent":[1,1,1]}},{"type":"html","value":"<div class=\"gatsby-code-title\">gatsby-config.js</div>"},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`.env.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>","position":{"start":{"line":71,"column":1,"offset":3591},"end":{"line":75,"column":4,"offset":3701},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now the variables are available on ","position":{"start":{"line":77,"column":1,"offset":3703},"end":{"line":77,"column":36,"offset":3738},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">process.env</code>","position":{"start":{"line":77,"column":36,"offset":3738},"end":{"line":77,"column":49,"offset":3751},"indent":[]}},{"type":"text","value":" as usual.","position":{"start":{"line":77,"column":49,"offset":3751},"end":{"line":77,"column":59,"offset":3761},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":3703},"end":{"line":77,"column":59,"offset":3761},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#example","title":null,"data":{"hProperties":{"aria-label":"example permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Example","position":{"start":{"line":79,"column":4,"offset":3766},"end":{"line":79,"column":11,"offset":3773},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":3763},"end":{"line":79,"column":11,"offset":3773},"indent":[]},"data":{"id":"example","htmlAttributes":{"id":"example"},"hProperties":{"id":"example"}}},{"type":"paragraph","children":[{"type":"text","value":"Please note that you shouldn’t commit ","position":{"start":{"line":81,"column":1,"offset":3775},"end":{"line":81,"column":39,"offset":3813},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">.env.*</code>","position":{"start":{"line":81,"column":39,"offset":3813},"end":{"line":81,"column":47,"offset":3821},"indent":[]}},{"type":"text","value":" files to your source control and rather use options given by your CD provider (e.g. Netlify with its ","position":{"start":{"line":81,"column":47,"offset":3821},"end":{"line":81,"column":149,"offset":3923},"indent":[]}},{"type":"link","title":null,"url":"https://www.netlify.com/docs/continuous-deployment/#build-environment-variables","children":[{"type":"text","value":"build environment variables","position":{"start":{"line":81,"column":150,"offset":3924},"end":{"line":81,"column":177,"offset":3951},"indent":[]}}],"position":{"start":{"line":81,"column":149,"offset":3923},"end":{"line":81,"column":259,"offset":4033},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":81,"column":259,"offset":4033},"end":{"line":81,"column":261,"offset":4035},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":3775},"end":{"line":81,"column":261,"offset":4035},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">.env.development</div>"},{"type":"html","lang":"text","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GATSBY_API_URL=https://dev.example.com/api\nAPI_KEY=927349872349798</code></pre></div>","position":{"start":{"line":83,"column":1,"offset":4037},"end":{"line":86,"column":4,"offset":4138},"indent":[1,1,1]}},{"type":"html","value":"<div class=\"gatsby-code-title\">.env.production</div>"},{"type":"html","lang":"text","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GATSBY_API_URL=https://example.com/api\nAPI_KEY=927349872349798</code></pre></div>","position":{"start":{"line":88,"column":1,"offset":4140},"end":{"line":91,"column":4,"offset":4236},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note: since Gatsby uses the ","position":{"start":{"line":93,"column":1,"offset":4238},"end":{"line":93,"column":29,"offset":4266},"indent":[]}},{"type":"link","title":null,"url":"https://webpack.js.org/plugins/define-plugin/","children":[{"type":"text","value":"Webpack DefinePlugin","position":{"start":{"line":93,"column":30,"offset":4267},"end":{"line":93,"column":50,"offset":4287},"indent":[]}}],"position":{"start":{"line":93,"column":29,"offset":4266},"end":{"line":93,"column":98,"offset":4335},"indent":[]}},{"type":"text","value":" to make the environment variables available at runtime, they cannot be destructured from ","position":{"start":{"line":93,"column":98,"offset":4335},"end":{"line":93,"column":188,"offset":4425},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">process.env</code>","position":{"start":{"line":93,"column":188,"offset":4425},"end":{"line":93,"column":201,"offset":4438},"indent":[]}},{"type":"text","value":"; instead, they have to be fully referenced.\n","position":{"start":{"line":93,"column":201,"offset":4438},"end":{"line":94,"column":1,"offset":4483},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">GATSBY_API_URL</code>","position":{"start":{"line":94,"column":1,"offset":4483},"end":{"line":94,"column":17,"offset":4499},"indent":[]}},{"type":"text","value":" will be available to your site (Client-side and server-side) as ","position":{"start":{"line":94,"column":17,"offset":4499},"end":{"line":94,"column":82,"offset":4564},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">process.env.GATSBY_API_URL</code>","position":{"start":{"line":94,"column":82,"offset":4564},"end":{"line":94,"column":110,"offset":4592},"indent":[]}},{"type":"text","value":".:","position":{"start":{"line":94,"column":110,"offset":4592},"end":{"line":94,"column":112,"offset":4594},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":4238},"end":{"line":94,"column":112,"offset":4594},"indent":[1]}},{"type":"html","lang":"jsx","value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// In any frontend code</span>\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">GATSBY_API_URL</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/logo.png`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Logo<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":96,"column":1,"offset":4596},"end":{"line":105,"column":4,"offset":4751},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">API_KEY</code>","position":{"start":{"line":107,"column":1,"offset":4753},"end":{"line":107,"column":10,"offset":4762},"indent":[]}},{"type":"text","value":" will be available to your site (Server-side) as ","position":{"start":{"line":107,"column":10,"offset":4762},"end":{"line":107,"column":59,"offset":4811},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">process.env.API_KEY</code>","position":{"start":{"line":107,"column":59,"offset":4811},"end":{"line":107,"column":80,"offset":4832},"indent":[]}},{"type":"text","value":". If you commit your ","position":{"start":{"line":107,"column":80,"offset":4832},"end":{"line":107,"column":101,"offset":4853},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">.env.*</code>","position":{"start":{"line":107,"column":101,"offset":4853},"end":{"line":107,"column":109,"offset":4861},"indent":[]}},{"type":"text","value":" file containing ","position":{"start":{"line":107,"column":109,"offset":4861},"end":{"line":107,"column":126,"offset":4878},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">API_KEY</code>","position":{"start":{"line":107,"column":126,"offset":4878},"end":{"line":107,"column":135,"offset":4887},"indent":[]}},{"type":"text","value":" to source control it would also be available on the client-side. However we strongly advise against that! You should prefix your variable with ","position":{"start":{"line":107,"column":135,"offset":4887},"end":{"line":107,"column":279,"offset":5031},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">GATSBY_</code>","position":{"start":{"line":107,"column":279,"offset":5031},"end":{"line":107,"column":288,"offset":5040},"indent":[]}},{"type":"text","value":" (as shown above) instead and Gatsby automatically makes it available in the browser context.","position":{"start":{"line":107,"column":288,"offset":5040},"end":{"line":107,"column":381,"offset":5133},"indent":[]}}],"position":{"start":{"line":107,"column":1,"offset":4753},"end":{"line":107,"column":381,"offset":5133},"indent":[]}},{"type":"html","lang":"js","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// In any server-side code, e.g. gatsby-config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-patronus`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        apiKey<span class=\"token punctuation\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":109,"column":1,"offset":5135},"end":{"line":121,"column":4,"offset":5350},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#reserved-environment-variables","title":null,"data":{"hProperties":{"aria-label":"reserved environment variables permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Reserved Environment Variables:","position":{"start":{"line":123,"column":4,"offset":5355},"end":{"line":123,"column":35,"offset":5386},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":5352},"end":{"line":123,"column":35,"offset":5386},"indent":[]},"data":{"id":"reserved-environment-variables","htmlAttributes":{"id":"reserved-environment-variables"},"hProperties":{"id":"reserved-environment-variables"}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"You can not override certain environment variables as some are used internally\nfor optimizations during build","position":{"start":{"line":125,"column":3,"offset":5390},"end":{"line":126,"column":33,"offset":5501},"indent":[3]}}],"position":{"start":{"line":125,"column":3,"offset":5390},"end":{"line":126,"column":33,"offset":5501},"indent":[3]}}],"position":{"start":{"line":125,"column":1,"offset":5388},"end":{"line":126,"column":33,"offset":5501},"indent":[1]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">NODE_ENV</code>","position":{"start":{"line":128,"column":3,"offset":5505},"end":{"line":128,"column":13,"offset":5515},"indent":[]}}],"position":{"start":{"line":128,"column":3,"offset":5505},"end":{"line":128,"column":13,"offset":5515},"indent":[]}}],"position":{"start":{"line":128,"column":1,"offset":5503},"end":{"line":128,"column":13,"offset":5515},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">PUBLIC_DIR</code>","position":{"start":{"line":129,"column":3,"offset":5518},"end":{"line":129,"column":15,"offset":5530},"indent":[]}}],"position":{"start":{"line":129,"column":3,"offset":5518},"end":{"line":129,"column":15,"offset":5530},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":5516},"end":{"line":129,"column":15,"offset":5530},"indent":[]}}],"position":{"start":{"line":128,"column":1,"offset":5503},"end":{"line":129,"column":15,"offset":5530},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Gatsby also allows you to specify another environment variable when running the local development server (e.g. ","position":{"start":{"line":131,"column":1,"offset":5532},"end":{"line":131,"column":112,"offset":5643},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">npm run develop</code>","position":{"start":{"line":131,"column":112,"offset":5643},"end":{"line":131,"column":129,"offset":5660},"indent":[]}},{"type":"text","value":"):","position":{"start":{"line":131,"column":129,"offset":5660},"end":{"line":131,"column":131,"offset":5662},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":5532},"end":{"line":131,"column":131,"offset":5662},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">ENABLE_GATSBY_REFRESH_ENDPOINT</code>","position":{"start":{"line":133,"column":3,"offset":5666},"end":{"line":133,"column":35,"offset":5698},"indent":[]}}],"position":{"start":{"line":133,"column":3,"offset":5666},"end":{"line":133,"column":35,"offset":5698},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":5664},"end":{"line":133,"column":35,"offset":5698},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":5664},"end":{"line":133,"column":35,"offset":5698},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If set to true, this will expose a ","position":{"start":{"line":135,"column":1,"offset":5700},"end":{"line":135,"column":36,"offset":5735},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/__refresh</code>","position":{"start":{"line":135,"column":36,"offset":5735},"end":{"line":135,"column":48,"offset":5747},"indent":[]}},{"type":"text","value":" webhook that is able to receive ","position":{"start":{"line":135,"column":48,"offset":5747},"end":{"line":135,"column":81,"offset":5780},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">POST</code>","position":{"start":{"line":135,"column":81,"offset":5780},"end":{"line":135,"column":87,"offset":5786},"indent":[]}},{"type":"text","value":" requests to ","position":{"start":{"line":135,"column":87,"offset":5786},"end":{"line":135,"column":100,"offset":5799},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"refresh","position":{"start":{"line":135,"column":101,"offset":5800},"end":{"line":135,"column":108,"offset":5807},"indent":[]}}],"position":{"start":{"line":135,"column":100,"offset":5799},"end":{"line":135,"column":109,"offset":5808},"indent":[]}},{"type":"text","value":" the sourced content. This exposed webhook can be triggered whenever remote data changes, which means you can update your data without re-launching the development server.","position":{"start":{"line":135,"column":109,"offset":5808},"end":{"line":135,"column":280,"offset":5979},"indent":[]}}],"position":{"start":{"line":135,"column":1,"offset":5700},"end":{"line":135,"column":280,"offset":5979},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can trigger this endpoint locally for example on Unix-based operating systems (like Ubuntu and MacOS) you can use ","position":{"start":{"line":137,"column":1,"offset":5981},"end":{"line":137,"column":119,"offset":6099},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">curl -X POST http://localhost:8000/__refresh</code>","position":{"start":{"line":137,"column":119,"offset":6099},"end":{"line":137,"column":165,"offset":6145},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":137,"column":165,"offset":6145},"end":{"line":137,"column":166,"offset":6146},"indent":[]}}],"position":{"start":{"line":137,"column":1,"offset":5981},"end":{"line":137,"column":166,"offset":6146},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#additional-environments-staging-test-etc","title":null,"data":{"hProperties":{"aria-label":"additional environments staging test etc permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Additional Environments (Staging, Test, etc)","position":{"start":{"line":139,"column":4,"offset":6151},"end":{"line":139,"column":48,"offset":6195},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":6148},"end":{"line":139,"column":48,"offset":6195},"indent":[]},"data":{"id":"additional-environments-staging-test-etc","htmlAttributes":{"id":"additional-environments-staging-test-etc"},"hProperties":{"id":"additional-environments-staging-test-etc"}}},{"type":"paragraph","children":[{"type":"text","value":"As noted above ","position":{"start":{"line":141,"column":1,"offset":6197},"end":{"line":141,"column":16,"offset":6212},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">NODE_ENV</code>","position":{"start":{"line":141,"column":16,"offset":6212},"end":{"line":141,"column":26,"offset":6222},"indent":[]}},{"type":"text","value":" is a reserved environment variable in Gatsby as it is needed by the build system to make key optimizations when compiling React and other modules. For this reason it is necessary to make use of a secondary environment variable for additional environment support, and manually make the environment variables available to the client-side code.","position":{"start":{"line":141,"column":26,"offset":6222},"end":{"line":141,"column":368,"offset":6564},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":6197},"end":{"line":141,"column":368,"offset":6564},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can define your own OS Env Var to track the active environment, and then to locate the relevant Project Env Vars to load. Gatsby itself will not do anything with that OS Env Var, but you can use it in ","position":{"start":{"line":143,"column":1,"offset":6566},"end":{"line":143,"column":206,"offset":6771},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-config.js</code>","position":{"start":{"line":143,"column":206,"offset":6771},"end":{"line":143,"column":224,"offset":6789},"indent":[]}},{"type":"text","value":".\nSpecifically, you can use ","position":{"start":{"line":143,"column":224,"offset":6789},"end":{"line":144,"column":27,"offset":6817},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">dotenv</code>","position":{"start":{"line":144,"column":27,"offset":6817},"end":{"line":144,"column":35,"offset":6825},"indent":[]}},{"type":"text","value":" and your individual OS Env Var to locate the ","position":{"start":{"line":144,"column":35,"offset":6825},"end":{"line":144,"column":81,"offset":6871},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">.env.myCustomEnvironment</code>","position":{"start":{"line":144,"column":81,"offset":6871},"end":{"line":144,"column":107,"offset":6897},"indent":[]}},{"type":"text","value":" file, and then use module.exports to store those Project Env Vars somewhere that the client-side Javascript can access the values (via GraphQL queries).","position":{"start":{"line":144,"column":107,"offset":6897},"end":{"line":144,"column":260,"offset":7050},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":6566},"end":{"line":144,"column":260,"offset":7050},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"For instance. If you would like to add a ","position":{"start":{"line":146,"column":1,"offset":7052},"end":{"line":146,"column":42,"offset":7093},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">staging</code>","position":{"start":{"line":146,"column":42,"offset":7093},"end":{"line":146,"column":51,"offset":7102},"indent":[]}},{"type":"text","value":" environment with a custom Google Analytics Tracking ID, and a dedicated ","position":{"start":{"line":146,"column":51,"offset":7102},"end":{"line":146,"column":124,"offset":7175},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">apiUrl</code>","position":{"start":{"line":146,"column":124,"offset":7175},"end":{"line":146,"column":132,"offset":7183},"indent":[]}},{"type":"text","value":". You can add ","position":{"start":{"line":146,"column":132,"offset":7183},"end":{"line":146,"column":146,"offset":7197},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">.env.staging</code>","position":{"start":{"line":146,"column":146,"offset":7197},"end":{"line":146,"column":160,"offset":7211},"indent":[]}},{"type":"text","value":" at the root of your project with the following modification to your ","position":{"start":{"line":146,"column":160,"offset":7211},"end":{"line":146,"column":229,"offset":7280},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-config.js</code>","position":{"start":{"line":146,"column":229,"offset":7280},"end":{"line":146,"column":247,"offset":7298},"indent":[]}}],"position":{"start":{"line":146,"column":1,"offset":7052},"end":{"line":146,"column":247,"offset":7298},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#example-1","title":null,"data":{"hProperties":{"aria-label":"example 1 permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Example","position":{"start":{"line":148,"column":5,"offset":7304},"end":{"line":148,"column":12,"offset":7311},"indent":[]}}],"position":{"start":{"line":148,"column":1,"offset":7300},"end":{"line":148,"column":12,"offset":7311},"indent":[]},"data":{"id":"example-1","htmlAttributes":{"id":"example-1"},"hProperties":{"id":"example-1"}}},{"type":"html","value":"<div class=\"gatsby-code-title\">.env.staging</div>"},{"type":"html","lang":"text","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GA_TRACKING_ID=&quot;UA-1234567890&quot;\nAPI_URL=&quot;http://foo.bar&quot;</code></pre></div>","position":{"start":{"line":150,"column":1,"offset":7313},"end":{"line":153,"column":4,"offset":7399},"indent":[1,1,1]}},{"type":"html","value":"<div class=\"gatsby-code-title\">gatsby-config.js</div>"},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> activeEnv <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ACTIVE_ENV</span> <span class=\"token operator\">||</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">||</span> <span class=\"token string\">\"development\"</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`Using environment config: '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>activeEnv<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">'`</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`.env.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>activeEnv<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Gatsby Default Starter\"</span><span class=\"token punctuation\">,</span>\n    apiUrl<span class=\"token punctuation\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">API_URL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-google-analytics`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        trackingId<span class=\"token punctuation\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">GA_TRACKING_ID</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Puts tracking script in the head instead of the body</span>\n        head<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Setting this parameter is optional</span>\n        anonymize<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Setting this parameter is also optional</span>\n        respectDNT<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":155,"column":1,"offset":7401},"end":{"line":184,"column":4,"offset":8140},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This will then load the values from the relevant environment’s ","position":{"start":{"line":186,"column":1,"offset":8142},"end":{"line":186,"column":64,"offset":8205},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">.env.*</code>","position":{"start":{"line":186,"column":64,"offset":8205},"end":{"line":186,"column":72,"offset":8213},"indent":[]}},{"type":"text","value":" file and make them available via GraphQL queries and the analytics plugin respectively.","position":{"start":{"line":186,"column":72,"offset":8213},"end":{"line":186,"column":160,"offset":8301},"indent":[]}}],"position":{"start":{"line":186,"column":1,"offset":8142},"end":{"line":186,"column":160,"offset":8301},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Note that ","position":{"start":{"line":188,"column":1,"offset":8303},"end":{"line":188,"column":11,"offset":8313},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">ACTIVE_ENV</code>","position":{"start":{"line":188,"column":11,"offset":8313},"end":{"line":188,"column":23,"offset":8325},"indent":[]}},{"type":"text","value":" could be called anything - it’s not used or known about by anything else in Gatsby (as opposed to ","position":{"start":{"line":188,"column":23,"offset":8325},"end":{"line":188,"column":122,"offset":8424},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">NODE_ENV</code>","position":{"start":{"line":188,"column":122,"offset":8424},"end":{"line":188,"column":132,"offset":8434},"indent":[]}},{"type":"text","value":" which is, as previously discussed).","position":{"start":{"line":188,"column":132,"offset":8434},"end":{"line":188,"column":168,"offset":8470},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":8303},"end":{"line":188,"column":168,"offset":8470},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Local testing of the ","position":{"start":{"line":190,"column":1,"offset":8472},"end":{"line":190,"column":22,"offset":8493},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">staging</code>","position":{"start":{"line":190,"column":22,"offset":8493},"end":{"line":190,"column":31,"offset":8502},"indent":[]}},{"type":"text","value":" environment can be done with:","position":{"start":{"line":190,"column":31,"offset":8502},"end":{"line":190,"column":61,"offset":8532},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":8472},"end":{"line":190,"column":61,"offset":8532},"indent":[]}},{"type":"html","lang":"shell","value":"<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ACTIVE_ENV<span class=\"token operator\">=</span>staging <span class=\"token function\">npm</span> run develop</code></pre></div>","position":{"start":{"line":192,"column":1,"offset":8534},"end":{"line":194,"column":4,"offset":8581},"indent":[1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":195,"column":1,"offset":8582}}}}