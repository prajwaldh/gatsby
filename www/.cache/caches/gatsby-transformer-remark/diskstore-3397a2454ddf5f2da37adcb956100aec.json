{"expireTime":9007200804686342000,"key":"transformer-remark-markdown-html-ast-def8a46bd30c1e9a8fc29574466d0bde-gatsby-remark-graphvizgatsby-remark-code-titlesgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{"id":"move-source-directories-pages-components-utils-etc-under-src"},"children":[{"type":"element","tagName":"a","properties":{"href":"#move-source-directories-pages-components-utils-etc-under-src","aria-label":"move source directories pages components utils etc under src permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Move source directories (pages, components, utils, etc.) under ","position":{"start":{"line":2,"column":4,"offset":4},"end":{"line":2,"column":67,"offset":67}}},{"type":"raw","value":"<code class=\"language-text\">src</code>","position":{"start":{"line":2,"column":67,"offset":67},"end":{"line":2,"column":72,"offset":72}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":72,"offset":72}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/issues/814"},"children":[{"type":"text","value":"We moved site source files under a “src” directory","position":{"start":{"line":4,"column":2,"offset":75},"end":{"line":4,"column":52,"offset":125}}}],"position":{"start":{"line":4,"column":1,"offset":74},"end":{"line":4,"column":100,"offset":173}}},{"type":"text","value":"\nto cleanly separate them from config/data/build folders so to make integration\nwith various JavaScript tooling (e.g.\n","position":{"start":{"line":4,"column":100,"offset":173},"end":{"line":7,"column":1,"offset":291}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/prettier/prettier"},"children":[{"type":"text","value":"Prettier","position":{"start":{"line":7,"column":2,"offset":292},"end":{"line":7,"column":10,"offset":300}}}],"position":{"start":{"line":7,"column":1,"offset":291},"end":{"line":7,"column":49,"offset":339}}},{"type":"text","value":") simpler.","position":{"start":{"line":7,"column":49,"offset":339},"end":{"line":7,"column":59,"offset":349}}}],"position":{"start":{"line":4,"column":1,"offset":74},"end":{"line":7,"column":59,"offset":349}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Everything related to webpack, loaders, Babel, React should work nearly\nidentically under v1 of Gatsby compared to v0 so this part of the migration is\nsuper easy.","position":{"start":{"line":9,"column":1,"offset":351},"end":{"line":11,"column":12,"offset":513}}}],"position":{"start":{"line":9,"column":1,"offset":351},"end":{"line":11,"column":12,"offset":513}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">mkdir</span> src\n<span class=\"token function\">git</span> <span class=\"token function\">mv</span> pages src\n<span class=\"token function\">git</span> <span class=\"token function\">mv</span> components src\n<span class=\"token function\">git</span> <span class=\"token function\">mv</span> utils src\n<span class=\"token punctuation\">..</span>.</code></pre></div>","position":{"start":{"line":13,"column":1,"offset":515},"end":{"line":19,"column":4,"offset":597}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"replace-react-routers-link-component-with-gatsby-link"},"children":[{"type":"element","tagName":"a","properties":{"href":"#replace-react-routers-link-component-with-gatsby-link","aria-label":"replace react routers link component with gatsby link permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Replace react-router’s Link component with gatsby-link","position":{"start":{"line":21,"column":4,"offset":602},"end":{"line":21,"column":58,"offset":656}}}],"position":{"start":{"line":21,"column":1,"offset":599},"end":{"line":21,"column":58,"offset":656}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">gatsby-link</code>","position":{"start":{"line":23,"column":1,"offset":658},"end":{"line":23,"column":14,"offset":671}}},{"type":"text","value":" is a wrapper for the ","position":{"start":{"line":23,"column":14,"offset":671},"end":{"line":23,"column":36,"offset":693}}},{"type":"raw","value":"<code class=\"language-text\">&lt;Link&gt;</code>","position":{"start":{"line":23,"column":36,"offset":693},"end":{"line":23,"column":44,"offset":701}}},{"type":"text","value":" component in react-router. It\nautomatically prefixes urls and handles prefetching. Add ","position":{"start":{"line":23,"column":44,"offset":701},"end":{"line":24,"column":58,"offset":789}}},{"type":"raw","value":"<code class=\"language-text\">gatsby-link</code>","position":{"start":{"line":24,"column":58,"offset":789},"end":{"line":24,"column":71,"offset":802}}},{"type":"text","value":" to your\nproject by running:","position":{"start":{"line":24,"column":71,"offset":802},"end":{"line":25,"column":20,"offset":830}}}],"position":{"start":{"line":23,"column":1,"offset":658},"end":{"line":25,"column":20,"offset":830}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">npm install --save gatsby-link</code>","position":{"start":{"line":27,"column":1,"offset":832},"end":{"line":27,"column":33,"offset":864}}}],"position":{"start":{"line":27,"column":1,"offset":832},"end":{"line":27,"column":33,"offset":864}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">gatsby-link</code>","position":{"start":{"line":29,"column":1,"offset":866},"end":{"line":29,"column":14,"offset":879}}},{"type":"text","value":" auto-detects whether to use a plain ","position":{"start":{"line":29,"column":14,"offset":879},"end":{"line":29,"column":51,"offset":916}}},{"type":"raw","value":"<code class=\"language-text\">&lt;Link&gt;</code>","position":{"start":{"line":29,"column":51,"offset":916},"end":{"line":29,"column":59,"offset":924}}},{"type":"text","value":" or ","position":{"start":{"line":29,"column":59,"offset":924},"end":{"line":29,"column":63,"offset":928}}},{"type":"raw","value":"<code class=\"language-text\">&lt;NavLink&gt;</code>","position":{"start":{"line":29,"column":63,"offset":928},"end":{"line":29,"column":74,"offset":939}}},{"type":"text","value":" based\non what props you pass it. There’s no need to wrap ","position":{"start":{"line":29,"column":74,"offset":939},"end":{"line":30,"column":52,"offset":997}}},{"type":"raw","value":"<code class=\"language-text\">&lt;IndexLink&gt;</code>","position":{"start":{"line":30,"column":52,"offset":997},"end":{"line":30,"column":65,"offset":1010}}},{"type":"text","value":" because it was\ndropped in react-router v4 in favor of the ","position":{"start":{"line":30,"column":65,"offset":1010},"end":{"line":31,"column":44,"offset":1069}}},{"type":"raw","value":"<code class=\"language-text\">exact</code>","position":{"start":{"line":31,"column":44,"offset":1069},"end":{"line":31,"column":51,"offset":1076}}},{"type":"text","value":" prop.","position":{"start":{"line":31,"column":51,"offset":1076},"end":{"line":31,"column":57,"offset":1082}}}],"position":{"start":{"line":29,"column":1,"offset":866},"end":{"line":31,"column":57,"offset":1082}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-link'</span>\n\n<span class=\"token comment\">// Equivalent to react-router's &lt;Link></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Link</span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/page-2/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Page 2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Link</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">// Equivalent to react-router's &lt;NavLink></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Link</span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/page-2/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">activeClassName</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>selected<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Page 2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Link</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">// `exact` prop replaces &lt;IndexLink> from react-router v3</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Link</span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">exact</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Link</span><span class=\"token punctuation\">></span></span></code></pre></div>","position":{"start":{"line":33,"column":1,"offset":1084},"end":{"line":44,"column":4,"offset":1393}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Prefixing links is also now handled automatically by our new ","position":{"start":{"line":46,"column":1,"offset":1395},"end":{"line":46,"column":62,"offset":1456}}},{"type":"raw","value":"<code class=\"language-text\">&lt;Link&gt;</code>","position":{"start":{"line":46,"column":62,"offset":1456},"end":{"line":46,"column":70,"offset":1464}}},{"type":"text","value":" component\nso remove usages of ","position":{"start":{"line":46,"column":70,"offset":1464},"end":{"line":47,"column":21,"offset":1495}}},{"type":"raw","value":"<code class=\"language-text\">prefixLink</code>","position":{"start":{"line":47,"column":21,"offset":1495},"end":{"line":47,"column":33,"offset":1507}}},{"type":"text","value":" in links.","position":{"start":{"line":47,"column":33,"offset":1507},"end":{"line":47,"column":43,"offset":1517}}}],"position":{"start":{"line":46,"column":1,"offset":1395},"end":{"line":47,"column":43,"offset":1517}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Use ","position":{"start":{"line":49,"column":1,"offset":1519},"end":{"line":49,"column":5,"offset":1523}}},{"type":"raw","value":"<code class=\"language-text\">gatsby-link</code>","position":{"start":{"line":49,"column":5,"offset":1523},"end":{"line":49,"column":18,"offset":1536}}},{"type":"text","value":" everywhere and things will Just Work™.","position":{"start":{"line":49,"column":18,"offset":1536},"end":{"line":49,"column":57,"offset":1575}}}],"position":{"start":{"line":49,"column":1,"offset":1519},"end":{"line":49,"column":57,"offset":1575}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"configtoml-is-now-gatsby-configjs"},"children":[{"type":"element","tagName":"a","properties":{"href":"#configtoml-is-now-gatsby-configjs","aria-label":"configtoml is now gatsby configjs permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"config.toml is now gatsby-config.js","position":{"start":{"line":51,"column":4,"offset":1580},"end":{"line":51,"column":39,"offset":1615}}}],"position":{"start":{"line":51,"column":1,"offset":1577},"end":{"line":51,"column":39,"offset":1615}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you previously added site metadata to ","position":{"start":{"line":53,"column":1,"offset":1617},"end":{"line":53,"column":42,"offset":1658}}},{"type":"raw","value":"<code class=\"language-text\">config.toml</code>","position":{"start":{"line":53,"column":42,"offset":1658},"end":{"line":53,"column":55,"offset":1671}}},{"type":"text","value":", move that into the new\n","position":{"start":{"line":53,"column":55,"offset":1671},"end":{"line":54,"column":1,"offset":1696}}},{"type":"raw","value":"<code class=\"language-text\">gatsby-config.js</code>","position":{"start":{"line":54,"column":1,"offset":1696},"end":{"line":54,"column":19,"offset":1714}}},{"type":"text","value":".","position":{"start":{"line":54,"column":19,"offset":1714},"end":{"line":54,"column":20,"offset":1715}}}],"position":{"start":{"line":53,"column":1,"offset":1617},"end":{"line":54,"column":20,"offset":1715}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You need to remove all requires/imports of ","position":{"start":{"line":56,"column":1,"offset":1717},"end":{"line":56,"column":44,"offset":1760}}},{"type":"raw","value":"<code class=\"language-text\">config</code>","position":{"start":{"line":56,"column":44,"offset":1760},"end":{"line":56,"column":52,"offset":1768}}},{"type":"text","value":" in your code.","position":{"start":{"line":56,"column":52,"offset":1768},"end":{"line":56,"column":66,"offset":1782}}}],"position":{"start":{"line":56,"column":1,"offset":1717},"end":{"line":56,"column":66,"offset":1782}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Site-wide metadata should now be “queried” using GraphQL.","position":{"start":{"line":58,"column":1,"offset":1784},"end":{"line":58,"column":58,"offset":1841}}}],"position":{"start":{"line":58,"column":1,"offset":1784},"end":{"line":58,"column":58,"offset":1841}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A minimal config module would look like:","position":{"start":{"line":60,"column":1,"offset":1843},"end":{"line":60,"column":41,"offset":1883}}}],"position":{"start":{"line":60,"column":1,"offset":1843},"end":{"line":60,"column":41,"offset":1883}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`My Sweet Gatsby Site!`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":62,"column":1,"offset":1885},"end":{"line":68,"column":4,"offset":1982}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"and a minimal query would look like","position":{"start":{"line":70,"column":1,"offset":1984},"end":{"line":70,"column":36,"offset":2019}}}],"position":{"start":{"line":70,"column":1,"offset":1984},"end":{"line":70,"column":36,"offset":2019}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export const pageQuery = graphql`\n  query SiteMetadataLookup($slug: String!) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n}\n`</code></pre></div>","position":{"start":{"line":72,"column":1,"offset":2021},"end":{"line":82,"column":4,"offset":2171}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"exporting that from the same file as a React component will make the config\ninformation available to the component as a ","position":{"start":{"line":84,"column":1,"offset":2173},"end":{"line":85,"column":45,"offset":2293}}},{"type":"raw","value":"<code class=\"language-text\">data</code>","position":{"start":{"line":85,"column":45,"offset":2293},"end":{"line":85,"column":51,"offset":2299}}},{"type":"text","value":" prop on the component. For\ninstance, the title attribute could be referenced as\n","position":{"start":{"line":85,"column":51,"offset":2299},"end":{"line":87,"column":1,"offset":2380}}},{"type":"raw","value":"<code class=\"language-text\">props.data.site.siteMetadata.title</code>","position":{"start":{"line":87,"column":1,"offset":2380},"end":{"line":87,"column":37,"offset":2416}}},{"type":"text","value":".","position":{"start":{"line":87,"column":37,"offset":2416},"end":{"line":87,"column":38,"offset":2417}}}],"position":{"start":{"line":84,"column":1,"offset":2173},"end":{"line":87,"column":38,"offset":2417}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"migrate-wrapper-components-to-template-components"},"children":[{"type":"element","tagName":"a","properties":{"href":"#migrate-wrapper-components-to-template-components","aria-label":"migrate wrapper components to template components permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Migrate wrapper components to template components","position":{"start":{"line":89,"column":4,"offset":2422},"end":{"line":89,"column":53,"offset":2471}}}],"position":{"start":{"line":89,"column":1,"offset":2419},"end":{"line":89,"column":53,"offset":2471}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In v0, there was the concept of “wrapper” components that would render each file\nof a given file type. E.g. markdown files would be rendered by a wrapper\ncomponent at ","position":{"start":{"line":91,"column":1,"offset":2473},"end":{"line":93,"column":14,"offset":2640}}},{"type":"raw","value":"<code class=\"language-text\">wrappers/md.js</code>","position":{"start":{"line":93,"column":14,"offset":2640},"end":{"line":93,"column":30,"offset":2656}}},{"type":"text","value":" and JSON files ","position":{"start":{"line":93,"column":30,"offset":2656},"end":{"line":93,"column":46,"offset":2672}}},{"type":"raw","value":"<code class=\"language-text\">wrappers/json.js</code>","position":{"start":{"line":93,"column":46,"offset":2672},"end":{"line":93,"column":64,"offset":2690}}},{"type":"text","value":", etc. Data would\nbe parsed from the files and automatically injected into the wrapper components\nas props.","position":{"start":{"line":93,"column":64,"offset":2690},"end":{"line":95,"column":10,"offset":2797}}}],"position":{"start":{"line":91,"column":1,"offset":2473},"end":{"line":95,"column":10,"offset":2797}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"If you’re ","position":{"start":{"line":97,"column":3,"offset":2801},"end":{"line":97,"column":13,"offset":2811}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"not","position":{"start":{"line":97,"column":14,"offset":2812},"end":{"line":97,"column":17,"offset":2815}}}],"position":{"start":{"line":97,"column":13,"offset":2811},"end":{"line":97,"column":18,"offset":2816}}},{"type":"text","value":" using wrappers in your site, feel free to skip this section.","position":{"start":{"line":97,"column":18,"offset":2816},"end":{"line":97,"column":79,"offset":2877}}}],"position":{"start":{"line":97,"column":1,"offset":2799},"end":{"line":97,"column":81,"offset":2879}}}],"position":{"start":{"line":97,"column":1,"offset":2799},"end":{"line":97,"column":81,"offset":2879}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"While this proved often intuitive and workable, it was overly prescriptive and\nrestricted the types of pages that could be created due to the required 1-to-1\nrelationship between files and pages.","position":{"start":{"line":99,"column":1,"offset":2881},"end":{"line":101,"column":38,"offset":3076}}}],"position":{"start":{"line":99,"column":1,"offset":2881},"end":{"line":101,"column":38,"offset":3076}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So for v1, we’re moving to a mode where sites must explicitly create pages and\ncreate mappings between template components and data.","position":{"start":{"line":103,"column":1,"offset":3078},"end":{"line":104,"column":54,"offset":3210}}}],"position":{"start":{"line":103,"column":1,"offset":3078},"end":{"line":104,"column":54,"offset":3210}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Gatsby’s new data system turns your data into a queryable database. You can\nquery data in any way to create pages and to pull in data into these pages.","position":{"start":{"line":106,"column":1,"offset":3212},"end":{"line":107,"column":76,"offset":3363}}}],"position":{"start":{"line":106,"column":1,"offset":3212},"end":{"line":107,"column":76,"offset":3363}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"These mappings can range between straightforward and complex. E.g. a markdown\nblog would want to create a post page for every markdown file. But it also might\nwant to create tag pages for each tag linking to the posts using that tag. See\n","position":{"start":{"line":109,"column":1,"offset":3365},"end":{"line":112,"column":1,"offset":3603}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/issues/421"},"children":[{"type":"text","value":"this issue on programmatic routes","position":{"start":{"line":112,"column":2,"offset":3604},"end":{"line":112,"column":35,"offset":3637}}}],"position":{"start":{"line":112,"column":1,"offset":3603},"end":{"line":112,"column":83,"offset":3685}}},{"type":"text","value":"\nand this\n","position":{"start":{"line":112,"column":83,"offset":3685},"end":{"line":114,"column":1,"offset":3695}}},{"type":"element","tagName":"a","properties":{"href":"https://www.bricolage.io/gatsby-open-source-work/"},"children":[{"type":"text","value":"blog post introducing work on v1","position":{"start":{"line":114,"column":2,"offset":3696},"end":{"line":114,"column":34,"offset":3728}}}],"position":{"start":{"line":114,"column":1,"offset":3695},"end":{"line":114,"column":86,"offset":3780}}},{"type":"text","value":"\nfor more background on this change.","position":{"start":{"line":114,"column":86,"offset":3780},"end":{"line":115,"column":36,"offset":3816}}}],"position":{"start":{"line":109,"column":1,"offset":3365},"end":{"line":115,"column":36,"offset":3816}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here’s an example of migrating a markdown wrapper to Gatsby v1.","position":{"start":{"line":117,"column":1,"offset":3818},"end":{"line":117,"column":64,"offset":3881}}}],"position":{"start":{"line":117,"column":1,"offset":3818},"end":{"line":117,"column":64,"offset":3881}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"add-markdown-plugins"},"children":[{"type":"element","tagName":"a","properties":{"href":"#add-markdown-plugins","aria-label":"add markdown plugins permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Add markdown plugins","position":{"start":{"line":119,"column":5,"offset":3887},"end":{"line":119,"column":25,"offset":3907}}}],"position":{"start":{"line":119,"column":1,"offset":3883},"end":{"line":119,"column":25,"offset":3907}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Install Gatsby plugins for handling markdown files.","position":{"start":{"line":121,"column":1,"offset":3909},"end":{"line":121,"column":52,"offset":3960}}}],"position":{"start":{"line":121,"column":1,"offset":3909},"end":{"line":121,"column":52,"offset":3960}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">npm install --save gatsby-source-filesystem@next gatsby-transformer-remark@next gatsby-remark-copy-linked-files@next gatsby-remark-prismjs@next gatsby-remark-responsive-iframe@next gatsby-remark-images@next gatsby-remark-smartypants@next gatsby-plugin-sharp@next</code>","position":{"start":{"line":123,"column":1,"offset":3962},"end":{"line":123,"column":265,"offset":4226}}}],"position":{"start":{"line":123,"column":1,"offset":3962},"end":{"line":123,"column":265,"offset":4226}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Next add them to your ","position":{"start":{"line":125,"column":1,"offset":4228},"end":{"line":125,"column":23,"offset":4250}}},{"type":"raw","value":"<code class=\"language-text\">gatsby-config.js</code>","position":{"start":{"line":125,"column":23,"offset":4250},"end":{"line":125,"column":41,"offset":4268}}},{"type":"text","value":" file. Make your config file look\nsomething like the following:","position":{"start":{"line":125,"column":41,"offset":4268},"end":{"line":126,"column":30,"offset":4331}}}],"position":{"start":{"line":125,"column":1,"offset":4228},"end":{"line":126,"column":30,"offset":4331}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`My Sweet Gatsby Site!`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`pages`</span></span><span class=\"token punctuation\">,</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/pages/`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-images`</span></span><span class=\"token punctuation\">,</span>\n            options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              maxWidth<span class=\"token punctuation\">:</span> <span class=\"token number\">690</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-responsive-iframe`</span></span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-prismjs`</span></span><span class=\"token punctuation\">,</span>\n          <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-copy-linked-files`</span></span><span class=\"token punctuation\">,</span>\n          <span class=\"token template-string\"><span class=\"token string\">`gatsby-remark-smartypants`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-sharp`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":128,"column":1,"offset":4333},"end":{"line":163,"column":4,"offset":5071}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"create-slugs-for-markdown-files"},"children":[{"type":"element","tagName":"a","properties":{"href":"#create-slugs-for-markdown-files","aria-label":"create slugs for markdown files permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Create slugs for markdown files","position":{"start":{"line":165,"column":5,"offset":5077},"end":{"line":165,"column":36,"offset":5108}}}],"position":{"start":{"line":165,"column":1,"offset":5073},"end":{"line":165,"column":36,"offset":5108}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It’s handy to store the pathname or “slug” for each markdown page with the\nmarkdown data. This let’s you query the slug from multiple places.","position":{"start":{"line":167,"column":1,"offset":5110},"end":{"line":168,"column":67,"offset":5251}}}],"position":{"start":{"line":167,"column":1,"offset":5110},"end":{"line":168,"column":67,"offset":5251}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here’s how you do that.","position":{"start":{"line":170,"column":1,"offset":5253},"end":{"line":170,"column":24,"offset":5276}}}],"position":{"start":{"line":170,"column":1,"offset":5253},"end":{"line":170,"column":24,"offset":5276}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-node.js</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> boundActionCreators<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> boundActionCreators\n  <span class=\"token keyword\">let</span> slug\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownRemark`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fileNode <span class=\"token operator\">=</span> <span class=\"token function\">getNode</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> parsedFilePath <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fileNode<span class=\"token punctuation\">.</span>relativePath<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parsedFilePath<span class=\"token punctuation\">.</span>name <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token string\">`index`</span></span> <span class=\"token operator\">&amp;&amp;</span> parsedFilePath<span class=\"token punctuation\">.</span>dir <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token string\">``</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      slug <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>parsedFilePath<span class=\"token punctuation\">.</span>dir<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>parsedFilePath<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/`</span></span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parsedFilePath<span class=\"token punctuation\">.</span>dir <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token string\">``</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      slug <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>parsedFilePath<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/`</span></span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      slug <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>parsedFilePath<span class=\"token punctuation\">.</span>dir<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/`</span></span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Add slug as a field on the node.</span>\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`slug`</span></span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> slug <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":172,"column":1,"offset":5278},"end":{"line":194,"column":4,"offset":6013}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now we can create pages for each markdown file using our slug. In the same\n","position":{"start":{"line":196,"column":1,"offset":6015},"end":{"line":197,"column":1,"offset":6090}}},{"type":"raw","value":"<code class=\"language-text\">gatsby-node.js</code>","position":{"start":{"line":197,"column":1,"offset":6090},"end":{"line":197,"column":17,"offset":6106}}},{"type":"text","value":" file add:","position":{"start":{"line":197,"column":17,"offset":6106},"end":{"line":197,"column":27,"offset":6116}}}],"position":{"start":{"line":196,"column":1,"offset":6015},"end":{"line":197,"column":27,"offset":6116}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> boundActionCreators <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> boundActionCreators\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> pages <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">const</span> blogPost <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"src/templates/blog-post.js\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Query for all markdown \"nodes\" and for the slug we previously created.</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span>\n        <span class=\"token template-string\"><span class=\"token string\">`\n          {\n            allMarkdownRemark {\n              edges {\n                node {\n                  fields {\n                    slug\n                  }\n                }\n              }\n            }\n          }\n        `</span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>result <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span>\n          <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// Create blog posts pages.</span>\n        result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>edge <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            path<span class=\"token punctuation\">:</span> edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span> <span class=\"token comment\">// required</span>\n            component<span class=\"token punctuation\">:</span> blogPost<span class=\"token punctuation\">,</span>\n            context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              slug<span class=\"token punctuation\">:</span> edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":199,"column":1,"offset":6118},"end":{"line":244,"column":4,"offset":7203}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So we’ve now generated the pathname or slug for each markdown page as well as\ntold Gatsby about these pages. You’ll notice above that we reference a blog post\ntemplate file when creating the pages. We haven’t created that yet so let’s do\nit.","position":{"start":{"line":246,"column":1,"offset":7205},"end":{"line":249,"column":4,"offset":7446}}}],"position":{"start":{"line":246,"column":1,"offset":7205},"end":{"line":249,"column":4,"offset":7446}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In your ","position":{"start":{"line":251,"column":1,"offset":7448},"end":{"line":251,"column":9,"offset":7456}}},{"type":"raw","value":"<code class=\"language-text\">src</code>","position":{"start":{"line":251,"column":9,"offset":7456},"end":{"line":251,"column":14,"offset":7461}}},{"type":"text","value":" directory, create a templates directory and add ","position":{"start":{"line":251,"column":14,"offset":7461},"end":{"line":251,"column":63,"offset":7510}}},{"type":"raw","value":"<code class=\"language-text\">blog-post.js</code>","position":{"start":{"line":251,"column":63,"offset":7510},"end":{"line":251,"column":77,"offset":7524}}},{"type":"text","value":".","position":{"start":{"line":251,"column":77,"offset":7524},"end":{"line":251,"column":78,"offset":7525}}}],"position":{"start":{"line":251,"column":1,"offset":7448},"end":{"line":251,"column":78,"offset":7525}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This is a normal React.js component with a special Gatsby twist—a GraphQL query\nspecifying the data needs of the component. As a start, make the component look\nlike the following. You can make it more complex once the basics are working.","position":{"start":{"line":253,"column":1,"offset":7527},"end":{"line":255,"column":78,"offset":7764}}}],"position":{"start":{"line":253,"column":1,"offset":7527},"end":{"line":255,"column":78,"offset":7764}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BlogPostTemplate</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>markdownRemark\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> post<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> BlogPostTemplate\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n  query BlogPostBySlug($slug: String!) {\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      html\n      frontmatter {\n        title\n      }\n    }\n  }\n`</span></span></code></pre></div>","position":{"start":{"line":257,"column":1,"offset":7766},"end":{"line":285,"column":4,"offset":8305}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"At the bottom of the file you’ll notice the graphql query. This is how pages and\ntemplates in Gatsby v1 get their data. In v0, wrapper components had little\ncontrol over what data they got. In v1, templates and pages can query for\nexactly the data they need.","position":{"start":{"line":287,"column":1,"offset":8307},"end":{"line":290,"column":28,"offset":8565}}}],"position":{"start":{"line":287,"column":1,"offset":8307},"end":{"line":290,"column":28,"offset":8565}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"There will be a more in-depth tutorial and GraphQL-specific documentation soon\nbut in the meantime, check out ","position":{"start":{"line":292,"column":1,"offset":8567},"end":{"line":293,"column":32,"offset":8677}}},{"type":"element","tagName":"a","properties":{"href":"http://graphql.org/"},"children":[{"type":"text","value":"http://graphql.org/","position":{"start":{"line":293,"column":32,"offset":8677},"end":{"line":293,"column":51,"offset":8696}}}],"position":{"start":{"line":293,"column":32,"offset":8677},"end":{"line":293,"column":51,"offset":8696}}},{"type":"text","value":" and play around on Gatsby’s\nbuilt-in GraphQL IDE (Graph","position":{"start":{"line":293,"column":51,"offset":8696},"end":{"line":294,"column":28,"offset":8752}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"i","position":{"start":{"line":294,"column":29,"offset":8753},"end":{"line":294,"column":30,"offset":8754}}}],"position":{"start":{"line":294,"column":28,"offset":8752},"end":{"line":294,"column":31,"offset":8755}}},{"type":"text","value":"QL) which can be reached when you start the\ndevelopment server.","position":{"start":{"line":294,"column":31,"offset":8755},"end":{"line":295,"column":20,"offset":8818}}}],"position":{"start":{"line":292,"column":1,"offset":8567},"end":{"line":295,"column":20,"offset":8818}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"At this point you should have working markdown pages when you run ","position":{"start":{"line":297,"column":1,"offset":8820},"end":{"line":297,"column":67,"offset":8886}}},{"type":"raw","value":"<code class=\"language-text\">npm run develop</code>","position":{"start":{"line":297,"column":67,"offset":8886},"end":{"line":297,"column":84,"offset":8903}}},{"type":"text","value":"! Now start gradually adding back what you had in your wrapper component\nadding HTML elements, styles, and extending the GraphQL query as needed.","position":{"start":{"line":297,"column":84,"offset":8903},"end":{"line":298,"column":73,"offset":9048}}}],"position":{"start":{"line":297,"column":1,"offset":8820},"end":{"line":298,"column":73,"offset":9048}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Repeat this process for other wrapper components you were using.","position":{"start":{"line":300,"column":1,"offset":9050},"end":{"line":300,"column":65,"offset":9114}}}],"position":{"start":{"line":300,"column":1,"offset":9050},"end":{"line":300,"column":65,"offset":9114}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"htmljs"},"children":[{"type":"element","tagName":"a","properties":{"href":"#htmljs","aria-label":"htmljs permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"html.js","position":{"start":{"line":302,"column":4,"offset":9119},"end":{"line":302,"column":11,"offset":9126}}}],"position":{"start":{"line":302,"column":1,"offset":9116},"end":{"line":302,"column":11,"offset":9126}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This should generally work the same as in v0 except there are two additional\nprops that must be added to your HTML component. Somewhere in your ","position":{"start":{"line":304,"column":1,"offset":9128},"end":{"line":305,"column":68,"offset":9272}}},{"type":"raw","value":"<code class=\"language-text\">&lt;head&gt;</code>","position":{"start":{"line":305,"column":68,"offset":9272},"end":{"line":305,"column":76,"offset":9280}}},{"type":"text","value":" add\n","position":{"start":{"line":305,"column":76,"offset":9280},"end":{"line":306,"column":1,"offset":9285}}},{"type":"raw","value":"<code class=\"language-text\">{this.props.headComponents}</code>","position":{"start":{"line":306,"column":1,"offset":9285},"end":{"line":306,"column":30,"offset":9314}}},{"type":"text","value":" and somewhere at the end of your body, remove\nloading ","position":{"start":{"line":306,"column":30,"offset":9314},"end":{"line":307,"column":9,"offset":9369}}},{"type":"raw","value":"<code class=\"language-text\">bundle.js</code>","position":{"start":{"line":307,"column":9,"offset":9369},"end":{"line":307,"column":20,"offset":9380}}},{"type":"text","value":" and add ","position":{"start":{"line":307,"column":20,"offset":9380},"end":{"line":307,"column":29,"offset":9389}}},{"type":"raw","value":"<code class=\"language-text\">{this.props.postBodyComponents}</code>","position":{"start":{"line":307,"column":29,"offset":9389},"end":{"line":307,"column":62,"offset":9422}}},{"type":"text","value":".","position":{"start":{"line":307,"column":62,"offset":9422},"end":{"line":307,"column":63,"offset":9423}}}],"position":{"start":{"line":304,"column":1,"offset":9128},"end":{"line":307,"column":63,"offset":9423}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Also the target div now must have an id of ","position":{"start":{"line":309,"column":1,"offset":9425},"end":{"line":309,"column":44,"offset":9468}}},{"type":"raw","value":"<code class=\"language-text\">___gatsby</code>","position":{"start":{"line":309,"column":44,"offset":9468},"end":{"line":309,"column":55,"offset":9479}}},{"type":"text","value":". So the body section of\nyour ","position":{"start":{"line":309,"column":55,"offset":9479},"end":{"line":310,"column":6,"offset":9509}}},{"type":"raw","value":"<code class=\"language-text\">html.js</code>","position":{"start":{"line":310,"column":6,"offset":9509},"end":{"line":310,"column":15,"offset":9518}}},{"type":"text","value":" should look like:","position":{"start":{"line":310,"column":15,"offset":9518},"end":{"line":310,"column":33,"offset":9536}}}],"position":{"start":{"line":309,"column":1,"offset":9425},"end":{"line":310,"column":33,"offset":9536}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>___gatsby<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>body <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>postBodyComponents<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></code></pre></div>","position":{"start":{"line":312,"column":1,"offset":9538},"end":{"line":317,"column":4,"offset":9676}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"_templatejs-is-now-srclayoutsindexjs"},"children":[{"type":"element","tagName":"a","properties":{"href":"#_templatejs-is-now-srclayoutsindexjs","aria-label":"_templatejs is now srclayoutsindexjs permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"_","position":{"start":{"line":319,"column":4,"offset":9681},"end":{"line":319,"column":6,"offset":9683}}},{"type":"text","value":"template.js is now src/layouts/index.js","position":{"start":{"line":319,"column":6,"offset":9683},"end":{"line":319,"column":45,"offset":9722}}}],"position":{"start":{"line":319,"column":1,"offset":9678},"end":{"line":319,"column":45,"offset":9722}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You should be able to copy your ","position":{"start":{"line":321,"column":1,"offset":9724},"end":{"line":321,"column":33,"offset":9756}}},{"type":"raw","value":"<code class=\"language-text\">_template.js</code>","position":{"start":{"line":321,"column":33,"offset":9756},"end":{"line":321,"column":47,"offset":9770}}},{"type":"text","value":" file directly making only one\nchange making ","position":{"start":{"line":321,"column":47,"offset":9770},"end":{"line":322,"column":15,"offset":9815}}},{"type":"raw","value":"<code class=\"language-text\">this.props.children</code>","position":{"start":{"line":322,"column":15,"offset":9815},"end":{"line":322,"column":36,"offset":9836}}},{"type":"text","value":" a function call so ","position":{"start":{"line":322,"column":36,"offset":9836},"end":{"line":322,"column":56,"offset":9856}}},{"type":"raw","value":"<code class=\"language-text\">this.props.children()</code>","position":{"start":{"line":322,"column":56,"offset":9856},"end":{"line":322,"column":79,"offset":9879}}},{"type":"text","value":".\nThe rational for this change is described\n","position":{"start":{"line":322,"column":79,"offset":9879},"end":{"line":324,"column":1,"offset":9923}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/pull/940#issuecomment-300878300"},"children":[{"type":"text","value":"in this PR comment","position":{"start":{"line":324,"column":2,"offset":9924},"end":{"line":324,"column":20,"offset":9942}}}],"position":{"start":{"line":324,"column":1,"offset":9923},"end":{"line":324,"column":89,"offset":10011}}},{"type":"text","value":".","position":{"start":{"line":324,"column":89,"offset":10011},"end":{"line":324,"column":90,"offset":10012}}}],"position":{"start":{"line":321,"column":1,"offset":9724},"end":{"line":324,"column":90,"offset":10012}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nested layouts (similar to the nested ","position":{"start":{"line":326,"column":1,"offset":10014},"end":{"line":326,"column":39,"offset":10052}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"template feature) are \\","position":{"start":{"line":326,"column":40,"offset":10053},"end":{"line":326,"column":63,"offset":10076}}}],"position":{"start":{"line":326,"column":39,"offset":10052},"end":{"line":326,"column":64,"offset":10077}}},{"type":"text","value":"not_ supported yet\nbut are on the roadmap for v1.","position":{"start":{"line":326,"column":64,"offset":10077},"end":{"line":327,"column":31,"offset":10126}}}],"position":{"start":{"line":326,"column":1,"offset":10014},"end":{"line":327,"column":31,"offset":10126}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":328,"column":1,"offset":10127}}}}