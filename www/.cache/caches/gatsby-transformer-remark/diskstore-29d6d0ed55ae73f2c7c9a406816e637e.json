{"expireTime":9007200804686342000,"key":"transformer-remark-markdown-html-3b532c2ef902233df3c4e761c2b03113-gatsby-remark-graphvizgatsby-remark-code-titlesgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<p>Looking for the v1 docs? <a href=\"https://v1.gatsbyjs.org/\">Find them here</a>.</p>\n<blockquote>\n<p>This document is a work in progress. Have you upgraded your site and run into something that‚Äôs not covered here? <a href=\"https://github.com/gatsbyjs/gatsby/edit/master/docs/docs/migrating-from-v1-to-v2.md\">Add your changes on GitHub</a>!</p>\n</blockquote>\n<h2 id=\"introduction\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h2>\n<p>This is a reference for upgrading your site from Gatsby v1 to Gatsby v2. While there‚Äôs a lot covered here, you probably won‚Äôt need to do everything for your site. We‚Äôll do our best to keep things easy to follow, and as sequential as possible so you can quickly get rocking on v2!</p>\n<blockquote>\n<p>If you want to start fresh, check out the <a href=\"#for-explorers\">starting a new project section</a></p>\n</blockquote>\n<h2 id=\"why-you-should-migrate\"><a href=\"#why-you-should-migrate\" aria-label=\"why you should migrate permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why you should migrate</h2>\n<p>This documentation page covers the <em>how</em> of migrating from v1 to v2. The <em>why</em> is covered in various blog posts:</p>\n<ul>\n<li><a href=\"/blog/2018-09-17-gatsby-v2/\">v2 Overview</a> by Kyle Mathews</li>\n<li><a href=\"/blog/2018-09-27-reach-router/\">Improving accessibility</a> by Amberley Romo</li>\n<li><a href=\"/blog/2019-10-03-gatsby-perf/\">Keeping Gatsby sites blazing fast</a> by Dustin Schau</li>\n</ul>\n<h2 id=\"what-well-cover\"><a href=\"#what-well-cover\" aria-label=\"what well cover permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What we‚Äôll cover</h2>\n<ul>\n<li>\n<p><a href=\"#updating-your-dependencies\">Updating Your Dependencies</a></p>\n<ul>\n<li><a href=\"#update-gatsby-version\">Update Gatsby version</a></li>\n<li><a href=\"#manually-install-react\">Manually install React</a></li>\n<li><a href=\"#manually-install-plugins-peer-dependencies\">Manually install plugins‚Äô peer dependencies</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#handling-breaking-changes\">Handling Breaking Changes</a></p>\n<ul>\n<li><a href=\"#remove-or-refactor-layout-components\">Remove or refactor layout components</a></li>\n<li><a href=\"#change-navigateto-to-navigate\">Change <code class=\"language-text\">navigateTo</code> to <code class=\"language-text\">navigate</code></a></li>\n<li><a href=\"#convert-to-either-pure-commonjs-or-pure-es6\">Convert to either pure CommonJS or pure ES6</a></li>\n<li><a href=\"#move-babel-configuration\">Move Babel configuration</a></li>\n<li><a href=\"#restore-v1-postcss-plugin-setup\">Restore v1 PostCSS plugin setup</a></li>\n<li><a href=\"#migrate-from-react-router-to-reachrouter\">Migrate from React Router` to @reach/router</a></li>\n<li><a href=\"#apis-onprerouteupdate-and-onrouteupdate-no-longer-called-with-the-route-update-action\">APIs onPreRouteUpdate and onRouteUpdate no longer called with the route update action</a></li>\n<li><a href=\"#browser-api-replaceroutercomponent-was-removed\">Browser API <code class=\"language-text\">replaceRouterComponent</code> was removed</a></li>\n<li><a href=\"#browser-api-replacehistory-was-removed\">Browser API <code class=\"language-text\">replaceHistory</code> was removed</a></li>\n<li><a href=\"#browser-api-wraprootcomponent-was-replaced-with-wraprootelement\">Browser API <code class=\"language-text\">wrapRootComponent</code> was replaced with <code class=\"language-text\">wrapRootElement</code></a></li>\n<li><a href=\"#dont-query-nodes-by-id\">Don‚Äôt query nodes by ID</a></li>\n<li><a href=\"#use-query-in-place-of-rootquerytype\">Use Query in place of RootQueryType</a></li>\n<li><a href=\"#typographyjs-plugin-config-changes\">Typography.js Plugin Config</a></li>\n<li><a href=\"#update-css-modules-class-names-that-use-dashes\">Update CSS Modules class names that use dashes</a></li>\n<li><a href=\"#update-jest-configuration\">Update Jest configuration</a></li>\n<li><a href=\"#gatsby-images-outerwrapperclassname-was-removed\">gatsby-image‚Äôs <code class=\"language-text\">outerWrapperClassName</code> was removed</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#resolving-deprecations\">Resolving Deprecations</a></p>\n<ul>\n<li><a href=\"#import-link-from-gatsby\">Import Link from Gatsby</a></li>\n<li><a href=\"#import-graphql-from-gatsby\">Import graphql from Gatsby</a></li>\n<li><a href=\"#rename-boundactioncreators-to-actions\">Rename <code class=\"language-text\">boundActionCreators</code> to <code class=\"language-text\">actions</code></a></li>\n<li><a href=\"#rename-pathcontext-to-pagecontext\">Rename <code class=\"language-text\">pathContext</code> to <code class=\"language-text\">pageContext</code></a></li>\n<li><a href=\"#rename-responsive-image-queries\">Rename responsive image queries</a></li>\n<li><a href=\"#delete-nodes-api-deprecated\"><code class=\"language-text\">deleteNodes</code> API deprecated</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#other-changes-worth-noting\">Other Changes Worth Noting</a></p>\n<ul>\n<li><a href=\"#explicit-query-names-no-longer-required\">Explicit query names no longer required</a></li>\n<li><a href=\"#remove-inlined-css-in-htmljs\">Remove inlined CSS in <code class=\"language-text\">html.js</code></a></li>\n<li><a href=\"#remove-explicit-polyfills\">Remove explicit polyfills</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#for-plugin-maintainers\">For Plugin Maintainers</a></p>\n<ul>\n<li><a href=\"#setting-the-proper-peer-dependencies\">Setting the proper Peer Dependencies</a></li>\n<li><a href=\"#change-modifybabelrc-to-oncreatebabelconfig\">Change <code class=\"language-text\">modifyBabelrc</code> to <code class=\"language-text\">onCreateBabelConfig</code></a></li>\n<li><a href=\"#change-modifywebpackconfig-to-oncreatewebpackconfig\">Change <code class=\"language-text\">modifyWebpackConfig</code> to <code class=\"language-text\">onCreateWebpackConfig</code></a></li>\n<li><a href=\"#createremotefilenode\"><code class=\"language-text\">createRemoteFileNode</code> API has changed</a></li>\n<li><a href=\"#only-allow-defined-keys-on-the-node-internal-object\">Only allow defined keys on the <code class=\"language-text\">node.internal</code> object</a></li>\n<li><a href=\"#import-graphql-types-from-gatsbygraphql\">Import <code class=\"language-text\">graphql</code> types from <code class=\"language-text\">gatsby/graphql</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#for-explorers\">For Explorers</a></p>\n<ul>\n<li><a href=\"#starting-a-new-project-with-v2\">V2 from Scratch</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"updating-your-dependencies\"><a href=\"#updating-your-dependencies\" aria-label=\"updating your dependencies permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Updating Your Dependencies</h2>\n<p>The very first thing you will need to do is update your dependencies and install any needed peer dependencies.</p>\n<h3 id=\"update-gatsby-version\"><a href=\"#update-gatsby-version\" aria-label=\"update gatsby version permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Update Gatsby version</h3>\n<p>You need update your <code class=\"language-text\">package.json</code> to use the latest version of Gatsby.</p>\n<div class=\"gatsby-code-title\">package.json</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"gatsby\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Or run</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> i gatsby@latest</code></pre></div>\n<h3 id=\"update-gatsby-related-packages\"><a href=\"#update-gatsby-related-packages\" aria-label=\"update gatsby related packages permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Update Gatsby related packages</h3>\n<p>Update your <code class=\"language-text\">package.json</code> to use the latest versions of Gatsby related packages. Any package name that starts with <code class=\"language-text\">gatsby-</code> should be upgraded. Note, this only applies to plugins managed in the gatsbyjs/gatsby repo. If you‚Äôre using community plugins, they might not be upgraded yet. Check their repo for the status. Many plugins won‚Äôt actually need upgrading so they very well might keep working. You can run</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> outdated</code></pre></div>\n<p>And compare ‚ÄúWanted‚Äù and ‚ÄúLatest‚Äù versions and update <code class=\"language-text\">package.json</code> file manually or run</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> i gatsby-plugin-google-analytics@latest gatsby-plugin-netlify@latest gatsby-plugin-sass@latest</code></pre></div>\n<p><strong>NOTE</strong>: Above command is just an example - adjust packages to ones you are actually using.</p>\n<h3 id=\"manually-install-react\"><a href=\"#manually-install-react\" aria-label=\"manually install react permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Manually install React</h3>\n<p>In v1, the <code class=\"language-text\">react</code> and <code class=\"language-text\">react-dom</code> packages were included as part of the <code class=\"language-text\">gatsby</code> package. They are now <code class=\"language-text\">peerDependencies</code> so you are required to install them into your project.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> i react react-dom</code></pre></div>\n<h3 id=\"manually-install-plugins-peer-dependencies\"><a href=\"#manually-install-plugins-peer-dependencies\" aria-label=\"manually install plugins peer dependencies permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Manually install plugins‚Äô peer dependencies</h3>\n<p>Some plugins had dependencies that were also made <code class=\"language-text\">peerDependencies</code>. For example, if you use <a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-typography/\"><code class=\"language-text\">gatsby-plugin-typography</code></a>, you now need to install:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> i typography react-typography</code></pre></div>\n<p>Search for the plugins that you use in the <a href=\"/plugins\">plugin library</a> and check their installation instructions for additional packages that now need installed.</p>\n<h2 id=\"handling-breaking-changes\"><a href=\"#handling-breaking-changes\" aria-label=\"handling breaking changes permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Handling Breaking Changes</h2>\n<h3 id=\"remove-or-refactor-layout-components\"><a href=\"#remove-or-refactor-layout-components\" aria-label=\"remove or refactor layout components permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Remove or refactor layout components</h3>\n<p>In Gatsby v2, the special layout component (<code class=\"language-text\">src/layouts/index.js</code>) that wrapped every page in Gatsby v1 has been removed. The ‚Äútop level component‚Äù is now just the page itself. If the layout of your site looks broken, this is likely the reason why.</p>\n<p>There are a number of implications to this change:</p>\n<ul>\n<li>\n<p>To render different layouts for different pages, just use the standard React inheritance model. Gatsby no longer maintains, or needs to maintain, separate behavior for handling layouts.</p>\n</li>\n<li>\n<p>Because the ‚Äútop level component‚Äù changes between each page, React will rerender all children. This means that shared components previously in a Gatsby v1 layout‚Äî like navigations‚Äî will unmount and remount. This will break CSS transitions or React state within those shared components. If your use case requires layout component to not unmount use <a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-layout/\"><code class=\"language-text\">gatsby-plugin-layout</code></a>.</p>\n</li>\n<li>\n<p>To learn more about the original decisions behind this removal, read the <a href=\"https://github.com/gatsbyjs/rfcs/blob/master/text/0002-remove-special-layout-components.md\">RFC for removing the special layout component</a>.</p>\n</li>\n</ul>\n<p>The following migration path is recommended:</p>\n<h4 id=\"1-convert-the-layouts-children-from-a-render-prop-to-a-normal-prop-required\"><a href=\"#1-convert-the-layouts-children-from-a-render-prop-to-a-normal-prop-required\" aria-label=\"1 convert the layouts children from a render prop to a normal prop required permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Convert the layout‚Äôs children from a render prop to a normal prop (required)</h4>\n<p>In v1, the <code class=\"language-text\">children</code> prop passed to layout was a function (render prop) and needed to be executed. In v2, this is no longer the case.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">import React from \"react\"\n\nexport default ({ children }) => (\n  &lt;div>\n<span class=\"token deleted\">-    {children()}</span>\n<span class=\"token inserted\">+    {children}</span>\n  &lt;/div>\n)</code></pre></div>\n<h4 id=\"2-move-layoutsindexjs-to-srccomponentslayoutjs-optional-but-recommended\"><a href=\"#2-move-layoutsindexjs-to-srccomponentslayoutjs-optional-but-recommended\" aria-label=\"2 move layoutsindexjs to srccomponentslayoutjs optional but recommended permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Move <code class=\"language-text\">layouts/index.js</code> to <code class=\"language-text\">src/components/layout.js</code> (optional, but recommended)</h4>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> <span class=\"token function\">mv</span> src/layouts/index.js src/components/layout.js</code></pre></div>\n<h4 id=\"3-import-and-wrap-pages-with-the-layout-component\"><a href=\"#3-import-and-wrap-pages-with-the-layout-component\" aria-label=\"3 import and wrap pages with the layout component permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Import and wrap pages with the layout component</h4>\n<p>Adhering to the normal React composition model, import your layout component and use it to wrap the content of the page.</p>\n<div class=\"gatsby-code-title\">src/pages/index.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Layout</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello World</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Layout</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Repeat for every page and template that needs this layout.</p>\n<h4 id=\"4-pass-history-location-and-match-props-to-layout\"><a href=\"#4-pass-history-location-and-match-props-to-layout\" aria-label=\"4 pass history location and match props to layout permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Pass <code class=\"language-text\">history</code>, <code class=\"language-text\">location</code>, and <code class=\"language-text\">match</code> props to layout</h4>\n<p>In v1, the layout component had access to <code class=\"language-text\">history</code>, <code class=\"language-text\">location</code>, and <code class=\"language-text\">match</code> props. In v2, only pages have access to these props; if you need these props in the layout component, pass them through from the page.</p>\n<div class=\"gatsby-code-title\">src/components/layout.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children<span class=\"token punctuation\">,</span> location <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Path is </span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">.</span>pathname<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-code-title\">src/pages/index.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> props <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Layout</span> <span class=\"token attr-name\">location</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello World</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Layout</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"5-change-query-to-use-staticquery\"><a href=\"#5-change-query-to-use-staticquery\" aria-label=\"5 change query to use staticquery permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Change query to use <code class=\"language-text\">StaticQuery</code></h4>\n<p>If you were using the <code class=\"language-text\">data</code> prop in your Gatsby v1 layout, you now need to make use of Gatsby v2‚Äôs <a href=\"/docs/static-query/\">StaticQuery feature</a>, since a layout is now a normal component.</p>\n<p>Replacing a layout‚Äôs query with <code class=\"language-text\">StaticQuery</code>:</p>\n<div class=\"gatsby-code-title\">src/components/layout.js</div>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">import React, { Fragment } from \"react\"\nimport { Helmet } from \"react-helmet\"\n<span class=\"token inserted\">+ import { StaticQuery, graphql } from \"gatsby\"</span>\n\n<span class=\"token deleted\">- export default ({ children, data }) => (</span>\n<span class=\"token deleted\">-   &lt;></span>\n<span class=\"token deleted\">-     &lt;Helmet titleTemplate={`%s | ${data.site.siteMetadata.title}`} defaultTitle={data.site.siteMetadata.title} /></span>\n<span class=\"token deleted\">-     &lt;div></span>\n<span class=\"token deleted\">-       {children()}</span>\n<span class=\"token deleted\">-     &lt;/div></span>\n<span class=\"token deleted\">-   &lt;/></span>\n<span class=\"token deleted\">- )</span>\n<span class=\"token deleted\">-</span>\n<span class=\"token deleted\">- export const query = graphql`</span>\n<span class=\"token deleted\">-   query LayoutQuery {</span>\n<span class=\"token deleted\">-     site {</span>\n<span class=\"token deleted\">-       siteMetadata {</span>\n<span class=\"token deleted\">-         title</span>\n<span class=\"token deleted\">-       }</span>\n<span class=\"token deleted\">-     }</span>\n<span class=\"token deleted\">-   }</span>\n<span class=\"token deleted\">- `</span>\n<span class=\"token inserted\">+ export default ({ children }) => (</span>\n<span class=\"token inserted\">+   &lt;StaticQuery</span>\n<span class=\"token inserted\">+     query={graphql`</span>\n<span class=\"token inserted\">+       query LayoutQuery {</span>\n<span class=\"token inserted\">+         site {</span>\n<span class=\"token inserted\">+           siteMetadata {</span>\n<span class=\"token inserted\">+             title</span>\n<span class=\"token inserted\">+           }</span>\n<span class=\"token inserted\">+         }</span>\n<span class=\"token inserted\">+       }</span>\n<span class=\"token inserted\">+     `}</span>\n<span class=\"token inserted\">+     render={data => (</span>\n<span class=\"token inserted\">+       &lt;></span>\n<span class=\"token inserted\">+         &lt;Helmet titleTemplate={`%s | ${data.site.siteMetadata.title}`} defaultTitle={data.site.siteMetadata.title} /></span>\n<span class=\"token inserted\">+         &lt;div></span>\n<span class=\"token inserted\">+           {children}</span>\n<span class=\"token inserted\">+         &lt;/div></span>\n<span class=\"token inserted\">+       &lt;/></span>\n<span class=\"token inserted\">+     )}</span>\n<span class=\"token inserted\">+   /></span>\n<span class=\"token inserted\">+ )</span></code></pre></div>\n<h3 id=\"change-navigateto-to-navigate\"><a href=\"#change-navigateto-to-navigate\" aria-label=\"change navigateto to navigate permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change <code class=\"language-text\">navigateTo</code> to <code class=\"language-text\">navigate</code></h3>\n<p>The <code class=\"language-text\">navigateTo</code> method in <code class=\"language-text\">gatsby-link</code> was renamed to <code class=\"language-text\">navigate</code> to mirror\nthe <a href=\"https://reach.tech/router/api/navigate\">API used by @reach/router</a>.</p>\n<p>In addition to the name change, <code class=\"language-text\">gatsby-link</code> is now directly exported from the <code class=\"language-text\">gatsby</code> package and can‚Äôt be installed directly.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">import React from \"react\"\n<span class=\"token deleted\">- import { navigateTo } from \"gatsby-link\"</span>\n<span class=\"token inserted\">+ import { navigate } from \"gatsby\"</span>\n\n// Don't use navigate with an onClick btw :-)\n// Generally just use the `&lt;Link>` component.\nexport default props => (\n<span class=\"token deleted\">-  &lt;div onClick={() => navigateTo(`/`)}>Click to go to home&lt;/div></span>\n<span class=\"token inserted\">+  &lt;div onClick={() => navigate(`/`)}>Click to go to home&lt;/div></span>\n)</code></pre></div>\n<h3 id=\"convert-to-either-pure-commonjs-or-pure-es6\"><a href=\"#convert-to-either-pure-commonjs-or-pure-es6\" aria-label=\"convert to either pure commonjs or pure es6 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Convert to either pure CommonJS or pure ES6</h3>\n<p>Gatsby v2 uses webpack 4 which is stricter about modules with mixed module systems.</p>\n<p>All ES6 is üëç:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// GOOD: ES modules syntax works</span>\n<span class=\"token keyword\">import</span> foo <span class=\"token keyword\">from</span> <span class=\"token string\">\"foo\"</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> foo</code></pre></div>\n<p>All CommonJS is üëå:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// GOOD: CommonJS syntax works</span>\n<span class=\"token keyword\">const</span> foo <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">)</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> foo</code></pre></div>\n<p>Mixing <code class=\"language-text\">requires</code> and <code class=\"language-text\">export</code> is üôÄ:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// BAD: Mixed ES and CommonJS module syntax will cause failures</span>\n<span class=\"token keyword\">const</span> foo <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> foo</code></pre></div>\n<p>Mixing <code class=\"language-text\">import</code> and <code class=\"language-text\">module.exports</code> ü§™:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// BAD: Mixed ES and CommonJS module syntax will cause failures</span>\n<span class=\"token keyword\">import</span> foo <span class=\"token keyword\">from</span> <span class=\"token string\">\"foo\"</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> foo</code></pre></div>\n<h3 id=\"move-babel-configuration\"><a href=\"#move-babel-configuration\" aria-label=\"move babel configuration permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Move Babel Configuration</h3>\n<p>The latest version of Gatsby uses Babel 7, which introduced <a href=\"https://github.com/babel/babel/issues/6766\">a new behavior for configuration lookup / resolution</a>. In the case where a <em>.babelrc</em> file might have been used at the root of the project, like for configuring Jest, moving that Babel configuration into <em>jest.config.json</em> will avoid any conflicts.</p>\n<p><a href=\"https://github.com/facebook/jest/issues/1468#issuecomment-361260279\">This GitHub comment</a> documents the steps needed to do that.</p>\n<p>More information on Gatsby and Babel configuration available <a href=\"/docs/babel/#how-to-use-a-custom-babelrc-file\">here</a>.</p>\n<h3 id=\"restore-v1-postcss-plugin-setup\"><a href=\"#restore-v1-postcss-plugin-setup\" aria-label=\"restore v1 postcss plugin setup permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Restore v1 PostCSS Plugin Setup</h3>\n<p>Gatsby v2 removed <code class=\"language-text\">postcss-cssnext</code> and <code class=\"language-text\">postcss-import</code> from the default PostCSS setup.</p>\n<p>To have the same configuration that you had in v1 (if you were using these plugins), you should use <a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-postcss\"><code class=\"language-text\">gatsby-plugin-postcss</code></a> and follow the recommended migration path below.</p>\n<h4 id=\"1-install-the-dependencies\"><a href=\"#1-install-the-dependencies\" aria-label=\"1 install the dependencies permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Install the dependencies</h4>\n<p><code class=\"language-text\">npm install --save gatsby-plugin-postcss postcss-import postcss-cssnext postcss-browser-reporter postcss-reporter</code></p>\n<p><strong>NOTE</strong>: <code class=\"language-text\">postcss-cssnext</code> is <a href=\"https://moox.io/blog/deprecating-cssnext/\">deprecated</a> and it is better to use <code class=\"language-text\">postcss-preset-env</code> now.</p>\n<h4 id=\"2-include-gatsby-plugin-postcss-in-your-gatsby-configjs-file\"><a href=\"#2-include-gatsby-plugin-postcss-in-your-gatsby-configjs-file\" aria-label=\"2 include gatsby plugin postcss in your gatsby configjs file permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Include <code class=\"language-text\">gatsby-plugin-postcss</code> in your <code class=\"language-text\">gatsby-config.js</code> file</h4>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-postcss`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h4 id=\"3-include-postcss-plugins-in-your-postcssconfigjs-file\"><a href=\"#3-include-postcss-plugins-in-your-postcssconfigjs-file\" aria-label=\"3 include postcss plugins in your postcssconfigjs file permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Include PostCSS plugins in your <code class=\"language-text\">postcss.config.js</code> file</h4>\n<div class=\"gatsby-code-title\">postcss.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> postcssImport <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`postcss-import`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> postcssCssNext <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`postcss-cssnext`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> postcssBrowserReporter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`postcss-browser-reporter`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> postcssReporter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`postcss-reporter`</span></span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">postcssImport</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">postcssCssNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">postcssBrowserReporter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">postcssReporter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"migrate-from-react-router-to-reachrouter\"><a href=\"#migrate-from-react-router-to-reachrouter\" aria-label=\"migrate from react router to reachrouter permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Migrate from React Router to @reach/router</h3>\n<p>We switched our router from <a href=\"https://reacttraining.com/react-router/\">React Router v4</a> to <a href=\"https://reach.tech/router\">@reach/router</a> as @reach/router is smaller and most importantly, has 1st class support\nfor accessibility.</p>\n<p>@reach/router is written by <a href=\"https://twitter.com/ryanflorence\">Ryan Florence</a>, who was also the founder of React Router. He says @reach/router restores\nthings he misses from React Router v3 while retaining the best parts of React Router v4 <em>and</em> adds full accessibility support.</p>\n<p>For <em>most</em> sites, this change won‚Äôt cause any breaking changes as the two routers are quite similar.</p>\n<p>Two common ways this change <em>might</em> break your site is:</p>\n<ul>\n<li>You use the object form of the <code class=\"language-text\">to</code> prop in the <code class=\"language-text\">&lt;Link&gt;</code> component</li>\n<li>You have client side routes</li>\n</ul>\n<p>Read more about the features of our new router at <a href=\"https://reach.tech/router\">https://reach.tech/router</a></p>\n<p><strong>NOTE:</strong> One prominent feature of @reach/router, relative routes, isn‚Äôt working currently in Gatsby. We‚Äôre working with Ryan Florence\non fixing that so hopefully it‚Äôll be supported soon.</p>\n<p>Read on for instructions on migrating your site to @reach/router.</p>\n<h4 id=\"only-string-to-allowed\"><a href=\"#only-string-to-allowed\" aria-label=\"only string to allowed permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Only string <code class=\"language-text\">to</code> allowed</h4>\n<p>React Router allowed you to pass objects to the <code class=\"language-text\">to</code> prop e.g.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Link</span>\n  <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> pathname<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`/about/`</span></span><span class=\"token punctuation\">,</span> search<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`fun=true&amp;pizza=false`</span></span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`people`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  Our people\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Link</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>React Router would then simply concatenate the object values together into the full pathname e.g. <code class=\"language-text\">/about/?fun=true&amp;pizza=false#people</code>.</p>\n<p>Now you‚Äôll need to concatenate together the full pathname yourself.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted\">- &lt;Link to={{ pathname: `/about/`, search: `fun=true&amp;pizza=false`, hash: `people`}}>Our people&lt;/Link></span>\n<span class=\"token inserted\">+ &lt;Link to={`/about/?fun=true&amp;pizza=false#people`}>Our people&lt;/Link></span></code></pre></div>\n<h4 id=\"pass-state-to-the-state-prop\"><a href=\"#pass-state-to-the-state-prop\" aria-label=\"pass state to the state prop permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pass state to the <code class=\"language-text\">state</code> prop</h4>\n<p>Previously with React Router to pass state to a link, you would pass it as part of a <code class=\"language-text\">to</code> object prop.</p>\n<p>Now, to add state to a link, pass it via a <code class=\"language-text\">state</code> prop.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">NewsFeed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Link</span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>photos/123<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">state</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> fromFeed<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Photo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> location<span class=\"token punctuation\">,</span> photoId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>location<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>fromFeed<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FromFeedPhoto</span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>photoId<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Photo</span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>photoId<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"a-history-prop-is-no-longer-passed-to-page-components\"><a href=\"#a-history-prop-is-no-longer-passed-to-page-components\" aria-label=\"a history prop is no longer passed to page components permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A <code class=\"language-text\">history</code> prop is no longer passed to page components</h4>\n<p>React Router would pass a <code class=\"language-text\">history</code> prop to components that you could use to navigate.</p>\n<p>If you need to do programmatic navigation, import instead the @reach/router‚Äôs <code class=\"language-text\">navigate</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> navigate <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@reach/router\"</span></code></pre></div>\n<h4 id=\"the-following-props-are-no-longer-available-on-link\"><a href=\"#the-following-props-are-no-longer-available-on-link\" aria-label=\"the following props are no longer available on link permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The following props are no longer available on <code class=\"language-text\">&lt;Link&gt;</code></h4>\n<ul>\n<li><code class=\"language-text\">exact</code></li>\n<li><code class=\"language-text\">strict</code></li>\n<li><code class=\"language-text\">location</code></li>\n</ul>\n<p><code class=\"language-text\">exact</code> and <code class=\"language-text\">strict</code> are no longer necessary as @reach/router does matching\nthis way by default.</p>\n<p>You could pass <code class=\"language-text\">location</code> previously to manually compute whether the\nlink is active or not. For advanced link stylings, use <code class=\"language-text\">getProps</code> now.</p>\n<h4 id=\"use-getprops-for-advanced-link-styling\"><a href=\"#use-getprops-for-advanced-link-styling\" aria-label=\"use getprops for advanced link styling permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use <code class=\"language-text\">getProps</code> for advanced link styling</h4>\n<p>Gatsby‚Äôs <code class=\"language-text\">&lt;Link&gt;</code> component supports out-of-the-box <code class=\"language-text\">activeClassName</code> and <code class=\"language-text\">activeStyle</code>.</p>\n<p>If you have more advanced styling needs, <a href=\"https://reach.tech/router/api/Link\">use the <code class=\"language-text\">getProps</code> prop</a>.</p>\n<h4 id=\"change-client-paths-to-use-a-splat\"><a href=\"#change-client-paths-to-use-a-splat\" aria-label=\"change client paths to use a splat permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change client paths to use a splat</h4>\n<p>When creating a client route in <code class=\"language-text\">gatsby-node.js</code>, use a <code class=\"language-text\">*</code> to select all child routes instead of <code class=\"language-text\">:path</code>.</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">exports.onCreatePage = async ({ page, actions }) => {\n  const { createPage } = actions\n\n  // page.matchPath is a special key that's used for matching pages\n  // only on the client.\n  if (page.path.match(/^\\/app/)) {\n<span class=\"token deleted\">-    page.matchPath = \"/app/:path\"</span>\n<span class=\"token inserted\">+    page.matchPath = \"/app/*\"</span>\n\n    // Update the page.\n    createPage(page)\n  }\n}</code></pre></div>\n<h4 id=\"migrating-react-router-client-routes-to-reachrouter\"><a href=\"#migrating-react-router-client-routes-to-reachrouter\" aria-label=\"migrating react router client routes to reachrouter permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Migrating React Router client routes to @reach/router</h4>\n<ul>\n<li>Use <code class=\"language-text\">&lt;Location&gt;</code> instead of <code class=\"language-text\">withRouter</code></li>\n<li>import <code class=\"language-text\">{ navigate }</code> from <code class=\"language-text\">@reach/router</code> for programmatic navigation instead of the history object</li>\n<li>There‚Äôs no <code class=\"language-text\">Route</code> component any more. You add a <code class=\"language-text\">&lt;Router&gt;</code> component (a site can have as many routers as it wishes) and then the immediate children of <code class=\"language-text\">&lt;Router&gt;</code> must have a prop named <code class=\"language-text\">path</code>.</li>\n</ul>\n<p>A basic example of the <code class=\"language-text\">&lt;Router&gt;</code> component:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@reach/router\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Router</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">I am the home!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/about<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Here's a bit about me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/store<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Buy my t-shirts!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Router</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Here‚Äôs a more complex example of migrating a <code class=\"language-text\">&lt;PrivateRoute&gt;</code> component (used\nin store.gatsbyjs.org) from React Router to @reach/router.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"> import React from 'react';\n<span class=\"token deleted\">-import { Redirect, Route } from 'react-router-dom';</span>\n<span class=\"token inserted\">+import { Router, navigate } from '@reach/router';</span>\n import { isAuthenticated } from '../../utils/auth';\n\n<span class=\"token deleted\">-export default ({ component: Component, ...rest }) => (</span>\n<span class=\"token deleted\">-  &lt;Route</span>\n<span class=\"token deleted\">-    {...rest}</span>\n<span class=\"token deleted\">-    render={props =></span>\n<span class=\"token deleted\">-      !isAuthenticated() ? (</span>\n<span class=\"token deleted\">-        // If we‚Äôre not logged in, redirect to the home page.</span>\n<span class=\"token deleted\">-        &lt;Redirect to={{ pathname: '/login' }} /></span>\n<span class=\"token deleted\">-      ) : (</span>\n<span class=\"token deleted\">-        &lt;Component {...props} /></span>\n<span class=\"token deleted\">-      )</span>\n<span class=\"token deleted\">-    }</span>\n<span class=\"token deleted\">-  /></span>\n<span class=\"token deleted\">-);</span>\n<span class=\"token inserted\">+export default ({ component: Component, ...rest }) => {</span>\n<span class=\"token inserted\">+  if (!isAuthenticated() &amp;&amp; window.location.pathname !== `/login`) {</span>\n<span class=\"token inserted\">+    // If we‚Äôre not logged in, redirect to the home page.</span>\n<span class=\"token inserted\">+    navigate(`/app/login`);</span>\n<span class=\"token inserted\">+    return null;</span>\n<span class=\"token inserted\">+  }</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+  return (</span>\n<span class=\"token inserted\">+    &lt;Router></span>\n<span class=\"token inserted\">+      &lt;Component {...rest} /></span>\n<span class=\"token inserted\">+    &lt;/Router></span>\n<span class=\"token inserted\">+  );</span>\n<span class=\"token inserted\">+};</span></code></pre></div>\n<p>Here‚Äôs links to diffs for three sites with client routes that were upgraded to @reach/router</p>\n<ul>\n<li><a href=\"https://github.com/gatsbyjs/store.gatsbyjs.org/pull/111\">store.gatsbyjs.org</a></li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/pull/6918/files#diff-69757e54875e28ef83eb8efe45a33fdf\">client-only-routes</a></li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/pull/6918/files#diff-53ac112a4b2ec760b26a86c953df2339\">simple-auth</a></li>\n</ul>\n<h3 id=\"apis-onprerouteupdate-and-onrouteupdate-no-longer-called-with-the-route-update-action\"><a href=\"#apis-onprerouteupdate-and-onrouteupdate-no-longer-called-with-the-route-update-action\" aria-label=\"apis onprerouteupdate and onrouteupdate no longer called with the route update action permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>APIs <code class=\"language-text\">onPreRouteUpdate</code> and <code class=\"language-text\">onRouteUpdate</code> no longer called with the route update action</h3>\n<p>React Router v4 would tell us the ‚Äúaction‚Äù (push/replace) that triggered the route\ntransition. We passed this as one of the arguments along with <code class=\"language-text\">location</code> to plugins. @reach/router doesn‚Äôt support this so we‚Äôve removed it from the API calls.</p>\n<h3 id=\"browser-api-replaceroutercomponent-was-removed\"><a href=\"#browser-api-replaceroutercomponent-was-removed\" aria-label=\"browser api replaceroutercomponent was removed permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Browser API <code class=\"language-text\">replaceRouterComponent</code> was removed</h3>\n<p>React Router allowed you to swap out its history object. To enable this in Gatsby, an API, <code class=\"language-text\">replaceRouterComponent</code> was added so that you could use a custom version of history or React Router. As @reach/router doesn‚Äôt support this, we‚Äôve removed this API.</p>\n<p>We did, erroneously, suggest using this API for adding support for Redux, etc. where you need to wrap the root Gatsby component with your own component.</p>\n<p>If you were using <code class=\"language-text\">replaceRouterComponent</code> for this, you‚Äôll need to migrate to\n<code class=\"language-text\">wrapRootElement</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">import React from 'react'\nimport { Provider } from 'react-redux'\n<span class=\"token deleted\">-import { Router } from 'react-router-dom'</span>\n\n<span class=\"token deleted\">-export const replaceRouterComponent = ({ history }) => {</span>\n<span class=\"token inserted\">+export const wrapRootElement = ({ element }) => {</span>\n<span class=\"token deleted\">-  const ConnectedRouterWrapper = ({ children }) => (</span>\n<span class=\"token inserted\">+  const ConnectedRootElement = (</span>\n    &lt;Provider store={store}>\n<span class=\"token deleted\">-      &lt;Router history={history}>{children}&lt;/Router></span>\n<span class=\"token inserted\">+      {element}</span>\n    &lt;/Provider>\n  )\n\n<span class=\"token deleted\">-  return ConnectedRouterWrapper</span>\n<span class=\"token inserted\">+  return ConnectedRootElement</span>\n}</code></pre></div>\n<h3 id=\"browser-api-replacehistory-was-removed\"><a href=\"#browser-api-replacehistory-was-removed\" aria-label=\"browser api replacehistory was removed permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Browser API <code class=\"language-text\">replaceHistory</code> was removed</h3>\n<p>Similar to <code class=\"language-text\">replaceRouterComponent</code>, we no longer support custom histories so this was removed.\nThe <code class=\"language-text\">replaceHistory()</code> method could be used for tracking page views as it is possible to register listeners on route changes using <code class=\"language-text\">history.listen()</code>.</p>\n<p>In order to track page views, you can use the <a href=\"/docs/browser-apis/#onRouteUpdate\"><code class=\"language-text\">onRouteUpdate</code></a> API to track pages changes.</p>\n<h3 id=\"browser-api-wraprootcomponent-was-replaced-with-wraprootelement\"><a href=\"#browser-api-wraprootcomponent-was-replaced-with-wraprootelement\" aria-label=\"browser api wraprootcomponent was replaced with wraprootelement permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Browser API <code class=\"language-text\">wrapRootComponent</code> was replaced with <code class=\"language-text\">wrapRootElement</code></h3>\n<p>Use new <a href=\"/docs/browser-apis/#wrapRootComponent\"><code class=\"language-text\">wrapRootElement</code></a> API:\nWe now pass <code class=\"language-text\">component</code> Element instead of <code class=\"language-text\">Root</code> Component and expect that <code class=\"language-text\">wrapRootElement</code> will return Element and not Component. This change was needed to keep all wrapping APIs uniform.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted\">-export const wrapRootComponent = ({ Root }) => {</span>\n<span class=\"token inserted\">+export const wrapRootElement = ({ element }) => {</span>\n<span class=\"token deleted\">-  const ConnectedRootComponent = () => (</span>\n<span class=\"token inserted\">+  const ConnectedRootElement = (</span>\n    &lt;Provider store={store}>\n<span class=\"token deleted\">-      &lt;Root /></span>\n<span class=\"token inserted\">+      {element}</span>\n    &lt;/Provider>\n  )\n<span class=\"token deleted\">-  return ConnectedRootComponent</span>\n<span class=\"token inserted\">+  return ConnectedRootElement</span>\n}</code></pre></div>\n<h3 id=\"dont-query-nodes-by-id\"><a href=\"#dont-query-nodes-by-id\" aria-label=\"dont query nodes by id permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Don‚Äôt query nodes by ID</h3>\n<p>Source and transformer plugins now use UUIDs for IDs. If you used glob or regex to query nodes by id then you‚Äôll need to query something else.</p>\n<p>Here‚Äôs an example querying an image:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">  query MyImageQuery {\n    allImageSharp(filter: {\n<span class=\"token deleted\">-     id: {regex: \"/default.jpg/\"}</span>\n<span class=\"token inserted\">+     fluid: {originalName: {regex: \"/default.jpg/\"}}</span>\n    }) {\n      edges {\n        node {\n          id\n          fluid(maxWidth: 660) {\n            src\n          }\n        }\n      }\n    }\n  }</code></pre></div>\n<p><a href=\"https://github.com/gatsbyjs/gatsby/pull/3807/files\">See the Pull Request that implemented this change</a></p>\n<h3 id=\"use-query-in-place-of-rootquerytype\"><a href=\"#use-query-in-place-of-rootquerytype\" aria-label=\"use query in place of rootquerytype permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use <code class=\"language-text\">Query</code> in place of <code class=\"language-text\">RootQueryType</code></h3>\n<p>The GraphQL root type has been changed from <code class=\"language-text\">RootQueryType</code> to <code class=\"language-text\">Query</code>. This is only likely to impact you if you have top-level fragments in your GraphQL queries:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">  query Blog {\n    ...Sidebar\n    blogPosts {\n      title\n      slug\n    }\n  }\n\n<span class=\"token deleted\">- fragment Sidebar on RootQueryType {</span>\n<span class=\"token inserted\">+ fragment Sidebar on Query {</span>\n    siteDescription\n  }\n}</code></pre></div>\n<h3 id=\"typographyjs-plugin-config-changes\"><a href=\"#typographyjs-plugin-config-changes\" aria-label=\"typographyjs plugin config changes permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Typography.js Plugin Config Changes</h3>\n<p>If you use <a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-typography/\"><code class=\"language-text\">gatsby-plugin-typography</code></a>, you now need to explicitly export <code class=\"language-text\">scale</code> and <code class=\"language-text\">rhythm</code> as named exports from your typography config module.</p>\n<div class=\"gatsby-code-title\">src/utils/typography.js</div>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted\">- const typography = new Typography();</span>\n<span class=\"token deleted\">- export default typography;</span>\n\n<span class=\"token inserted\">+ const typography = new Typography();</span>\n<span class=\"token inserted\">+ const { rhythm, scale } = typography;</span>\n<span class=\"token inserted\">+ export { rhythm, scale, typography as default };</span></code></pre></div>\n<h3 id=\"update-css-modules-class-names-that-use-dashes\"><a href=\"#update-css-modules-class-names-that-use-dashes\" aria-label=\"update css modules class names that use dashes permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Update CSS Modules class names that use dashes</h3>\n<p>If you use CSS Modules and have class names with dashes in them, you‚Äôll need to change how you access the class names from JavaScript.</p>\n<p>This is because the <a href=\"https://github.com/webpack-contrib/css-loader#camelcase\"><code class=\"language-text\">camelCase</code> option</a> for CSS Modules has been changed from <code class=\"language-text\">false</code> to <code class=\"language-text\">dashesOnly</code>.</p>\n<p>Here‚Äôs an example with a class named <code class=\"language-text\">.my-class-name</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">import React from \"react\"\nimport myStyles from \"./my.module.css\"\n\nexport default ({ children }) => (\n<span class=\"token deleted\">-  &lt;div className={myStyles['my-class-name']}></span>\n<span class=\"token inserted\">+  &lt;div className={myStyles.myClassName}></span>\n    {children}\n  &lt;/div>\n)</code></pre></div>\n<p>The Gatsby v1 behavior can be restored by adjusting <a href=\"https://github.com/webpack-contrib/css-loader#options\">CSS Loader options</a>.</p>\n<p>For vanilla CSS without a preprocessor:</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> cssLoaderRe <span class=\"token operator\">=</span> <span class=\"token regex\">/\\/css-loader\\//</span>\n<span class=\"token keyword\">const</span> targetFile <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`.module.css`</span></span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">processRule</span> <span class=\"token operator\">=</span> rule <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rule<span class=\"token punctuation\">.</span>oneOf<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>rule<span class=\"token punctuation\">,</span>\n      oneOf<span class=\"token punctuation\">:</span> rule<span class=\"token punctuation\">.</span>oneOf<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>processRule<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>rule<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>targetFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> rule\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>rule<span class=\"token punctuation\">.</span>use<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>rule<span class=\"token punctuation\">,</span>\n      use<span class=\"token punctuation\">:</span> rule<span class=\"token punctuation\">.</span>use<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>use <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>cssLoaderRe<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>use<span class=\"token punctuation\">.</span>loader<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> use\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// adjust css-loader options</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token operator\">...</span>use<span class=\"token punctuation\">,</span>\n          options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token operator\">...</span>use<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">,</span>\n            camelCase<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> rule\n<span class=\"token punctuation\">}</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateWebpackConfig</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> getConfig<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> newConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>config<span class=\"token punctuation\">,</span>\n    module<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>config<span class=\"token punctuation\">.</span>module<span class=\"token punctuation\">,</span>\n      rules<span class=\"token punctuation\">:</span> config<span class=\"token punctuation\">.</span>module<span class=\"token punctuation\">.</span>rules<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>processRule<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n  actions<span class=\"token punctuation\">.</span><span class=\"token function\">replaceWebpackConfig</span><span class=\"token punctuation\">(</span>newConfig<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If you‚Äôre using a preprocessor, you can pass in CSS Loader options when configuring <a href=\"/packages/gatsby-plugin-sass/#how-to-use\"><code class=\"language-text\">gatsby-plugin-sass</code></a> or <a href=\"/packages/gatsby-plugin-less/#how-to-use\"><code class=\"language-text\">gatsby-plugin-less</code></a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// in gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-sass`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      cssLoaderOptions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        camelCase<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h3 id=\"update-jest-configuration\"><a href=\"#update-jest-configuration\" aria-label=\"update jest configuration permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Update Jest configuration</h3>\n<p>If you were using Jest with Gatsby V1, you will need to make some updates to your configuration when upgrading to Gatsby V2. You can view the complete details of setting up your test environment on the <a href=\"/docs/unit-testing/\">Unit Testing</a> page of the docs.</p>\n<h3 id=\"gatsby-images-outerwrapperclassname-was-removed\"><a href=\"#gatsby-images-outerwrapperclassname-was-removed\" aria-label=\"gatsby images outerwrapperclassname was removed permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-image‚Äôs <code class=\"language-text\">outerWrapperClassName</code> was removed</h3>\n<p>Because the outer wrapper <code class=\"language-text\">div</code> was removed, you can no longer use the <code class=\"language-text\">outerWrapperClassName</code> prop for styling your images. You should merge those styles into your wrapper‚Äôs class.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted\">&lt;Img</span>\n  fluid={data.file.childImageSharp.fluid}\n  className={styles.wrapper}\n<span class=\"token deleted\">- outerWrapperClassName={styles.outerWrapper}</span>\n/></code></pre></div>\n<p>Similarly, if you have created any CSS styling rules referencing the <code class=\"language-text\">gatsby-image-outer-wrapper</code> class, you should merge those styles into the <code class=\"language-text\">gatsby-image-wrapper</code> class.</p>\n<h2 id=\"resolving-deprecations\"><a href=\"#resolving-deprecations\" aria-label=\"resolving deprecations permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resolving Deprecations</h2>\n<h3 id=\"import-link-from-gatsby\"><a href=\"#import-link-from-gatsby\" aria-label=\"import link from gatsby permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Import Link from Gatsby</h3>\n<p>All components and utility functions from <code class=\"language-text\">gatsby-link</code> are now exported from <code class=\"language-text\">gatsby</code> package. Therefore you should import it directly from <code class=\"language-text\">gatsby</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">import React from \"react\"\n<span class=\"token deleted\">- import Link from \"gatsby-link\"</span>\n<span class=\"token inserted\">+ import { Link } from \"gatsby\"</span>\n\nexport default props => (\n  &lt;Link to=\"/\">Home&lt;/Link>\n)</code></pre></div>\n<p>Furthermore you can remove the package from the <code class=\"language-text\">package.json</code>.</p>\n<div class=\"gatsby-code-title\">package.json</div>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">\"dependencies\": {\n  \"gatsby\": \"latest\",\n  \"gatsby-image\": \"latest\",\n  \"gatsby-plugin-sharp\": \"latest\",\n<span class=\"token deleted\">- \"gatsby-link\": \"^1.6.39\"</span>\n}</code></pre></div>\n<h3 id=\"import-graphql-from-gatsby\"><a href=\"#import-graphql-from-gatsby\" aria-label=\"import graphql from gatsby permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Import graphql from Gatsby</h3>\n<p>The <code class=\"language-text\">graphql</code> tag function that Gatsby v1 auto-supports is deprecated in v2. Gatsby will throw deprecation warning unless you explicitly import it from the <code class=\"language-text\">gatsby</code> package.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">import React from \"react\"\n<span class=\"token inserted\">+ import { graphql } from \"gatsby\"</span>\n\nexport default ({ data }) => (\n  &lt;h1>{data.site.siteMetadata.title}&lt;/h1>\n)\n\nexport const query = graphql`\n  query HomeQuery {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n  }\n`</code></pre></div>\n<blockquote>\n<p>There is a codemod that can automatically make this change to your projects. Check out the <a href=\"https://www.npmjs.com/package/gatsby-codemods\"><code class=\"language-text\">gatsby-codemods</code></a> package for usage instructions.</p>\n</blockquote>\n<blockquote>\n<p>Note that if you are relying on the auto-import feature of WebStorm or VSCode, it may import <code class=\"language-text\">graphql</code> from <code class=\"language-text\">&#39;graphql&#39;</code> instead of <code class=\"language-text\">&#39;gatsby&#39;</code>. This will throw a bunch of errors around bad imports. Make sure <code class=\"language-text\">graphql</code> is always imported from <code class=\"language-text\">gatsby</code>.</p>\n</blockquote>\n<h3 id=\"rename-boundactioncreators-to-actions\"><a href=\"#rename-boundactioncreators-to-actions\" aria-label=\"rename boundactioncreators to actions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rename <code class=\"language-text\">boundActionCreators</code> to <code class=\"language-text\">actions</code></h3>\n<p><code class=\"language-text\">boundActionCreators</code> is deprecated in v2. You can continue using it, but it‚Äôs recommended that you rename it to <code class=\"language-text\">actions</code>.</p>\n<h3 id=\"rename-pathcontext-to-pagecontext\"><a href=\"#rename-pathcontext-to-pagecontext\" aria-label=\"rename pathcontext to pagecontext permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rename <code class=\"language-text\">pathContext</code> to <code class=\"language-text\">pageContext</code></h3>\n<p>Similar to <code class=\"language-text\">boundActionCreators</code> above, <code class=\"language-text\">pathContext</code> is deprecated in favor of <code class=\"language-text\">pageContext</code>.</p>\n<h3 id=\"rename-responsive-image-queries\"><a href=\"#rename-responsive-image-queries\" aria-label=\"rename responsive image queries permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rename responsive image queries</h3>\n<p>The <code class=\"language-text\">sizes</code> and <code class=\"language-text\">resolutions</code> queries are deprecated in v2. These queries have been renamed to <code class=\"language-text\">fluid</code> and <code class=\"language-text\">fixed</code> to make them easier to understand. You can continue using the deprecated query names, but it‚Äôs recommended that you update them.</p>\n<p>Update image query and fragment names:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">import React from \"react\"\nimport { graphql } from \"gatsby\"\n\nconst Example = ({ data }) => {\n  &lt;div>\n<span class=\"token deleted\">-    &lt;Img sizes={data.foo.childImageSharp.sizes} /></span>\n<span class=\"token deleted\">-    &lt;Img resolutions={data.bar.childImageSharp.resolutions} /></span>\n<span class=\"token inserted\">+    &lt;Img fluid={data.foo.childImageSharp.fluid} /></span>\n<span class=\"token inserted\">+    &lt;Img fixed={data.bar.childImageSharp.fixed} /></span>\n  &lt;/div>\n}\n\nexport default Example\n\nexport const pageQuery = graphql`\n  query IndexQuery {\n    foo: file(relativePath: { regex: \"/foo.jpg/\" }) {\n      childImageSharp {\n<span class=\"token deleted\">-        sizes(maxWidth: 700) {</span>\n<span class=\"token deleted\">-          ...GatsbyImageSharpSizes_tracedSVG</span>\n<span class=\"token inserted\">+        fluid(maxWidth: 700) {</span>\n<span class=\"token inserted\">+          ...GatsbyImageSharpFluid_tracedSVG</span>\n        }\n      }\n    }\n    bar: file(relativePath: { regex: \"/bar.jpg/\" }) {\n      childImageSharp {\n<span class=\"token deleted\">-        resolutions(width: 500) {</span>\n<span class=\"token deleted\">-          ...GatsbyImageSharpResolutions_withWebp</span>\n<span class=\"token inserted\">+        fixed(width: 500) {</span>\n<span class=\"token inserted\">+          ...GatsbyImageSharpFixed_withWebp</span>\n        }\n      }\n    }\n  }\n`</code></pre></div>\n<p>Further examples can be found in the <a href=\"https://github.com/gatsbyjs/gatsby/tree/d0e29272ed7b009dae18d35d41a45e700cdcab0d/packages/gatsby-image\">Gatsby Image docs</a>.</p>\n<h3 id=\"delete-nodes-api-deprecated\"><a href=\"#delete-nodes-api-deprecated\" aria-label=\"delete nodes api deprecated permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Delete Nodes API Deprecated</h3>\n<p><code class=\"language-text\">deleteNodes</code> is now deprecated, so instead you should write <code class=\"language-text\">nodes.forEach(n =&gt; deleteNode({ node: n }))</code></p>\n<h2 id=\"other-changes-worth-noting\"><a href=\"#other-changes-worth-noting\" aria-label=\"other changes worth noting permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Other Changes Worth Noting</h2>\n<h3 id=\"explicit-query-names-no-longer-required\"><a href=\"#explicit-query-names-no-longer-required\" aria-label=\"explicit query names no longer required permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Explicit query names no longer required</h3>\n<p>Gatsby v2 doesn‚Äôt require explicit query names. You can skip them now:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">export const query = graphql`\n<span class=\"token deleted\">-  query ThisIsExplicitQueryName($slug: String!) {</span>\n<span class=\"token inserted\">+  query($slug: String!) {</span>\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      html\n      frontmatter {\n        title\n      }\n    }\n  }</code></pre></div>\n<p>You can also skip the <code class=\"language-text\">query</code> keyword if you don‚Äôt use query variables:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">export const query = graphql`\n<span class=\"token deleted\">-  query ThisIsAnotherExplicitQueryName {</span>\n<span class=\"token inserted\">+  {</span>\n    site {\n      siteMetadata {\n        title\n      }\n    }\n  }</code></pre></div>\n<p>This isn‚Äôt a breaking change. Queries with explicit names will continue to work as they did in v1.</p>\n<h3 id=\"remove-inlined-css-in-htmljs\"><a href=\"#remove-inlined-css-in-htmljs\" aria-label=\"remove inlined css in htmljs permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Remove inlined CSS in <code class=\"language-text\">html.js</code></h3>\n<p>Gatsby v2 will automatically inline your CSS. You can remove any custom CSS inlining from your custom <code class=\"language-text\">html.js</code> and unless it was used for anything else specifically, you can also remove <code class=\"language-text\">html.js</code> itself.</p>\n<p>See an example in <a href=\"https://github.com/gatsbyjs/gatsby/commit/765b679cbc222fd5f527690427ee431cca7ccd61#diff-637c76e3c059ed8efacedf6e30de2d61\">this PR that upgrades the <code class=\"language-text\">using-remark</code> site to Gatsby v2</a>.</p>\n<h3 id=\"remove-explicit-polyfills\"><a href=\"#remove-explicit-polyfills\" aria-label=\"remove explicit polyfills permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Remove explicit polyfills</h3>\n<p>If your Gatsby v1 site included any polyfills, you can remove them. Gatsby v2 ships with babel 7 and is configured to automatically include polyfills for your code. See <a href=\"/docs/babel\">Gatsby‚Äôs babel docs for more details</a>.</p>\n<blockquote>\n<p>Note: This works for your own code, but is not yet implemented for code imported from <code class=\"language-text\">node_modules</code>. Track progress of this feature at <a href=\"https://github.com/gatsbyjs/gatsby/issues/3870\">bullet 5 of this issue</a>.</p>\n</blockquote>\n<h2 id=\"for-plugin-maintainers\"><a href=\"#for-plugin-maintainers\" aria-label=\"for plugin maintainers permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>For Plugin Maintainers</h2>\n<p>In most cases you won‚Äôt have to do anything to be v2 compatible, however there are a few things you can do to be certain your plugin will work well with v2 sites.</p>\n<h3 id=\"setting-the-proper-peer-dependencies\"><a href=\"#setting-the-proper-peer-dependencies\" aria-label=\"setting the proper peer dependencies permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting the Proper Peer Dependencies</h3>\n<p><code class=\"language-text\">gatsby</code> should be included under <code class=\"language-text\">peerDependencies</code> of your plugin and it should specify the proper versions of support.</p>\n<div class=\"gatsby-code-title\">package.json</div>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">\"peerDependencies\": {\n<span class=\"token deleted\">-  \"gatsby\": \"1\"</span>\n<span class=\"token inserted\">+  \"gatsby\": \">=1\"</span>\n}</code></pre></div>\n<h3 id=\"change-modifybabelrc-to-oncreatebabelconfig\"><a href=\"#change-modifybabelrc-to-oncreatebabelconfig\" aria-label=\"change modifybabelrc to oncreatebabelconfig permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change <code class=\"language-text\">modifyBabelrc</code> to <code class=\"language-text\">onCreateBabelConfig</code></h3>\n<p><code class=\"language-text\">modifyBabelrc</code> was renamed to <a href=\"/docs/node-apis/#modifyBabelrc\"><code class=\"language-text\">onCreateBabelConfig</code></a> to bring it in line with the rest of Gatsby‚Äôs API names.</p>\n<p>Use <code class=\"language-text\">onCreateBabelConfig</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted\">- exports.modifyBabelrc = ({ babelrc }) => {</span>\n<span class=\"token deleted\">-   return {</span>\n<span class=\"token deleted\">-     ...babelrc,</span>\n<span class=\"token deleted\">-     plugins: babelrc.plugins.concat([`foo`]),</span>\n<span class=\"token deleted\">-   }</span>\n<span class=\"token inserted\">+ exports.onCreateBabelConfig = ({ actions }) => {</span>\n<span class=\"token inserted\">+   actions.setBabelPlugin({</span>\n<span class=\"token inserted\">+     name: `babel-plugin-foo`,</span>\n<span class=\"token inserted\">+   })</span>\n}</code></pre></div>\n<p>Note usage of the new <a href=\"/docs/actions/#setBabelPlugins\"><code class=\"language-text\">setBabelPlugin</code> action</a>.</p>\n<p>See <a href=\"/docs/babel\">Gatsby‚Äôs babel docs for more details</a> about configuring babel.</p>\n<h3 id=\"change-modifywebpackconfig-to-oncreatewebpackconfig\"><a href=\"#change-modifywebpackconfig-to-oncreatewebpackconfig\" aria-label=\"change modifywebpackconfig to oncreatewebpackconfig permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change <code class=\"language-text\">modifyWebpackConfig</code> to <code class=\"language-text\">onCreateWebpackConfig</code></h3>\n<p><code class=\"language-text\">modifyWebpackConfig</code> was renamed to <a href=\"/docs/node-apis/#onCreateWebpackConfig\"><code class=\"language-text\">onCreateWebpackConfig</code></a> to bring it in line with the rest of Gatsby‚Äôs API names.</p>\n<p>Use <code class=\"language-text\">onCreateWebpackConfig</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted\">- exports.modifyWebpackConfig = ({ config, stage }) => {</span>\n<span class=\"token inserted\">+ exports.onCreateWebpackConfig = ({ stage, actions }) => {</span>\n  switch (stage) {\n    case `build-javascript`:\n<span class=\"token deleted\">-       config.plugin(`Foo`, webpackFooPlugin, null)</span>\n<span class=\"token deleted\">-       break</span>\n<span class=\"token deleted\">-   }</span>\n<span class=\"token deleted\">-   return config</span>\n<span class=\"token inserted\">+       actions.setWebpackConfig({</span>\n<span class=\"token inserted\">+         plugins: [webpackFooPlugin],</span>\n<span class=\"token inserted\">+       })</span>\n<span class=\"token inserted\">+   }</span>\n}</code></pre></div>\n<p>Note usage of the new <a href=\"/docs/actions/#setWebpackConfig\"><code class=\"language-text\">setWebpackConfig</code> action</a>.</p>\n<p>See <a href=\"/docs/add-custom-webpack-config\">Gatsby‚Äôs webpack docs for more details</a> about configuring webpack.</p>\n<h3 id=\"createremotefilenode\"><a href=\"#createremotefilenode\" aria-label=\"createremotefilenode permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>createRemoteFileNode</h3>\n<p>The signature for using createRemoteFileNode changed in v2, it now expects a new parameter <code class=\"language-text\">createNodeId</code>.</p>\n<p><a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-source-filesystem#createremotefilenode\">See docs for <code class=\"language-text\">createRemoteFileNode</code></a></p>\n<h3 id=\"only-allow-defined-keys-on-the-node-internal-object\"><a href=\"#only-allow-defined-keys-on-the-node-internal-object\" aria-label=\"only allow defined keys on the node internal object permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Only allow defined keys on the node internal object</h3>\n<p>The node internal object isn‚Äôt meant for adding node data. Those should be added to the top-level object. We\ndidn‚Äôt document this in v1 nor validate against it but are now for v2.</p>\n<h3 id=\"import-graphql-types-from-gatsbygraphql\"><a href=\"#import-graphql-types-from-gatsbygraphql\" aria-label=\"import graphql types from gatsbygraphql permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Import <code class=\"language-text\">graphql</code> types from <code class=\"language-text\">gatsby/graphql</code></h3>\n<p>Import graphql types from <code class=\"language-text\">gatsby/graphql</code> to prevent <code class=\"language-text\">Schema must contain unique named types but contains multiple types named &quot;&lt;typename&gt;&quot;</code> errors. <code class=\"language-text\">gatsby/graphql</code> exports all builtin GraphQL types as well as <code class=\"language-text\">graphQLJSON</code> type.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted\">-const { GraphQLString } = require(`graphql`)</span>\n<span class=\"token inserted\">+const { GraphQLString } = require(`gatsby/graphql`)</span></code></pre></div>\n<h3 id=\"add-gatsby-plugin-flow-if-you-are-using-flowtype\"><a href=\"#add-gatsby-plugin-flow-if-you-are-using-flowtype\" aria-label=\"add gatsby plugin flow if you are using flowtype permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add <code class=\"language-text\">gatsby-plugin-flow</code> if you are using Flowtype</h3>\n<p><code class=\"language-text\">@babel/preset-flow</code> was removed from Gatsby‚Äôs default babel configuration to make it easier to allow users to choose their own transpiler. If your site has its own <code class=\"language-text\">.babelrc</code> that already includes the Flow preset, no changes are necessary. Otherwise, you should install <a href=\"/packages/gatsby-plugin-flow\"><code class=\"language-text\">gatsby-plugin-flow</code></a>.</p>\n<h2 id=\"for-explorers\"><a href=\"#for-explorers\" aria-label=\"for explorers permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>For Explorers</h2>\n<h3 id=\"starting-a-new-project-with-v2\"><a href=\"#starting-a-new-project-with-v2\" aria-label=\"starting a new project with v2 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Starting a New Project with v2</h3>\n<p>Here‚Äôs a brief section on starting a new project with Gatsby v2 instead of upgrading an existing project.</p>\n<p><em>Start from scratch:</em> If you‚Äôre a <em>start from scratch</em> kind of person, you can install Gatsby and React like this: <code class=\"language-text\">npm install gatsby react react-dom</code></p>\n<p><em>Tutorial:</em> If you‚Äôd like a step-by-step guide, <a href=\"/tutorial/\">follow the tutorial</a> to get started with Gatsby v2.</p>\n<p><em>Starters:</em> If you‚Äôd rather use one of the official starters, install your favourite one with the Gatsby CLI.</p>\n<p><code class=\"language-text\">gatsby-starter-default</code> with v2:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx gatsby new my-default-project https://github.com/gatsbyjs/gatsby-starter-default</code></pre></div>\n<p><code class=\"language-text\">gatsby-starter-hello-world</code> with v2:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx gatsby new my-hello-world https://github.com/gatsbyjs/gatsby-starter-hello-world</code></pre></div>\n<p><code class=\"language-text\">gatsby-starter-blog</code> with v2:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx gatsby new my-blog https://github.com/gatsbyjs/gatsby-starter-blog</code></pre></div>"}