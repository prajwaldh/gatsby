{"expireTime":9007200804686334000,"key":"transformer-remark-markdown-ast-c73dce768476a9f34694389a9ae10b89-gatsby-remark-graphvizgatsby-remark-code-titlesgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"There are two types of plugins that work within Gatsby’s data system, “source”\nand “transformer” plugins.","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":3,"column":27,"offset":106},"indent":[1]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":3,"column":27,"offset":106},"indent":[1]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Source","position":{"start":{"line":5,"column":5,"offset":112},"end":{"line":5,"column":11,"offset":118},"indent":[]}}],"position":{"start":{"line":5,"column":3,"offset":110},"end":{"line":5,"column":13,"offset":120},"indent":[]}},{"type":"text","value":" plugins “source” data from remote or local locations into what\nGatsby calls ","position":{"start":{"line":5,"column":13,"offset":120},"end":{"line":6,"column":16,"offset":199},"indent":[3]}},{"type":"link","title":null,"url":"/docs/node-interface/","children":[{"type":"text","value":"nodes","position":{"start":{"line":6,"column":17,"offset":200},"end":{"line":6,"column":22,"offset":205},"indent":[]}}],"position":{"start":{"line":6,"column":16,"offset":199},"end":{"line":6,"column":46,"offset":229},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":6,"column":46,"offset":229},"end":{"line":6,"column":47,"offset":230},"indent":[]}}],"position":{"start":{"line":5,"column":3,"offset":110},"end":{"line":6,"column":47,"offset":230},"indent":[3]}}],"position":{"start":{"line":5,"column":1,"offset":108},"end":{"line":6,"column":47,"offset":230},"indent":[1]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Transformer","position":{"start":{"line":7,"column":5,"offset":235},"end":{"line":7,"column":16,"offset":246},"indent":[]}}],"position":{"start":{"line":7,"column":3,"offset":233},"end":{"line":7,"column":18,"offset":248},"indent":[]}},{"type":"text","value":" plugins “transform” data provided by source plugins into new\nnodes and/or node fields.","position":{"start":{"line":7,"column":18,"offset":248},"end":{"line":8,"column":28,"offset":337},"indent":[3]}}],"position":{"start":{"line":7,"column":3,"offset":233},"end":{"line":8,"column":28,"offset":337},"indent":[3]}}],"position":{"start":{"line":7,"column":1,"offset":231},"end":{"line":8,"column":28,"offset":337},"indent":[1]}}],"position":{"start":{"line":5,"column":1,"offset":108},"end":{"line":8,"column":28,"offset":337},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The purpose of this doc is to:","position":{"start":{"line":10,"column":1,"offset":339},"end":{"line":10,"column":31,"offset":369},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":339},"end":{"line":10,"column":31,"offset":369},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Define what a Gatsby transformer plugin is, and","position":{"start":{"line":12,"column":4,"offset":374},"end":{"line":12,"column":51,"offset":421},"indent":[]}}],"position":{"start":{"line":12,"column":4,"offset":374},"end":{"line":12,"column":51,"offset":421},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":371},"end":{"line":12,"column":51,"offset":421},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Walk through a simplified reimplementation of an existing plugin, to demonstrate how to create a transformer plugin.","position":{"start":{"line":13,"column":4,"offset":425},"end":{"line":13,"column":120,"offset":541},"indent":[]}}],"position":{"start":{"line":13,"column":4,"offset":425},"end":{"line":13,"column":120,"offset":541},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":422},"end":{"line":13,"column":120,"offset":541},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":371},"end":{"line":13,"column":120,"offset":541},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#what-do-transformer-plugins-do","title":null,"data":{"hProperties":{"aria-label":"what do transformer plugins do permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"What do transformer plugins do?","position":{"start":{"line":15,"column":4,"offset":546},"end":{"line":15,"column":35,"offset":577},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":543},"end":{"line":15,"column":35,"offset":577},"indent":[]},"data":{"id":"what-do-transformer-plugins-do","htmlAttributes":{"id":"what-do-transformer-plugins-do"},"hProperties":{"id":"what-do-transformer-plugins-do"}}},{"type":"paragraph","children":[{"type":"text","value":"Transformer plugins “transform” data of one type into another type. You’ll often use both source plugins and transformer plugins in your Gatsby sites.","position":{"start":{"line":17,"column":1,"offset":579},"end":{"line":17,"column":151,"offset":729},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":579},"end":{"line":17,"column":151,"offset":729},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This loose coupling between the data source and transformer plugins allow Gatsby developers to quickly assemble complex data transformation pipelines with little work.","position":{"start":{"line":19,"column":1,"offset":731},"end":{"line":19,"column":168,"offset":898},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":731},"end":{"line":19,"column":168,"offset":898},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#how-do-you-create-a-transformer-plugin","title":null,"data":{"hProperties":{"aria-label":"how do you create a transformer plugin permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How do you create a transformer plugin?","position":{"start":{"line":21,"column":4,"offset":903},"end":{"line":21,"column":43,"offset":942},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":900},"end":{"line":21,"column":43,"offset":942},"indent":[]},"data":{"id":"how-do-you-create-a-transformer-plugin","htmlAttributes":{"id":"how-do-you-create-a-transformer-plugin"},"hProperties":{"id":"how-do-you-create-a-transformer-plugin"}}},{"type":"paragraph","children":[{"type":"text","value":"Just like a source plugin, a transformer plugin is a normal NPM package. It has a ","position":{"start":{"line":23,"column":1,"offset":944},"end":{"line":23,"column":83,"offset":1026},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">package.json</code>","position":{"start":{"line":23,"column":83,"offset":1026},"end":{"line":23,"column":97,"offset":1040},"indent":[]}},{"type":"text","value":" file with optional dependencies as well as a ","position":{"start":{"line":23,"column":97,"offset":1040},"end":{"line":23,"column":143,"offset":1086},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-node.js</code>","position":{"start":{"line":23,"column":143,"offset":1086},"end":{"line":23,"column":159,"offset":1102},"indent":[]}},{"type":"text","value":" file where you implement Gatsby’s Node.js APIs.","position":{"start":{"line":23,"column":159,"offset":1102},"end":{"line":23,"column":207,"offset":1150},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":944},"end":{"line":23,"column":207,"offset":1150},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">gatsby-transformer-yaml</code>","position":{"start":{"line":25,"column":1,"offset":1152},"end":{"line":25,"column":26,"offset":1177},"indent":[]}},{"type":"text","value":" is transformer plugin that looks for new nodes with a media type of text/yaml (e.g. a .yaml file) and creates new YAML child node(s) by parsing the YAML source into JavaScript objects.","position":{"start":{"line":25,"column":26,"offset":1177},"end":{"line":25,"column":211,"offset":1362},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1152},"end":{"line":25,"column":211,"offset":1362},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As an example, let’s partially rebuild a simplified ","position":{"start":{"line":27,"column":1,"offset":1364},"end":{"line":27,"column":53,"offset":1416},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-transformer-yaml</code>","position":{"start":{"line":27,"column":53,"offset":1416},"end":{"line":27,"column":78,"offset":1441},"indent":[]}},{"type":"text","value":" directly in an example site. Let’s say we have a default gatsby starter site which includes a YAML file:","position":{"start":{"line":27,"column":78,"offset":1441},"end":{"line":27,"column":183,"offset":1546},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1364},"end":{"line":27,"column":183,"offset":1546},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">src/data/example.yml</div>"},{"type":"html","lang":"yaml","value":"<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Jane Doe\n  <span class=\"token key atrule\">bio</span><span class=\"token punctuation\">:</span> Developer based in Somewhere<span class=\"token punctuation\">,</span> USA\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> John Smith\n  <span class=\"token key atrule\">bio</span><span class=\"token punctuation\">:</span> Developer based in Maintown<span class=\"token punctuation\">,</span> USA</code></pre></div>","position":{"start":{"line":29,"column":1,"offset":1548},"end":{"line":34,"column":4,"offset":1703},"indent":[1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#make-sure-the-data-is-sourced","title":null,"data":{"hProperties":{"aria-label":"make sure the data is sourced permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Make sure the data is sourced","position":{"start":{"line":36,"column":5,"offset":1709},"end":{"line":36,"column":34,"offset":1738},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1705},"end":{"line":36,"column":34,"offset":1738},"indent":[]},"data":{"id":"make-sure-the-data-is-sourced","htmlAttributes":{"id":"make-sure-the-data-is-sourced"},"hProperties":{"id":"make-sure-the-data-is-sourced"}}},{"type":"paragraph","children":[{"type":"text","value":"First, in ","position":{"start":{"line":38,"column":1,"offset":1740},"end":{"line":38,"column":11,"offset":1750},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-config.js</code>","position":{"start":{"line":38,"column":11,"offset":1750},"end":{"line":38,"column":29,"offset":1768},"indent":[]}},{"type":"text","value":", use the ","position":{"start":{"line":38,"column":29,"offset":1768},"end":{"line":38,"column":39,"offset":1778},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-source-filesystem</code>","position":{"start":{"line":38,"column":39,"offset":1778},"end":{"line":38,"column":65,"offset":1804},"indent":[]}},{"type":"text","value":" plugin to create File nodes.","position":{"start":{"line":38,"column":65,"offset":1804},"end":{"line":38,"column":94,"offset":1833},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":1740},"end":{"line":38,"column":94,"offset":1833},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">gatsby-config.js</div>"},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`./src/data/`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":40,"column":1,"offset":1835},"end":{"line":51,"column":4,"offset":2025},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"These are exposed in your graphql schema which you can query:","position":{"start":{"line":53,"column":1,"offset":2027},"end":{"line":53,"column":62,"offset":2088},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":2027},"end":{"line":53,"column":62,"offset":2088},"indent":[]}},{"type":"html","lang":"graphql","value":"<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  allFile <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        internal <span class=\"token punctuation\">{</span>\n          type\n          mediaType\n          description\n          owner\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":55,"column":1,"offset":2090},"end":{"line":70,"column":4,"offset":2271},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now you have a ","position":{"start":{"line":72,"column":1,"offset":2273},"end":{"line":72,"column":16,"offset":2288},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">File</code>","position":{"start":{"line":72,"column":16,"offset":2288},"end":{"line":72,"column":22,"offset":2294},"indent":[]}},{"type":"text","value":" node to work with:","position":{"start":{"line":72,"column":22,"offset":2294},"end":{"line":72,"column":41,"offset":2313},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":2273},"end":{"line":72,"column":41,"offset":2313},"indent":[]}},{"type":"html","lang":"json","value":"<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"allFile\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"edges\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"node\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"internal\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token property\">\"contentDigest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"c1644b03f380bc5508456ce91faf0c08\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"File\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"mediaType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text/yaml\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"File \\\"src/data/example.yml\\\"\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"owner\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-source-filesystem\"</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":74,"column":1,"offset":2315},"end":{"line":94,"column":4,"offset":2735},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#transform-nodes-of-type-textyaml","title":null,"data":{"hProperties":{"aria-label":"transform nodes of type textyaml permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Transform nodes of type ","position":{"start":{"line":96,"column":5,"offset":2741},"end":{"line":96,"column":29,"offset":2765},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">text/yaml</code>","position":{"start":{"line":96,"column":29,"offset":2765},"end":{"line":96,"column":40,"offset":2776},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":2737},"end":{"line":96,"column":40,"offset":2776},"indent":[]},"data":{"id":"transform-nodes-of-type-textyaml","htmlAttributes":{"id":"transform-nodes-of-type-textyaml"},"hProperties":{"id":"transform-nodes-of-type-textyaml"}}},{"type":"paragraph","children":[{"type":"text","value":"Now, transform the newly created ","position":{"start":{"line":98,"column":1,"offset":2778},"end":{"line":98,"column":34,"offset":2811},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">File</code>","position":{"start":{"line":98,"column":34,"offset":2811},"end":{"line":98,"column":40,"offset":2817},"indent":[]}},{"type":"text","value":" nodes by hooking into the ","position":{"start":{"line":98,"column":40,"offset":2817},"end":{"line":98,"column":67,"offset":2844},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">onCreateNode</code>","position":{"start":{"line":98,"column":67,"offset":2844},"end":{"line":98,"column":81,"offset":2858},"indent":[]}},{"type":"text","value":" API in ","position":{"start":{"line":98,"column":81,"offset":2858},"end":{"line":98,"column":89,"offset":2866},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-node.js</code>","position":{"start":{"line":98,"column":89,"offset":2866},"end":{"line":98,"column":105,"offset":2882},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":98,"column":105,"offset":2882},"end":{"line":98,"column":106,"offset":2883},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":2778},"end":{"line":98,"column":106,"offset":2883},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you’re following along in an example project, install the following packages:","position":{"start":{"line":100,"column":1,"offset":2885},"end":{"line":100,"column":81,"offset":2965},"indent":[]}}],"position":{"start":{"line":100,"column":1,"offset":2885},"end":{"line":100,"column":81,"offset":2965},"indent":[]}},{"type":"html","lang":"shell","value":"<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save js-yaml lodash</code></pre></div>","position":{"start":{"line":102,"column":1,"offset":2967},"end":{"line":104,"column":4,"offset":3013},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now, in ","position":{"start":{"line":106,"column":1,"offset":3015},"end":{"line":106,"column":9,"offset":3023},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-node.js</code>","position":{"start":{"line":106,"column":9,"offset":3023},"end":{"line":106,"column":25,"offset":3039},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":106,"column":25,"offset":3039},"end":{"line":106,"column":26,"offset":3040},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":3015},"end":{"line":106,"column":26,"offset":3040},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">gatsby-node.js</div>"},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> jsYaml <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`js-yaml`</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">onCreateNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> loadNodeContent <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// only log for nodes of mediaType `text/yaml`</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>mediaType <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token string\">`text/yaml`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> fileContent <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">loadNodeContent</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> parsedContent <span class=\"token operator\">=</span> jsYaml<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nexports<span class=\"token punctuation\">.</span>onCreateNode <span class=\"token operator\">=</span> onCreateNode</code></pre></div>","position":{"start":{"line":108,"column":1,"offset":3042},"end":{"line":122,"column":4,"offset":3420},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"File content:","position":{"start":{"line":124,"column":1,"offset":3422},"end":{"line":124,"column":14,"offset":3435},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":3422},"end":{"line":124,"column":14,"offset":3435},"indent":[]}},{"type":"html","lang":"text","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- id: Jane Doe\n  bio: Developer based in Somewhere, USA\n- id: John Smith\n  bio: Developer based in Maintown, USA</code></pre></div>","position":{"start":{"line":126,"column":1,"offset":3437},"end":{"line":131,"column":4,"offset":3561},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Parsed YAML content:","position":{"start":{"line":133,"column":1,"offset":3563},"end":{"line":133,"column":21,"offset":3583},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":3563},"end":{"line":133,"column":21,"offset":3583},"indent":[]}},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Jane Doe\"</span><span class=\"token punctuation\">,</span>\n    bio<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Developer based in Somewhere, USA\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"John Smith\"</span><span class=\"token punctuation\">,</span>\n    bio<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Developer based in Maintown, USA\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>","position":{"start":{"line":135,"column":1,"offset":3585},"end":{"line":146,"column":4,"offset":3758},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now we’ll write a helper function to transform the parsed YAML content into new Gatsby nodes:","position":{"start":{"line":148,"column":1,"offset":3760},"end":{"line":148,"column":94,"offset":3853},"indent":[]}}],"position":{"start":{"line":148,"column":1,"offset":3760},"end":{"line":148,"column":94,"offset":3853},"indent":[]}},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">transformObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> yamlNode <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>obj<span class=\"token punctuation\">,</span>\n    id<span class=\"token punctuation\">,</span>\n    children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    parent<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n    internal<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      contentDigest<span class=\"token punctuation\">:</span> <span class=\"token function\">createContentDigest</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      type<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span>yamlNode<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">createParentChildLink</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> parent<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">,</span> child<span class=\"token punctuation\">:</span> yamlNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":150,"column":1,"offset":3855},"end":{"line":165,"column":4,"offset":4164},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Above, we create a ","position":{"start":{"line":167,"column":1,"offset":4166},"end":{"line":167,"column":20,"offset":4185},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">yamlNode</code>","position":{"start":{"line":167,"column":20,"offset":4185},"end":{"line":167,"column":30,"offset":4195},"indent":[]}},{"type":"text","value":" object with the shape expected by the ","position":{"start":{"line":167,"column":30,"offset":4195},"end":{"line":167,"column":69,"offset":4234},"indent":[]}},{"type":"link","title":null,"url":"/docs/actions/#createNode","children":[{"type":"html","value":"<code class=\"language-text\">createNode</code>","position":{"start":{"line":167,"column":70,"offset":4235},"end":{"line":167,"column":82,"offset":4247},"indent":[]}},{"type":"text","value":" action","position":{"start":{"line":167,"column":82,"offset":4247},"end":{"line":167,"column":89,"offset":4254},"indent":[]}}],"position":{"start":{"line":167,"column":69,"offset":4234},"end":{"line":167,"column":117,"offset":4282},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":167,"column":117,"offset":4282},"end":{"line":167,"column":118,"offset":4283},"indent":[]}}],"position":{"start":{"line":167,"column":1,"offset":4166},"end":{"line":167,"column":118,"offset":4283},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We then create a link between the parent node (file) and the child node (yaml content).","position":{"start":{"line":169,"column":1,"offset":4285},"end":{"line":169,"column":88,"offset":4372},"indent":[]}}],"position":{"start":{"line":169,"column":1,"offset":4285},"end":{"line":169,"column":88,"offset":4372},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In our updated ","position":{"start":{"line":171,"column":1,"offset":4374},"end":{"line":171,"column":16,"offset":4389},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-node.js</code>","position":{"start":{"line":171,"column":16,"offset":4389},"end":{"line":171,"column":32,"offset":4405},"indent":[]}},{"type":"text","value":", we’ll then iterate through the parsed YAML content, using the helper function to transform each into a new node:","position":{"start":{"line":171,"column":32,"offset":4405},"end":{"line":171,"column":146,"offset":4519},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":4374},"end":{"line":171,"column":146,"offset":4519},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">gatsby-node.js</div>"},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> jsYaml <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`js-yaml`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`lodash`</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">onCreateNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  node<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  actions<span class=\"token punctuation\">,</span></span>  loadNodeContent<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  createNodeId<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  createContentDigest<span class=\"token punctuation\">,</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">function</span> <span class=\"token function\">transformObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> yamlNode <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">...</span>obj<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      parent<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      internal<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        contentDigest<span class=\"token punctuation\">:</span> <span class=\"token function\">createContentDigest</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        type<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span>yamlNode<span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">createParentChildLink</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> parent<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">,</span> child<span class=\"token punctuation\">:</span> yamlNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNode<span class=\"token punctuation\">,</span> createParentChildLink <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>mediaType <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token string\">`text/yaml`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">loadNodeContent</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> parsedContent <span class=\"token operator\">=</span> jsYaml<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">)</span>\n\n<span class=\"gatsby-highlight-code-line\">  parsedContent<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">transformObject</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      obj<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      obj<span class=\"token punctuation\">.</span>id <span class=\"token operator\">?</span> obj<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">:</span> <span class=\"token function\">createNodeId</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>node<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> [</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">] >>> YAML`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      _<span class=\"token punctuation\">.</span><span class=\"token function\">upperFirst</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">.</span><span class=\"token function\">camelCase</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>node<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> Yaml`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">}</span>\n\nexports<span class=\"token punctuation\">.</span>onCreateNode <span class=\"token operator\">=</span> onCreateNode</code></pre></div>","position":{"start":{"line":173,"column":1,"offset":4521},"end":{"line":223,"column":4,"offset":5645},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now we can query for our new nodes containing our transformed YAML data:","position":{"start":{"line":225,"column":1,"offset":5647},"end":{"line":225,"column":73,"offset":5719},"indent":[]}}],"position":{"start":{"line":225,"column":1,"offset":5647},"end":{"line":225,"column":73,"offset":5719},"indent":[]}},{"type":"html","lang":"graphql","value":"<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>\n  allExampleYaml <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        id\n        name\n        bio\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":227,"column":1,"offset":5721},"end":{"line":239,"column":4,"offset":5843},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"html","lang":"json","value":"<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"allExampleYaml\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"edges\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"node\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"3baa5e64-ac2a-5234-ba35-7af86746713f\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Jane Doe\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"bio\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Developer based in Somewhere, USA\"</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"node\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2c733815-c342-5d85-aa3f-6795d0f25909\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"John Smith\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"bio\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Developer based in Maintown, USA\"</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":241,"column":1,"offset":5845},"end":{"line":264,"column":4,"offset":6327},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Check out the ","position":{"start":{"line":266,"column":1,"offset":6329},"end":{"line":266,"column":15,"offset":6343},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-transformer-yaml/src/gatsby-node.js","children":[{"type":"text","value":"full source code","position":{"start":{"line":266,"column":16,"offset":6344},"end":{"line":266,"column":32,"offset":6360},"indent":[]}}],"position":{"start":{"line":266,"column":15,"offset":6343},"end":{"line":266,"column":133,"offset":6461},"indent":[]}},{"type":"text","value":" of ","position":{"start":{"line":266,"column":133,"offset":6461},"end":{"line":266,"column":137,"offset":6465},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-transformer-yaml</code>","position":{"start":{"line":266,"column":137,"offset":6465},"end":{"line":266,"column":162,"offset":6490},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":266,"column":162,"offset":6490},"end":{"line":266,"column":163,"offset":6491},"indent":[]}}],"position":{"start":{"line":266,"column":1,"offset":6329},"end":{"line":266,"column":163,"offset":6491},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#using-the-cache","title":null,"data":{"hProperties":{"aria-label":"using the cache permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Using the cache","position":{"start":{"line":268,"column":4,"offset":6496},"end":{"line":268,"column":19,"offset":6511},"indent":[]}}],"position":{"start":{"line":268,"column":1,"offset":6493},"end":{"line":268,"column":19,"offset":6511},"indent":[]},"data":{"id":"using-the-cache","htmlAttributes":{"id":"using-the-cache"},"hProperties":{"id":"using-the-cache"}}},{"type":"paragraph","children":[{"type":"text","value":"Sometimes transforming properties costs time and resources. In order to avoid recreating these properties at each run, you can profit from the global cache mechanism Gatsby provides.","position":{"start":{"line":270,"column":1,"offset":6513},"end":{"line":270,"column":183,"offset":6695},"indent":[]}}],"position":{"start":{"line":270,"column":1,"offset":6513},"end":{"line":270,"column":183,"offset":6695},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cache keys should at least contain the contentDigest of the concerned. For example, the ","position":{"start":{"line":272,"column":1,"offset":6697},"end":{"line":272,"column":89,"offset":6785},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">gatsby-transformer-remark</code>","position":{"start":{"line":272,"column":89,"offset":6785},"end":{"line":272,"column":116,"offset":6812},"indent":[]}},{"type":"text","value":" uses the following cache key for the html node:","position":{"start":{"line":272,"column":116,"offset":6812},"end":{"line":272,"column":164,"offset":6860},"indent":[]}}],"position":{"start":{"line":272,"column":1,"offset":6697},"end":{"line":272,"column":164,"offset":6860},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">extend-node-type.js</div>"},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">htmlCacheKey</span> <span class=\"token operator\">=</span> node <span class=\"token operator\">=></span>\n  <span class=\"token template-string\"><span class=\"token string\">`transformer-remark-markdown-html-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n    node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>contentDigest\n  <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pluginsCacheStr<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pathPrefixCacheStr<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span></code></pre></div>","position":{"start":{"line":274,"column":1,"offset":6862},"end":{"line":279,"column":4,"offset":7051},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Accessing and setting content in the cache is as simple as:","position":{"start":{"line":281,"column":1,"offset":7053},"end":{"line":281,"column":60,"offset":7112},"indent":[]}}],"position":{"start":{"line":281,"column":1,"offset":7053},"end":{"line":281,"column":60,"offset":7112},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">extend-node-type.js</div>"},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> cachedHTML <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> cache<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token function\">htmlCacheKey</span><span class=\"token punctuation\">(</span>markdownNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\ncache<span class=\"token punctuation\">.</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span><span class=\"token function\">htmlCacheKey</span><span class=\"token punctuation\">(</span>markdownNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> html<span class=\"token punctuation\">)</span></code></pre></div>","position":{"start":{"line":283,"column":1,"offset":7114},"end":{"line":287,"column":4,"offset":7265},"indent":[1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":288,"column":1,"offset":7266}}}}