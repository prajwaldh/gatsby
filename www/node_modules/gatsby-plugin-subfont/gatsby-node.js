"use strict";

const path = require(`path`);

const _require = require(`child_process`),
      execSync = _require.execSync;

exports.onPostBuild = ({
  store
}) => {
  const root = path.join(store.getState().program.directory, `public`); // TODO make this configurable

  const urlPaths = [`/`];
  const filePaths = urlPaths.reduce((accumulator, currentPath) => `${accumulator} ${path.join(root, currentPath, `index.html`)}`, ``);
  const command = `node_modules/.bin/subfont -i --no-recursive --inline-css --root file://${root}${filePaths}`;
  execSync(command);
};