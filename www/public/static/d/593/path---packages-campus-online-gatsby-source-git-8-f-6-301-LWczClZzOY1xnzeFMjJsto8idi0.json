{"data":{"markdownRemark":null,"npmPackage":{"name":"@campus-online/gatsby-source-git","description":"Source plugin for pulling files into Gatsby from git repositories","keywords":["gatsby","gatsby-plugin","gatsby-source-plugin","git"],"lastPublisher":{"name":"leonardodino","avatar":"https://gravatar.com/avatar/d966b3360c72da18da3d9732acb5200a"},"repository":{"url":"https://github.com/campus-online/gatsby-source-git"},"readme":{"childMarkdownRemark":{"html":"<h1 id=\"gatsby-source-git\"><a href=\"#gatsby-source-git\" aria-label=\"gatsby source git permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-source-git</h1>\n<p>Source plugin for pulling files into the Gatsby graph from abitrary Git repositories (hosted anywhere). This is useful if the markdown files you wish to render can’t live within your gatsby codebase, or if need to aggregate content from disparate repositories.</p>\n<p>It clones the repo(s) you configure (a shallow clone, into your cache folder if\nyou’re interested), and then sucks the files into the graph as <code class=\"language-text\">File</code> nodes, as\nif you’d configured\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-filesystem/\"><code class=\"language-text\">gatsby-source-filesystem</code></a>\non that directory. As such, all the tranformer plugins that operate on files\nshould work exactly as they do with <code class=\"language-text\">gatsby-source-filesystem</code> eg with\n<code class=\"language-text\">gatsby-transformer-remark</code>, <code class=\"language-text\">gatsby-transformer-json</code> etc.</p>\n<p>The only difference is that the <code class=\"language-text\">File</code> nodes created by this plugin will\nalso have a <code class=\"language-text\">gitRemote</code> field, which will provide you with various bits of\nGit related information. The fields on the <code class=\"language-text\">gitRemote</code> node are\nmostly provided by\n<a href=\"https://github.com/IonicaBizau/git-url-parse\">IonicaBazau/git-url-parse</a>, with\nthe addition of <code class=\"language-text\">ref</code> and <code class=\"language-text\">weblink</code> fields, which are\nthe 2 main things you probably want if you’re constructing “edit on github”\nstyle links.</p>\n<h2 id=\"requirements\"><a href=\"#requirements\" aria-label=\"requirements permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Requirements</h2>\n<p>Requires <a href=\"http://git-scm.com/downloads\">git</a> to be installed, and to be callable using the command <code class=\"language-text\">git</code>.</p>\n<p>Ideally we’d use <a href=\"https://github.com/nodegit/nodegit\">nodegit</a>, but it doesn’t support shallow clones (see <a href=\"https://github.com/libgit2/libgit2/issues/3058\">libgit2/libgit2#3058</a>) which would have a significant effect on build times if you wanted to read files from git repositories with large histories.</p>\n<p>Only public repositories are supported right now. But a PR should be simple enough if you want that.</p>\n<h2 id=\"install\"><a href=\"#install\" aria-label=\"install permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install</h2>\n<p>Not published on npm yet, so for now:</p>\n<p><code class=\"language-text\">npm install --save stevetweeddale/gatsby-source-git</code></p>\n<h2 id=\"how-to-use\"><a href=\"#how-to-use\" aria-label=\"how to use permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// You can have multiple instances of this plugin</span>\n    <span class=\"token comment\">// to read source nodes from different repositories.</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-git`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`repo-one`</span></span><span class=\"token punctuation\">,</span>\n        remote<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https://bitbucket.org/stevetweeddale/markdown-test.git`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Optionally supply a branch. If none supplied, you'll get the default branch.</span>\n        branch<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`develop`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Tailor which files get imported eg. import the docs folder from a codebase.</span>\n        patterns<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`docs/**`</span></span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-git`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`repo-two`</span></span><span class=\"token punctuation\">,</span>\n        remote<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https://bitbucket.org/stevetweeddale/markdown-test.git`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Multiple patterns and negation supported. See https://github.com/mrmlnc/fast-glob</span>\n        patterns<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`*`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`!*.md`</span></span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-git`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`repo-three`</span></span><span class=\"token punctuation\">,</span>\n        remote<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https://bitbucket.org/stevetweeddale/markdown-test.git`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">/</span> Multiple <span class=\"token string\">\"sourceInstanceName\"</span> on the same repo via object<span class=\"token punctuation\">.</span>\n        patterns<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          articles<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`docs/articles/*.md`</span></span><span class=\"token punctuation\">,</span>\n          authors<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`docs/authors/*.md`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"how-to-query\"><a href=\"#how-to-query\" aria-label=\"how to query permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to query</h2>\n<p>You can query file nodes exactly as you would node query for nodes created with\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-filesystem/\"><code class=\"language-text\">gatsby-source-filesystem</code></a>,\neg:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allFile <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        extension\n        dir\n        modifiedTime\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Similarly, you can filter by the <code class=\"language-text\">name</code> you specified in the config by using\n<code class=\"language-text\">sourceInstanceName</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allFile<span class=\"token punctuation\">(</span><span class=\"token attr-name\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">sourceInstanceName</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">eq</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"repo-one\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        extension\n        dir\n        modifiedTime\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And access some information about the git repo:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  allFile <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        gitRemote <span class=\"token punctuation\">{</span>\n          webLink\n          ref\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","timeToRead":2}}}},"pageContext":{"slug":"/packages/@campus-online/gatsby-source-git/","id":"067f00ba-2ad3-5e58-9428-6cb2c3939fb6","layout":"plugins"}}