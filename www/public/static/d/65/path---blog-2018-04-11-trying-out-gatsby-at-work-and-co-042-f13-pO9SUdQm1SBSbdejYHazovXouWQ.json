{"data":{"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As a developer, itâ€™s always exciting to try something new. When working with a technology for the first time, I usually ask myself two questions: What can this do for me now, and what will it bring to my future projects?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Most recently, I had the opportunity to lead the first Gatsby project at Work & Co. "},{"type":"element","tagName":"a","properties":{"href":"https://work.co"},"children":[{"type":"text","value":"Work & Co"}]},{"type":"text","value":" is a digital product agency. Our goal is to design and develop engaging user experiences, ranging from websites to mobile applications to e-commerce platforms to chatbots."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Our project was to build a new website for "},{"type":"element","tagName":"a","properties":{"href":"https://www.whittleschool.org/en"},"children":[{"type":"text","value":"Whittle School & Studios"}]},{"type":"text","value":". Whittle is an innovative educator that will soon open campuses in the United States and China."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"video","properties":{"controls":true,"autoPlay":"true","loop":"true"},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"source","properties":{"type":"video/mp4","src":"/whittle-168223eae6bdbd438c55c119744ed326.mp4"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Your browser does not support the video element."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We had a blast building the site, and learned a lot about Gatsby in the process. This post will take you through the different parts of our journey:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#choosing-a-stack"},"children":[{"type":"text","value":"Choosing a stack"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#creating-a-gatsby-workflow"},"children":[{"type":"text","value":"Creating a Gatsby workflow"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#contributing-to-gatsby"},"children":[{"type":"text","value":"Contributing to Gatsby"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"choosing-a-stack"},"children":[{"type":"element","tagName":"a","properties":{"href":"#choosing-a-stack","ariaLabel":"choosing a stack permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Choosing a stack"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"requirements"},"children":[{"type":"element","tagName":"a","properties":{"href":"#requirements","ariaLabel":"requirements permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Requirements"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We started the project with two key requirements:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"1-cms-powered-content"},"children":[{"type":"element","tagName":"a","properties":{"href":"#1-cms-powered-content","ariaLabel":"1 cms powered content permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"1. CMS-powered content"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As a content-heavy site, the project would need a CMS. Our choice here was "},{"type":"element","tagName":"a","properties":{"href":"https://www.contentful.com/"},"children":[{"type":"text","value":"Contentful"}]},{"type":"text","value":", a tool weâ€™d used successfully on a few other products. We set up three Contentful spaces â€” for development, QA, and production/staging â€” with scripts to copy models and content between spaces as needed."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"2-static-site-generation"},"children":[{"type":"element","tagName":"a","properties":{"href":"#2-static-site-generation","ariaLabel":"2 static site generation permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"2. Static site generation"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We also knew that the site would eventually need to launch in both the US and China. This came with a bunch of unknowns on the China side of things: Could we rely on the same build system and CDN for all locales, or would China require a unique setup to account for server performance discrepancies and possible API restrictions?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We didnâ€™t know, and we werenâ€™t going to know for some time, because most of these decisions were going to be made by an external vendor. Not wanting to back ourselves into a corner, we decided to use a static site generator. No matter what devops we wound up with, we could bank on compiling static files and putting them "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"somewhere"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"All of this begged the question: â€œWhatâ€™s a good static site generator that works with Contentful?â€"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"enter-gatsby"},"children":[{"type":"element","tagName":"a","properties":{"href":"#enter-gatsby","ariaLabel":"enter gatsby permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Enter Gatsby"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Iâ€™d already heard a bit about Gatsby, and as I looked into it further, I noticed a few things that got me really excited:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"old-friends"},"children":[{"type":"element","tagName":"a","properties":{"href":"#old-friends","ariaLabel":"old friends permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Old friends"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Gatsby is built on React, something our team already knows and likes. We use React (or React Native) for most of our projects at Work & Co because we love the declarative syntax, lifecycle hooks, and modular architecture. In addition to React, Gatsby is compatible with several modern CSS strategies, including our favorite: CSS Modules."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"prefetched-pages-ï¸"},"children":[{"type":"element","tagName":"a","properties":{"href":"#prefetched-pages-%EF%B8%8F","ariaLabel":"prefetched pages ï¸ permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Prefetched pages âš¡ï¸"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When we decided to use a static site generator, we assumed weâ€™d be building a classic "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"static site"}]},{"type":"text","value":", with each route change requesting brand new HTML from the server. For a small, simple site, we thought this was good enough, but Gatsby gave us one better: pre-fetching, out of the box. This meant that our site would feel like a single page app while still benefiting from the flexibility and improved performance of a static site."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"contentful-support"},"children":[{"type":"element","tagName":"a","properties":{"href":"#contentful-support","ariaLabel":"contentful support permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Contentful support"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Gatsbyâ€™s "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/tree/master/examples/using-contentful"},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"using-contentful"}]}]},{"type":"text","value":" sample project made it very easy to get started with the "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-source-contentful"},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gatsby-source-contentful"}]}]},{"type":"text","value":" plugin. The code demonstrated how to generate dynamic URLs and support multiple Contentful locales, which was exactly what we wanted to do!"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"graphql"},"children":[{"type":"element","tagName":"a","properties":{"href":"#graphql","ariaLabel":"graphql permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"GraphQL"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Getting to play with GraphQL was a definite plus (Iâ€™d been jealous of coworkers using it on other projects!), and the built-in GraphiQL query constructor helped us all get used to the syntax. GraphQL was a natural fit for traversing Contentful relationships, and Gatsbyâ€™s implementation allowed us take advantage of the Contentful image API to automatically crop our assets."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"putting-it-all-together"},"children":[{"type":"element","tagName":"a","properties":{"href":"#putting-it-all-together","ariaLabel":"putting it all together permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Putting it all together"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As I mentioned, Gatsbyâ€™s "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/tree/master/examples/using-contentful"},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"using-contentful"}]}]},{"type":"text","value":" sample project already took us several steps in the right direction; the only outstanding question was how to support a more complex data structure."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"My last project involving CMS integration was "},{"type":"element","tagName":"a","properties":{"href":"https://www.aldoshoes.com"},"children":[{"type":"text","value":"Aldo"}]},{"type":"text","value":", a Work & Co designed and developed e-commerce and content site that launched in 2017. Here, we used a modular CMS strategy, where CMS-driven pages were basically stacks of modules that editors could mix and match."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I planned to use a similar technique for this project; we would have one core content model, a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ContentPage"}]},{"type":"text","value":", and then other models like "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"BodyText"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"SectionTitle"}]},{"type":"text","value":" that could be stacked as children. A "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ContentPage"}]},{"type":"text","value":" would link to "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"BodyText"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"SectionTitle"}]},{"type":"text","value":" via a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"modules"}]},{"type":"text","value":" field and have some other non-modular fields as well, like "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"slug"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"headline"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hereâ€™s a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"modules"}]},{"type":"text","value":" field on a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ContentPage"}]},{"type":"text","value":" currently in use on production:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/a6a89f283aa64891fff87f15f56bad06/c3c14/modules.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 38.3125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA0UlEQVQY042RTU4EIRBGuf8V1I0TD6Jxogcw8QAuXNjd/DZVQBX4dY8LFzOT+VIJBHi8Cpg1c+997PkbbsiJMD9rXLzz3ocQnPOlVGyo9rMlopARFy61tmYmTpOzFlyIi7UxRVG9UitxykRlo43lbHdzjBF6Zr6kPRW0mRjmBvNMefEbCzVa16sRkX9tiymDtIRR42iRksc2XgO5xPfRYaWNFnP/Oj8ep8NxfniZPr4SKKrKDafOB+sQtP0ic/e8PL27w5vD5PObRXsgWYve8mG/7njRC/7svg0AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;","alt":"modules field","title":"","src":"/static/a6a89f283aa64891fff87f15f56bad06/75efb/modules.png","srcSet":["/static/a6a89f283aa64891fff87f15f56bad06/bea6c/modules.png 197w","/static/a6a89f283aa64891fff87f15f56bad06/9f6c6/modules.png 393w","/static/a6a89f283aa64891fff87f15f56bad06/75efb/modules.png 786w","/static/a6a89f283aa64891fff87f15f56bad06/43bd5/modules.png 1179w","/static/a6a89f283aa64891fff87f15f56bad06/6a30e/modules.png 1572w","/static/a6a89f283aa64891fff87f15f56bad06/c3c14/modules.png 1600w"],"sizes":["(max-width:","786px)","100vw,","786px"]},"children":[]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  \n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Figuring out how to set this up in GraphQL took some trial and error, but we settled on using "},{"type":"element","tagName":"a","properties":{"href":"http://graphql.org/learn/queries/#inline-fragments"},"children":[{"type":"text","value":"inline fragments"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The GraphQL looks like this:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ContentfulContentPage {\n  headline\n  slug\n  modules {\n    __typename\n    ... on ContentfulBodyText {\n      # fields specific to BodyText\n    }\n    ... on ContentfulSectionTitle {\n      # fields specific to SectionTitle\n    }\n  }\n}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After wiring up this new architecture, integrating new modules became a straightforward task."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"schema"},"children":[{"type":"element","tagName":"a","properties":{"href":"#schema","ariaLabel":"schema permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Schema"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We ran into one schematic limitation working with Gatsby thatâ€™s helpful to be aware of at the onset of your project:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/graphql/graphql-js"},"children":[{"type":"text","value":"GraphQL"}]},{"type":"text","value":" requires all queried fields to be defined in a schema, and Gatsby generates this schema from your siteâ€™s existing data. This means, for example, that if you donâ€™t have a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Carousel"}]},{"type":"text","value":" content model on your site right now, but you have a GraphQL query checking for it, the site will fail to build."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The are some really promising discussions on the topic on GitHub, including an "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/issues/4261"},"children":[{"type":"text","value":"RFC to refactor Gatsbyâ€™s schema generation"}]},{"type":"text","value":", but in the meantime, most users are getting around this issue by creating placeholder content on Contentful (or whatever their data source is) to guarantee a fully built-up schema."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This got the job done in our case, and we augmented the approach by creating a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"DummyContentIndex"}]},{"type":"text","value":" model on Contentful linking to all placeholder content. (In retrospect, I wish I had picked the a more PC name, like â€˜PlaceholderContentIndex` ðŸ˜‰.) Using this approach, we could inform our Contentful scripts to make sure placeholder content was copied to the production environment during deploys, so that new models would not break the build."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"netlify"},"children":[{"type":"element","tagName":"a","properties":{"href":"#netlify","ariaLabel":"netlify permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Netlify"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"While we were getting familiar with our Gatsby/Contentful setup, we also needed to figure out how to build and deploy our work. We found several articles advocating for a Gatsby-Contentful-"},{"type":"element","tagName":"a","properties":{"href":"https://www.netlify.com/"},"children":[{"type":"text","value":"Netlify"}]},{"type":"text","value":" stack, and learned it could support a workflow like this one:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/128fcc07ea64a86f88d5960efafafdb2/c390b/netlify.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 671px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 99.55290611028317%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACqElEQVQ4y5VUSVMaYRCd35dflZjcPKcqtxysHHIxiYAYQzAmJlpCYABlFRDZhmH2GfblpfsTDAxaald19Sxvevp7r7slrzeAoSmwDBWGacOybNi2A5OibpiYzWZgm8/nwvm5obWg6xphHViE1XQDaleD7biQTGeIn8F3OI+8x/FJDIeH37Af/orI9yMUS2VMptO7hGx5evZh+wV+HOwgEv2NcPgAuXyRvIRmsw3Joax/zuI4jyWRzRVwcZlDKp2hmEW90cJksp6w3mzhV3gXGTmBDGEzF1nUbhq4rtWhqhokPtISPB6P0ev1MRgM4Hke+v3+WjKOdxQs8I7jCLdtG6PRGBJWjAH8gt0wDEre20h4ezETKUeE1zTm0oJpmuJ7yXU9BEP7goubekOU32wpaLUVtJUOpj4OO502Dko3+FtTUatWxVEZx/zpJI5UrlSx9foNXr7awl4ghN1PX4QgheIVSlcV4nDyX2WKteskTkNvET+REQiFEAjuCxzzL0ThClOpDJJJmf6koqvp6Khd8Velo65VyN7VdRinJzALBaimBYVwosJWm9rOWueQP2DumOThcIiHbEClGiwEcec3aanc0l3XFclY5TmRPCXnXpxOZ4J07gCXWq1PggnMovKlS6s3q6bSsXfkFI5yRVymLxBPyKLRK9WaEG31VGsJN/pscc2cbEfP8DGWxnH0CJ/3gojFEyiSAKysv5Bl3OBw+YJ70DIsODS7DgnneT2wgJa4dxd4bJxMuo90P4i5NUms24VgPYi7N+FqldyDFk0Nb5I2NXqXIovi5+7JFY5GI8GXzH0qp2mSmjTfgwerezQhxzFVyUPP/ckz7t+PT0p4XwXMHTf8xqJ4ToXMIbdPLl+4248930p7dkKF5rtcriJfKKFBy/UxDv8BRDz3cPYwtCUAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;","alt":"our Netlify setup","title":"","src":"/static/128fcc07ea64a86f88d5960efafafdb2/c390b/netlify.png","srcSet":["/static/128fcc07ea64a86f88d5960efafafdb2/cc176/netlify.png 197w","/static/128fcc07ea64a86f88d5960efafafdb2/0f5dc/netlify.png 393w","/static/128fcc07ea64a86f88d5960efafafdb2/c390b/netlify.png 671w"],"sizes":["(max-width:","671px)","100vw,","671px"]},"children":[]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  \n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Unlike a single page app, which would fetch data from Contentful on the fly, our static site must rebuild anytime an editor publishes new or updated content. At the same time, we need to rebuild whenever code is updated on GitHub. With Netlify (and Contentfulâ€™s webhooks), I was able to set all of this up in about five minutes."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Although our China setup was still a bit of a mystery, we moved forward with dev, QA, and staging environments on Netlify, and wound up using it for US production as well."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Netlify exceeded our expectations; it solved our immediate workflow needs, and also automatically created builds for all remote branches and PRs. This is especially helpful at a company like ours where we often want to share WIP links with our design team to get feedback on our implementation."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Gatsbyâ€™s "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-netlify"},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gatsby-plugin-netlify"}]}]},{"type":"text","value":" also helped us out here with its "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-netlify#redirects"},"children":[{"type":"text","value":"redirect support"}]},{"type":"text","value":"; any redirects we wrote using Gatsbyâ€™s "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"createRedirect"}]},{"type":"text","value":" action were automatically deployed to Netlifyâ€™s "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"_redirects"}]},{"type":"text","value":" file so they would function the same way during local development as they did on Netlify."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"creating-a-gatsby-workflow"},"children":[{"type":"element","tagName":"a","properties":{"href":"#creating-a-gatsby-workflow","ariaLabel":"creating a gatsby workflow permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Creating a Gatsby workflow"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"dev-pages"},"children":[{"type":"element","tagName":"a","properties":{"href":"#dev-pages","ariaLabel":"dev pages permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Dev pages"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Building off of Gatsbyâ€™s Contentful example, we were able to easily support dynamic urls and one level of nesting, so a page with the slug "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"my-page"}]},{"type":"text","value":" whose parent had the slug "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"my-parent"}]},{"type":"text","value":" could have the path "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/my-parent/my-page"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This worked so well that at first I was sure we wouldnâ€™t even need to create any pages with static urls, but these wound up coming in handy for development and testing. We settled on a structure like this:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"|-pages/\n  |-dev/\n    |-article-components.js\n    |-home-components.js\n    |-validator.js"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We used our static pages for three purposes:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"1-pre-integration-qa"},"children":[{"type":"element","tagName":"a","properties":{"href":"#1-pre-integration-qa","ariaLabel":"1 pre integration qa permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"1. Pre-integration QA"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We dropped our stateless components into paths like "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/dev/article-components"}]},{"type":"text","value":" so our QA team could make a first pass on our UI implementation. Later, other team members would integrate these components into Contentful, where they could be tested against real data."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/710855596bcc7a97cf3222cfeca8933e/eeae4/validator.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 51.74203113417346%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABl0lEQVQoz42RS04CQRCG5xS6MV4Fg4m3UC/BFVq3PO6CiUEXBGFg5WJ8kMCAsmEjDNPTM/0uq3uABTGRTv50pavyVf3VQfj4cBa9vpDxe3QXvX2QxWJBxuNPEk8n5Ovrm8znczKbTUkcO8UYx2SOmmI8mUy83HsURfftdvs8eO48VRndgBQcCpYCZwUIYWBNJWQ0BZblwBWAsQBgDQiMC6Hhr9PpdK6CQRhWMsbUz2olk2QtlsulXK3WUhuQSkk8SiptpbWltEFp42Nk7CSMMdDv96vBcDissCwDmiRuIsuFACkF5IzhLffd8zwHhm8C8wLdcM6BUgpKKT+7q/HAEIEFy0BmFLTgdgfQWoPripOgwMeHcjXWFWyBg8GgGozchK5zOY0tc6VK2L+yCPfcMAxLy85ekiQWbVmE+xvteuoxB+vM3vJoNKoUvLCbzcYg1KRpahBm0I5ra7bFx6i03Ov1LjgumeIOEeYXneEnudit4kjbfu/dbvcyqNVqJ61W67rZbN4eqtFo3Nbr9f39l3Y5ZNwg6/QXO9rD40cu1e0AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;","alt":"our content validator","title":"","src":"/static/710855596bcc7a97cf3222cfeca8933e/75efb/validator.png","srcSet":["/static/710855596bcc7a97cf3222cfeca8933e/bea6c/validator.png 197w","/static/710855596bcc7a97cf3222cfeca8933e/9f6c6/validator.png 393w","/static/710855596bcc7a97cf3222cfeca8933e/75efb/validator.png 786w","/static/710855596bcc7a97cf3222cfeca8933e/43bd5/validator.png 1179w","/static/710855596bcc7a97cf3222cfeca8933e/eeae4/validator.png 1349w"],"sizes":["(max-width:","786px)","100vw,","786px"]},"children":[]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  \n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"2-contentful-validation"},"children":[{"type":"element","tagName":"a","properties":{"href":"#2-contentful-validation","ariaLabel":"2 contentful validation permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"2. Contentful validation"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Contentfulâ€™s built-in validations could only take us so far, and sometimes we needed to enforce rules (or give recommendations) outside the scope of what Contentful could do. For example, when stacking modules on a page, we consider it a minor validation error for the page to end in a carousel (they look kind of lonely)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To enforce such validations, we set up a static validator page that runs a report on all of our Contentful articles."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"3-communicating-site-status"},"children":[{"type":"element","tagName":"a","properties":{"href":"#3-communicating-site-status","ariaLabel":"3 communicating site status permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"3. Communicating site status"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"That same validation page also served as a site status page, containing the time and GitHub hash of the last build. The build time was particularly important. Since builds happen quite frequently (whenever content is updated), itâ€™s helpful for the team to be able to easily see the time of the last build for a given environment. (We also had Netlify integrated to Slack, but this contained notifications about every branch and was a bit noisy for a less tech-savvy audience.)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Capturing this information was easy and only took a few additional lines in our "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"createPages"}]},{"type":"text","value":" hook. Netlify exposes a lot of interesting "},{"type":"element","tagName":"a","properties":{"href":"https://www.netlify.com/docs/continuous-deployment/#build-environment-variables"},"children":[{"type":"text","value":"environment variables"}]},{"type":"text","value":" (including some I hope to play with more on a future project, like "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WEBHOOK_TITLE"}]},{"type":"text","value":", which can help you deduce the origin of the current build). In order to display these variables on the frontend, we needed to rename them to begin with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"GATSBY_"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"exports.createPages = () => {\n  ['COMMIT_REF', â€˜BRANCHâ€™]].forEach((variableName) => {\n    // only variables beginning with GATSBY_ are available client-side\n    process.env[`GATSBY_${variableName}`] = process.env[variableName];\n  });\n};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After that, we just added one more variable to store the current time:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"process.env.GATSBY_BUILD_TIME = Date.now();"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"covering-our-tracks"},"children":[{"type":"element","tagName":"a","properties":{"href":"#covering-our-tracks","ariaLabel":"covering our tracks permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Covering our tracks"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We filtered out our dev pages in production by adding a simple "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"onCreatePage"}]},{"type":"text","value":" hook to our "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gatsby-node"}]},{"type":"text","value":" file:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"exports.onCreatePage = ({ page, boundActionCreators }) => {\n  if (process.env.GATSBY_ENV === ENV.PRODUCTION) {\n    const { deletePage } = boundActionCreators;\n    if (/^\\/dev\\//.test(page.path)) deletePage(page);\n  }\n};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"staging"},"children":[{"type":"element","tagName":"a","properties":{"href":"#staging","ariaLabel":"staging permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Staging"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A lot of our modules include many different properties coming together to form an intricate design, so itâ€™s important to offer editors a chance to preview their changes before theyâ€™re published on production."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"contentful-preview-api"},"children":[{"type":"element","tagName":"a","properties":{"href":"#contentful-preview-api","ariaLabel":"contentful preview api permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Contentful Preview API"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We use Contentfulâ€™s Preview API, which "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gatsby-source-contentful"}]},{"type":"text","value":" "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-source-contentful#using-preview-api"},"children":[{"type":"text","value":"supports"}]},{"type":"text","value":", for this purpose. To set this up, we also needed to add a new webhook just for our "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"staging"}]},{"type":"text","value":" branch on Netlify and wire this up on Contentful."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"generating-preview-links"},"children":[{"type":"element","tagName":"a","properties":{"href":"#generating-preview-links","ariaLabel":"generating preview links permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Generating preview links"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Contentfulâ€™s "},{"type":"element","tagName":"a","properties":{"href":"https://www.contentful.com/r/knowledgebase/setup-content-preview/"},"children":[{"type":"text","value":"Content Preview"}]},{"type":"text","value":" feature allows developers to expose preview links in the sidebar, so editors can easily move between editing an entry and previewing its content on a staging environment."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hereâ€™s how preview links look in action:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/8927f1dfbb6d9a068809594e75206837/4298c/preview-links.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 345px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 134.7826086956522%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsSAAALEgHS3X78AAAENElEQVRIx6VVS2tkVRDufyEMOG5c+AMGVIYRFBFdiIIIzh+ScRbixsdijC4mIOggRmdw4cLFiEkm6U7SdHq6O51+3Pf71fd9k8+qc293OkMYFC98VNV51Dl16qu6rSTLEcYJwkWCKEmR5sX/QitOM8iGA0kzoZg24jQHjy0IV8n4Spv20MX4ci32WlU58uoM5TmQliXiPEdalA0KJATWWSZ5Y5f1XEQOObIoTWuHQZzj8SDGeHiKQX8IXTVgmy40SYepWWTbsHQHBummbsOxfCGXdpbkOCvpMkVVhxwlGf6a29ifjfC4f4TOfIyeqWCP5J50in15giekM9pkH0hTdNU5dsdDoU9CB5OFC2nhibBbfprg9vgHvD7cwFvj+7g5+A7vjjZxe/oAn0we4AOa++j0R3w8+QnvnWzS/AZu0Zo3ht8LefP4Hm71N/D+001YSYSWm8R4rf0NXtj+FNd37uLa9h28svcF3jnawNtH3+LVztd48/AePuzdx43OV7i2cwfXd+/ixR3GZ3iJ5Mt7n+NG+0sYcYjWIsvwpz3GI7OP382BwEOjj1/0HraMHn4j/VfjGD9rXWxpPTzS+3i4Bra3aO0f5lAkppVS3JG3QOQuEDqRkIkfIyZETj3OQAmgQi2fRTMuksKpNj1fQHc8mH4AOwgFDB5zPTHO9OBonocVD4uyqlFVyIlfWVEjZ5Q1eF3SkPd5EDf0o1iUHkuugKs2/4fSyzEnMsu6hRmT2g/FxHpJ/VusQubwlpIH2ZG4WXPT+Jk6vuqgSyFblAjTC2At0dia5QrpBBElKRKJYt2iKKz19WJPWFcKnzg3KFzdxFyvpURdZzCVsN8bYKfTxe5BDx3S/253sU0YzRVIqz0NyOb3b2gTwHBr2gg0VOEx1XKgMOgQ1hk8pzVY38dPIRy6FIYXLrDgNhSnouHy9YVN4CiSxmad19RZzQU7LtGGF5zMZPRGUwwmssj2eK7SmIKZYojMn0oaVNOhN3UworUTWRcH8mFTWaN9EoZTmQ7M6izX5K1WhM6a7BbUdKnn4oyr6/xcoDxjUP+jObZ535IJqyxnRXHhrKFQRZt834csKTAMA7puwDBNWJaNMIpgkq4oGhzHBX9lVV04VAwbEoUqHpyowjq/T0bdgx3x5iAIBGzbQcw/tTAQc6wLh2W1XnoLkRiHeMbJcYhTXNthSHwzLQTES8/z4Lo12InjugjFAba4HUe0cijCXmsA/B70PMipgyiyAk2l0GijZVl0gIE0IUZE9WGqqq4cxsvSkw0T3cEYh/2RCNulW3aOh0TmIXr08+qdTOlZiLhZhZmZYm4lMPxMOOLEiUskzV+P61WzXaKKQnTQRBl59ASHdED7eISDp/SzIscnkko3KKgIEsh2TH2TuLiW3WTZbZatadkHl2GvmkZx0TzEuoL7Zy0vtbXm6f4BrWnhSRL45dEAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;","alt":"preview links in the Contentful sidebar","title":"","src":"/static/8927f1dfbb6d9a068809594e75206837/4298c/preview-links.png","srcSet":["/static/8927f1dfbb6d9a068809594e75206837/2e187/preview-links.png 197w","/static/8927f1dfbb6d9a068809594e75206837/4298c/preview-links.png 345w"],"sizes":["(max-width:","345px)","100vw,","345px"]},"children":[]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  \n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Content Preview dashboard lets developers create these links and determine where each of them will lead."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/bbc25fcf119649958d4ac85527c1851b/c3c14/content-preview-dashboard.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 60.74999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACeElEQVQoz52PzUsUYRzH5+DFQ7cOIbXjKbrkS2mQomlChFBoBZ26dBAS1mDwkiYU6O4eiiAIonNUZ/8Bgw133V3R3Xl1XUVRd2dmRx13Zuf9eX49o/aGRdEPPnx/z9vneR4q9Xa2sVzKRXe0zXFNUZk9TWM812G0qsoocoWpqjKjKr8SzoeoylHKcnl8fa0U/fTxQyM19piJpBYywEki5NgCLPMC8GIRWF4ETlgBQVoFXioeprhy1HNknT+muLYB65tbMJeah/sjDyPUWTpCt14dqLV13USt3Te885d6/Asd1/0rA3f99t7bJO/4Hf3D/uW+IZJDfjvJlr57fkvvsH+xa9Bv6bnldXYPorbOazXq1Gmaio6M0tnlvDXHLkFyPoPnkimcTGUxv7KGWXH1JFIJ86UtzK9u4vRiASdzS/hB8j3Evsxanyfe0FQ8nqBt17UcFIDn+ThACBDG8KcKVxzPBy9AYLk+GLaLi/4BbNkH1rvpl6EwTpumaZmGCa7rfjdhIv0ZRC4iDTiuB2VZhe2yTKiQXsG6pkNNr1mTz58dCev1ulUzjPAQ/p3sG2GFwo3tHdipyIeUKzKW1Spo+7o1MxOjqUQicfhCXdchCIK/Cl3y3e1dDeQqQVFDKTbqFtRtx3oyMUmE8RhtmHXTtu1wf0BAIURwgnCevBCRryKlqiFtbx+p2m6g1wyoEcfTqSmaev3qRfOBaePw5n+tqmeDhlzY95xQBJbjgmnZeHom1kxFo2NNoiCkOY4T8vl8gRRLkuV4npUkiRXFH4RjXhDZhdwim8pkCFk2nckWFrI5ocBx6Uejo00UqQbCGUKEcO4/iRw7Gr4CsBbW/Hq/aTgAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;","alt":"Contentful's Content Preview dashboard","title":"","src":"/static/bbc25fcf119649958d4ac85527c1851b/75efb/content-preview-dashboard.png","srcSet":["/static/bbc25fcf119649958d4ac85527c1851b/bea6c/content-preview-dashboard.png 197w","/static/bbc25fcf119649958d4ac85527c1851b/9f6c6/content-preview-dashboard.png 393w","/static/bbc25fcf119649958d4ac85527c1851b/75efb/content-preview-dashboard.png 786w","/static/bbc25fcf119649958d4ac85527c1851b/43bd5/content-preview-dashboard.png 1179w","/static/bbc25fcf119649958d4ac85527c1851b/6a30e/content-preview-dashboard.png 1572w","/static/bbc25fcf119649958d4ac85527c1851b/c3c14/content-preview-dashboard.png 1600w"],"sizes":["(max-width:","786px)","100vw,","786px"]},"children":[]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  \n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here, weâ€™re configuring Contentful to expose a preview link for every "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ContentPage"}]},{"type":"text","value":" containing its Contentful ID in the path, so an entry with the ID "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"123"}]},{"type":"text","value":" would have the URL "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"mystagingurl.com/en/123"}]},{"type":"text","value":". To support Chinese, we wired up an additional preview link in the format "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"mystagingurl.com/cn/123"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" Contentful lets you generate preview links for as many model types as you like, but in our case, we only needed to generate preview URLs for our "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ContentPage"}]},{"type":"text","value":" model. Since all other models are displayed inside of "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ContentPage"}]},{"type":"text","value":"s, we determined that viewing a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"BodyText"}]},{"type":"text","value":" module all on its own would have no value."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"building-staging-urls"},"children":[{"type":"element","tagName":"a","properties":{"href":"#building-staging-urls","ariaLabel":"building staging urls permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Building staging URLs"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Backing up a second, letâ€™s review why we selected the preview URLs "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"mystagingurl.com/en/123"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"mystagingurl.com/cn/123"}]},{"type":"text","value":". Our staging environment â€” like all of our environments â€” already has all of the pages deployed at their actual paths (eg "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/en/my-parent/my-parent"}]},{"type":"text","value":"), so why canâ€™t we just point editors there?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hereâ€™s why: Contentfulâ€™s Content Preview dashboard doesnâ€™t give you that kind of flexibility. To get around this, we opted to build special paths just for the staging environment. Hereâ€™s how we set it up in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gatsby-node.js"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"// Always create a page at the regular path\ncreatePage({\n  component: contentPageTemplate,\n  context,\n  path: `${language}/${slugs.join('/')}/`,\n});\n\n// On staging, recreate the page with a path corresponding to its ID\nif (process.env.GATSBY_ENV === ENV.STAGING) {\n  createPage({\n    component: contentPageTemplate,\n    context,\n    path: `${language}/${id}/`,\n  });\n}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"build-times"},"children":[{"type":"element","tagName":"a","properties":{"href":"#build-times","ariaLabel":"build times permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Build times"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So now, we have Contentfulâ€™s preview links wired up to display the current entry in the staging environment, with data provided by the preview API. This is great, except that if an editor makes a change and immediately clicks on â€œOpen previewâ€ on Contentful, theyâ€™ll see old data â€” our static site is still building!"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/4698ec160c655e633a274dc28464c0ec/b305a/staging-environment.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 62.24226804123711%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACdElEQVQoz4WQ7U4TQRSGe0eEixGCJHIdJCZegD/WKE3UqNGApA1qYvCH0AJSClLbSEtrv3a3LS2lpbT70e7H7M7sHM8shWgkcZM37zlnzvvszkZyB6mZWrX4QlWa0Wq9EVWb7aiitqJq4wzVjjawF7PbeuqNZuf2rNk6X6nU1Jd7B4ezkdPs10WAHgBpAzFk8EwFXQF/rAIEOIcB6vJf5/1p35/WQ8gcf1mKlPPb9wJbgcCWPa3zwx+2vlPrMk/tYZF6ZpW6epkS1OTqlBKjQu1RKazNy0I4Z1bdp5O6B64KtUJyIVKvy3OIB8ZYYNsOd11X1EA9D6jvg4+9j7VPyLVPRSkNhbscPRCMuqzcR2B9Hu8GHrED17E4owRMfQjj0QBcewx6/xyIPQHjqgfOWAd7bIBlaODgbDQcCOe+54RAWZZvgBzf6ga2NeHWxIQhLhoYmmBYF2HHuu1D4Y6JvQDiPhfZO4EecTj1CTAqruiIGRCEiaCpa3gLJzy78WnNcfduIMK4pg3Dr3BdGwgGTVODbrcDg0EPxJlh6CFQ00YwNk381y737gKKYcAoT+wlIZ1LQ6acg3zlBJq9NrT6bSicVeDtxzVYXn4AsbVlePRwHj7EHgsOJ671F3AOQQLo4xfSbv+CpQppdlTJsppaZsVSlmUqP9m30jE7ymfYfmqT/TpJsNwxeinNMEuJa/vAA0DWQgSpi/DHQwMfihcydPUe/kcblFoeDqtZ6JgD+N+jKMpSJBaLzSSTiaeJ7S0pmdiWttBfxd5J6xvvpdU3z6WN9VXpyesV6dPmZym1n5J2dpKohLS7e+0iJ7STTDyLx+OzvwEjVFQP78ak8QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;","alt":"Our staging environment","title":"","src":"/static/4698ec160c655e633a274dc28464c0ec/75efb/staging-environment.png","srcSet":["/static/4698ec160c655e633a274dc28464c0ec/bea6c/staging-environment.png 197w","/static/4698ec160c655e633a274dc28464c0ec/9f6c6/staging-environment.png 393w","/static/4698ec160c655e633a274dc28464c0ec/75efb/staging-environment.png 786w","/static/4698ec160c655e633a274dc28464c0ec/43bd5/staging-environment.png 1179w","/static/4698ec160c655e633a274dc28464c0ec/b305a/staging-environment.png 1552w"],"sizes":["(max-width:","786px)","100vw,","786px"]},"children":[]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  \n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To solve this, we added a small overlay to all staging environment pages including the time of the last build, plus some code to automatically refresh the page every 30 seconds. When the page refreshes to reveal an updated build time, editors can click â€œStop pollingâ€ to disable this functionality, and â€œHideâ€ to minimize the overlay."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"final-thoughts"},"children":[{"type":"element","tagName":"a","properties":{"href":"#final-thoughts","ariaLabel":"final thoughts permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Final thoughts"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Our staging setup wasnâ€™t perfect: Contentfulâ€™s Preview API felt a little clunky, and its â€œDiscard Changesâ€ button didnâ€™t always work, with the â€œpending changesâ€ status sometimes persistingâ€¦ forever."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"/contentful-pending-changes-967dd66030554ce08bb09aa7a770d00b.gif","alt":"Contentful pending changes not disappearing"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For editors, it wasnâ€™t always clear what was live and what wasnâ€™t. On future projects, I hope to experiment with a similar approach using separate Contentful spaces, like we had for our dev and QA environments."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"contributing-to-gatsby"},"children":[{"type":"element","tagName":"a","properties":{"href":"#contributing-to-gatsby","ariaLabel":"contributing to gatsby permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Contributing to Gatsby"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Going into this project, I had one open source contribution to my name: an update to "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/teampoltergeist/poltergeist"},"children":[{"type":"text","value":"poltergeist"}]},{"type":"text","value":"â€™s key modifiers circa 2015. Sure, I felt a little guilty for using so many open source libraries without giving back to the community, but I also worried I didnâ€™t have the time or â€” more importantly â€” the confidence to get more involved."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Something clicked with Gatsby, though; it was young enough that I could see concrete areas for improvement, but established enough to have the tools and structure in place to facilitate contributions. Kyle and the rest of the community were also great resources, providing quick feedback and helpful ideas for improvements."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"starting-small"},"children":[{"type":"element","tagName":"a","properties":{"href":"#starting-small","ariaLabel":"starting small permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Starting small"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/ee481309ae887519c4903b22f22d654f/c3c14/worlds-smallest-pr.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 15.687500000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAiUlEQVQI10WLyw7CIBAA+/+/qDFa+mTZ8mihysKupDFxMoe5TEeAvEf3UnB7hhV2wAO3BPhW07nqgTTWcN/6B85D0FM08HHjG/pz8RK7krMw79bqeQUNKR61VrlgZirEwtZZMGgMpnSy/GjR5XER689Fb73yaspoxQdxlz5Qu0slqplKs8W/S/kCpzirYChbqYwAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;","alt":"A very small pull request","title":"","src":"/static/ee481309ae887519c4903b22f22d654f/75efb/worlds-smallest-pr.png","srcSet":["/static/ee481309ae887519c4903b22f22d654f/bea6c/worlds-smallest-pr.png 197w","/static/ee481309ae887519c4903b22f22d654f/9f6c6/worlds-smallest-pr.png 393w","/static/ee481309ae887519c4903b22f22d654f/75efb/worlds-smallest-pr.png 786w","/static/ee481309ae887519c4903b22f22d654f/43bd5/worlds-smallest-pr.png 1179w","/static/ee481309ae887519c4903b22f22d654f/6a30e/worlds-smallest-pr.png 1572w","/static/ee481309ae887519c4903b22f22d654f/c3c14/worlds-smallest-pr.png 1600w"],"sizes":["(max-width:","786px)","100vw,","786px"]},"children":[]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  \n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If youâ€™re nervous about contributing to a library, do what I did: make a really small change, and write a really long explanation about it :). "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/pull/2917"},"children":[{"type":"text","value":"My first Gatsby PR"}]},{"type":"text","value":" removed three lines of code that I determined were overriding Contentfulâ€™s default image cropping. It was a low-pressure change that nevertheless helped me feel like part of the community."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"reading-the-documentation"},"children":[{"type":"element","tagName":"a","properties":{"href":"#reading-the-documentation","ariaLabel":"reading the documentation permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Reading the documentation"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We developers often take pride in how far weâ€™re able to get "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"without"}]},{"type":"text","value":" reading the documentation â€” at least I know I do â€” but, as I came to make subsequent PRs to Gatsby, I found the "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/blob/master/CONTRIBUTING.md"},"children":[{"type":"text","value":"contributor guidelines"}]},{"type":"text","value":" to be incredibly helpful."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In particular, the documentation will show you how to use your local Gatsby clone and "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-dev-cli"},"children":[{"type":"text","value":"gatsby-dev-cli"}]},{"type":"text","value":" to:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Watch for your local changes to Gatsby packages"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Recompile packages on-the-fly"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Copy these packages into your projectâ€™s "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"node_modules"}]},{"type":"text","value":" folder to test as you go"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If youâ€™ve ever used "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"yarn link"}]},{"type":"text","value":" to modify a dependency locally, this provides a similar experience."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"branching-off"},"children":[{"type":"element","tagName":"a","properties":{"href":"#branching-off","ariaLabel":"branching off permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Branching off"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As I said, I was impressed by the Gatsby teamâ€™s quick turnaround time with PR approvals, but even so, when doing client work on a tight deadline, it can be stressful waiting for your changes to be merged. For ultimate peace of mind, you should be able to move forward using your forked work even if â€” in the worst case scenario â€” your PR is never approved."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Of course, this is something developers do all the time. They push their fork to Git and link to it in their projectâ€™s "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"package.json"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"â€œdependenciesâ€: {\n  \"some-library\": \"git+ssh://git@github.com:workco/some-library.git#cool-feature\"\n}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Gatsby, however, uses a monorepo architecture, so pushing up a fork with a change to a specific package is not such a trivial manner; npm and yarn just donâ€™t support it. (If you feel like being depressed, check out the npm thread about "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/npm/npm/issues/2974"},"children":[{"type":"text","value":"supporting GitHub paths to monorepo packages"}]},{"type":"text","value":".)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Our workaround was to create a new repo for the package in question and push the build directly to GitHub. Hereâ€™s how it would work if you were making an update to, say, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gatsby-source-contentful"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Go to your local fork of Gatsby, on the branch with your changes, and run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"yarn watch"}]},{"type":"text","value":" to compile a built version of your modified package."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Copy that package to a new directory "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"cp -a packages/gatsby-source-contentful path-to-my-repo"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Push the contents of this directory to GitHub and link it in your "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"package.json"}]},{"type":"text","value":" as usual."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"following-up"},"children":[{"type":"element","tagName":"a","properties":{"href":"#following-up","ariaLabel":"following up permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Following up"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Overall, our work with Gatsby was an exciting venture into a young, promising library, and I look forward to using it again on future Work & Co projects. Iâ€™m by no means an expert on Gatsby, Contentful, or Netlify â€” my goal is to share experiences others could draw insights from â€” so if you have any feedback or questions related to our approach, Iâ€™d love to hear from you "},{"type":"element","tagName":"a","properties":{"href":"mailto:mogin@work.co"},"children":[{"type":"text","value":"by email"}]},{"type":"text","value":"."}]}],"data":{"quirksMode":false}},"excerpt":"As a developer, itâ€™s always exciting to try something new. When working with a technology for the first time, I usually ask myself twoâ€¦","timeToRead":15,"fields":{"slug":"/blog/2018-04-11-trying-out-gatsby-at-work-and-co/","publishedAt":null},"frontmatter":{"title":"Trying out Gatsby at Work & Co","excerpt":"Thoughts on setup, workflow, and giving back to Gatsby","date":"April 11th 2018","rawDate":"2018-04-11T00:00:00.000Z","canonicalLink":null,"tags":["contentful","netlify","getting-started"],"image":null,"imageAuthor":null,"imageAuthorLink":null,"imageTitle":null,"showImageInArticle":null,"author":{"id":"Sarah Mogin","bio":"Developer and Diet Coke enthusiast in Brooklyn, NY","twitter":"@sarahmogin","avatar":{"childImageSharp":{"fixed":{"tracedSVG":"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30' version='1'%3e%3crect width='100%25' height='100%25' fill='%23f6f2f8'/%3e%3cpath d='M12 3c-3 1-4 7-3 11 0 4-1 8-4 8s-5 3-5 5c0 3 0 3 5 3s6 0 6-2l-1-14c0-8 1-9 4-5l4 2c3 1 3 3 1 9-2 3-2 4 0 4l1 3-1 3h12v-4c0-2 0-3-1-2-1 2-6-2-6-6C24 5 18-1 12 3' fill='%23e0d6eb' fill-rule='evenodd'/%3e%3c/svg%3e","width":63,"height":63,"src":"/static/eded0911fe19a8e71c2798f2269580de/eb2ad/sarah-mogin.jpg","srcSet":"/static/eded0911fe19a8e71c2798f2269580de/eb2ad/sarah-mogin.jpg 1x,\n/static/eded0911fe19a8e71c2798f2269580de/2d344/sarah-mogin.jpg 1.5x,\n/static/eded0911fe19a8e71c2798f2269580de/6dc12/sarah-mogin.jpg 2x,\n/static/eded0911fe19a8e71c2798f2269580de/c804e/sarah-mogin.jpg 3x"}}},"fields":{"slug":"/contributors/sarah-mogin/"}}}}},"pageContext":{"slug":"/blog/2018-04-11-trying-out-gatsby-at-work-and-co/","prev":{"fields":{"slug":"/blog/2018-04-10-how-to-handle-comments-in-gatsby-blogs/","package":null,"released":true},"frontmatter":{"title":"How to handle comments in Gatsby blogs","draft":null,"canonicalLink":"https://www.gatsbycentral.com/how-to-handle-comments-in-gatsby-blogs","publishedAt":"Gatsby Central","issue":null,"tags":null}},"next":{"fields":{"slug":"/blog/2018-04-25-how-gatsby-changes-teams-website-development-workflow/","package":null,"released":true},"frontmatter":{"title":"How Gatsby Changes Teams' Website Development Workflow","draft":null,"canonicalLink":null,"publishedAt":null,"issue":null,"tags":["collaboration"]}}}}