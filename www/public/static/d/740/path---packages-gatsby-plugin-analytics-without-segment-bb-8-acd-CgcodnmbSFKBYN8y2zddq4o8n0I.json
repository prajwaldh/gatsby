{"data":{"markdownRemark":null,"npmPackage":{"name":"gatsby-plugin-analytics-without-segment","description":"A Gatsby plugin to use Segments open-source analytics library (analytics.js) WITHOUT using the paid Segment service (segment.com)","keywords":["standalone","free","analytics","analyticsjs","analytics.js","gatsby","gatsby-plugin","without","segment"],"lastPublisher":{"name":"thebarty","avatar":"https://gravatar.com/avatar/fc79514cd2604fafe06e635f3c9a371c"},"repository":{"url":"https://github.com/thebarty/gatsby-plugin-analytics-without-segment"},"readme":{"childMarkdownRemark":{"html":"<h1 id=\"use-analyticsjs-without-segment-in-gatsby-gatsby-plugin-analytics-without-segment\"><a href=\"#use-analyticsjs-without-segment-in-gatsby-gatsby-plugin-analytics-without-segment\" aria-label=\"use analyticsjs without segment in gatsby gatsby plugin analytics without segment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use analytics.js without Segment in Gatsby (gatsby-plugin-analytics-without-segment)</h1>\n<p>A <a href=\"https://www.gatsbyjs.org\">Gatsby</a> plugin to use Segments open-source analytics library (analytics.js) <strong>WITHOUT using the paid Segment service (segment.com)</strong>.</p>\n<h2 id=\"why-this-package\"><a href=\"#why-this-package\" aria-label=\"why this package permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why this package?</h2>\n<p>The concept of analytics.js is awesome. <strong>BUT Segments’s  free tier (max 1.000 monthly users) might not work for you</strong>, if you have a lot of non-paying visitors on your website.</p>\n<p>So if you want an <strong>easy-to-configure</strong> <code class=\"language-text\">analytics.js</code>-wrapper for your analytics (<strong>Google Analytics, Mixpanel, Hotjar, YouNameIt, …</strong>), then this is your go-to! Basically <strong>ALL big analytics-integrations are supported</strong>.</p>\n<p><strong>This solution is open source, unlimited and free forever!</strong></p>\n<p><em>Background (state 2018-10-24): Segment.com has aggressive pay-or-leave policies, which they will apply after you hit the 1000 free monthly users limit. They will lock your account and stop processing your events after a deadline.</em></p>\n<h2 id=\"features\"><a href=\"#features\" aria-label=\"features permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Features</h2>\n<ul>\n<li><strong>Best-practise loading of analytics.js</strong>: This plugin loads <a href=\"https://github.com/segmentio/analytics.js\">Segments analytics.js</a> following <a href=\"http://www.ianww.com/blog/2017/08/06/analytics-js-standalone-library/\">best-practises</a> and enables you to easily set options (<code class=\"language-text\">cdnUrl</code> and <code class=\"language-text\">services</code>) via Gatsby-config.</li>\n<li><strong>Unlimited and free</strong>: You’ll use the free analytics.js and not depend on Segment (which has aggressive pay-or-leave policies, after you hit the 1000 free monthly users)</li>\n<li><strong>Auto-Track route changes</strong>: Routes are <strong>automatically</strong> tracked via <code class=\"language-text\">analytics.page()</code> via Gatsby</li>\n<li><strong>Track events anywhere</strong>: You can track custom-events anywhere in your code via <code class=\"language-text\">analytics.track()</code></li>\n<li><strong>Supported integrations</strong>: A LOT of analytics-tools are supported. see <a href=\"https://github.com/segment-integrations\">https://github.com/segment-integrations</a>.</li>\n<li><strong>Development-mode</strong>: In development you’ll only see the events in the console. Your events will NOT be forwarded</li>\n<li><strong>Production-mode</strong>: All events will be routed to the services. Check your console for possible errors.</li>\n</ul>\n<h2 id=\"install\"><a href=\"#install\" aria-label=\"install permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>INSTALL</h2>\n<p>Install via npm</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install gatsby-plugin-analytics-without-segment --save</code></pre></div>\n<h2 id=\"usage\"><a href=\"#usage\" aria-label=\"usage permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage</h2>\n<p>In your <code class=\"language-text\">gatsby-config.js</code>, add:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// your other plugins...</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-plugin-analytics-without-segment'</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        cdnUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'https://cdnjs.cloudflare.com/ajax/libs/analytics.js/2.9.1/analytics.min.js'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// host yourself or use cdnjs (https://cdnjs.com/libraries/analytics.js)</span>\n        services<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// see integration https://github.com/segment-integrations/analytics.js-integration-google-analytics/blob/master/lib/index.js</span>\n          <span class=\"token string\">'Google Analytics'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            trackingId<span class=\"token punctuation\">:</span> <span class=\"token string\">'UA-XXX-1'</span><span class=\"token punctuation\">,</span>\n            anonymizeIp<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token comment\">// see integration https://github.com/segment-integrations/analytics.js-integration-mixpanel/blob/master/lib/index.js</span>\n          <span class=\"token string\">'Mixpanel'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            token<span class=\"token punctuation\">:</span> <span class=\"token string\">'XXX'</span><span class=\"token punctuation\">,</span>\n            people<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            trackAllPages<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token comment\">// see integration https://github.com/segment-integrations/analytics.js-integration-fullstory/blob/master/lib/index.js</span>\n          <span class=\"token string\">'FullStory'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            org<span class=\"token punctuation\">:</span> <span class=\"token string\">'XXX'</span><span class=\"token punctuation\">,</span>\n            debug<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token comment\">// ... other service? See supported integrations (that can be loaded via analytics.js) at https://github.com/segment-integrations.</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ...your other plugins</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In your code you can track events like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">analytics.track(&#39;Some event&#39;, {\n  property1: &#39;xyz&#39;,\n  // more data\n})</code></pre></div>\n<h2 id=\"why-using-this\"><a href=\"#why-using-this\" aria-label=\"why using this permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WHY using this?</h2>\n<p>Advantages:</p>\n<ul>\n<li>You will NOT run out of segments free tier after hitting 1000 MPU (monthly users), because you simply do NOT use it</li>\n<li>You’ll have a single API for tracking analytics (p.e. <code class=\"language-text\">analytics.page()</code> or <code class=\"language-text\">analytics.track()</code>)</li>\n</ul>\n<p>Disadvantages:</p>\n<ul>\n<li>This does NOT work on server-side</li>\n<li>It might take a bit more time to configure than using segment</li>\n<li>You do NOT any of segments other cool features (which you will not need when starting a side-project)</li>\n</ul>\n<h2 id=\"question-what-analytics-services-are-supported\"><a href=\"#question-what-analytics-services-are-supported\" aria-label=\"question what analytics services are supported permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Question: What analytics-services are supported?</h2>\n<p>You should be able to use ALL services that segment itself supports and has integrations available. You’ll have to dig around a bit in segment’s code to find the options for each individual tool.</p>\n<p>Check out the supported Integrations (that can be loaded via analytics.js) at <a href=\"https://github.com/segment-integrations\">https://github.com/segment-integrations</a>.</p>\n<h2 id=\"credits\"><a href=\"#credits\" aria-label=\"credits permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Credits</h2>\n<p>This is project is based on <a href=\"https://gist.github.com/typpo/5e2e4403c60314e04e8b6b257555f6de\">https://gist.github.com/typpo/5e2e4403c60314e04e8b6b257555f6de</a>\nand the related blogpost at <a href=\"http://www.ianww.com/blog/2017/08/06/analytics-js-standalone-library/\">http://www.ianww.com/blog/2017/08/06/analytics-js-standalone-library/</a>.</p>\n<h2 id=\"contribute-development-notes\"><a href=\"#contribute-development-notes\" aria-label=\"contribute development notes permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contribute (Development notes)</h2>\n<p>Copy this to your local <code class=\"language-text\">/plugins/gatsby-plugin-analytics-without-segment</code>-directory.\nGatsby will prioritise local over remove.</p>\n<p>On the command-line, start a second terminal, go to <code class=\"language-text\">/plugins/gatsby-plugin-analytics-without-segment</code>\nand run <code class=\"language-text\">npm run build-watch</code> to auto-compile on file-change from /src to / via babel.</p>\n<p>CLI cheatsheat:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run build-watch;  # auto-compile on file-change from /src to / via babel</code></pre></div>\n<h2 id=\"license\"><a href=\"#license\" aria-label=\"license permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>License</h2>\n<p>MIT</p>","timeToRead":4}}}},"pageContext":{"slug":"/packages/gatsby-plugin-analytics-without-segment/","id":"aafe5024-0564-5326-9560-0629f412ffaf","layout":"plugins"}}