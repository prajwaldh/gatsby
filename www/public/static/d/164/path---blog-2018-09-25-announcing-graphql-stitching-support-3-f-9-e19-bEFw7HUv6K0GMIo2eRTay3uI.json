{"data":{"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When Gatsby was started 3.5 years ago, "},{"type":"element","tagName":"a","properties":{"href":"https://www.graphql.com/"},"children":[{"type":"text","value":"GraphQL"}]},{"type":"text","value":" was still an internal project at Facebook and had yet to be open sourced."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Since being open sourced, GraphQL’s usage has exploded and "},{"type":"element","tagName":"a","properties":{"href":"https://www.graphql.com/case-studies/"},"children":[{"type":"text","value":"1000s of companies use it to power critical apps and websites"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Gatsby’s vision is to be the integration layer for modern websites gluing together data and code into highly performant websites and apps. GraphQL is integral to this vision."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Gatsby v1 shipped last year with a plugin-powered data layer that let you easily pull data from any source using GraphQL. At the time, there was still very few public GraphQL schemas so we built a system that let plugins transform data from REST APIs into a GraphQL schema."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"But in the last year, a lot has changed. More and more services are shipping with native GraphQL APIs. CMSs like "},{"type":"element","tagName":"a","properties":{"href":"https://graphcms.com/"},"children":[{"type":"text","value":"GraphCMS"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://aws.amazon.com/appsync/"},"children":[{"type":"text","value":"AppSync"}]},{"type":"text","value":", and "},{"type":"element","tagName":"a","properties":{"href":"https://www.takeshape.io/"},"children":[{"type":"text","value":"TakeShape"}]},{"type":"text","value":" all have launched GraphQL APIs. "},{"type":"element","tagName":"a","properties":{"href":"https://www.contentful.com/"},"children":[{"type":"text","value":"Contentful"}]},{"type":"text","value":" is launching a "},{"type":"element","tagName":"a","properties":{"href":"https://www.contentful.com/blog/2018/07/04/graphql-abstract-syntax-tree-new-schema/"},"children":[{"type":"text","value":"native GraphQL API as well soon"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Watching the spread of GraphQL has all been incredibly exciting to watch and a fulfillment of our vision for the future of the web where sites easily stitch together data from many sources."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"But unfortunately, these new GraphQL APIs have been awkward to use inside Gatsby as you first had to wrap the API inside a Gatsby source plugin before you could query the data from your components."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To fix this, "},{"type":"element","tagName":"a","properties":{"href":"/blog/2018-09-17-gatsby-v2/"},"children":[{"type":"text","value":"Gatsby 2.0"}]},{"type":"text","value":" adds experimental support for schema stitching of external GraphQL APIs to its internal schema. Schema stitching allows merging multiple GraphQL schemas together, which greatly simplifies working with third-party GraphQL APIs. Along with low-level support for stitching in general, we are shipping an official "},{"type":"element","tagName":"a","properties":{"href":"https://www.gatsbyjs.org/packages/gatsby-source-graphql/"},"children":[{"type":"text","value":"gatsby-source-graphql"}]},{"type":"text","value":" plugin, which enables connecting to an arbitrary GraphQL API with just a few lines of configuration!"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"getting-started"},"children":[{"type":"element","tagName":"a","properties":{"href":"#getting-started","ariaLabel":"getting started permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Getting started"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Gatsby’s data model is powered by an internal GraphQL API. It is a great abstraction that allows you to define the data requirements of your app, be it some files in the filesystem or a third-party API."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Previously, when you wanted to add a 3rd-party GraphQL API, you needed to write a custom source plugin. But now, you simply add a small bit of config to your site’s gatsby-config.js. The following example adds the Star Wars GraphQL API:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"js"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// In your gatsby-config.js"}]},{"type":"text","value":"\nmodule"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"exports "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  plugins"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      resolve"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"gatsby-source-graphql\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n      options"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// This type will contain the remote schema Query type"}]},{"type":"text","value":"\n        typeName"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"SWAPI\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// This is the field under which it's accessible"}]},{"type":"text","value":"\n        fieldName"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"swapi\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// URL to query from"}]},{"type":"text","value":"\n        url"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"https://api.graphcms.com/simple/v1/swapi\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After this you will have a field named "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"swapi"}]},{"type":"text","value":" in your Gatsby GraphQL and you can query it."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"graphql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-graphql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-graphql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Field name parameter defines how you can access third party API"}]},{"type":"text","value":"\n  swapi "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    allSpecies "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      name\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Other Gatsby querying works normally"}]},{"type":"text","value":"\n  site "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    siteMetadata "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      siteName\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"why-is-it-needed"},"children":[{"type":"element","tagName":"a","properties":{"href":"#why-is-it-needed","ariaLabel":"why is it needed permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Why is it needed?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To understand why a separate new plugin is needed, let’s dive into how Gatsby source plugins work. Gatsby’s GraphQL schema can be extended with source plugins. Source plugins can extend the schema by adding "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"nodes"}]},{"type":"text","value":" - objects that have some kind of global id. This way a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gatsby-source-filesystem"}]},{"type":"text","value":" plugin can add all the files from a directory as nodes. Gatsby introspects the nodes that it gets and creates a GraphQL schema which you can use to fetch all those nodes."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This system works really well for many cases and it’s very intuitive, you don’t need to care about creating a GraphQL schema or types for the nodes, any objects can be used. However, this is a limitation when using existing GraphQL APIs. First of all, you won’t be able to use the same API as the one provided by the third-party API, because it will be replaced by Gatsby’s internal node API. This can be confusing, because you can’t consult the third-party API’s documentation. Secondly, the plugin needs to proactively fetch all the possible data from the API, which can be complicated because the plugin author would have to predict which data might be needed."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When there weren’t many existing GraphQL APIs in the wild, that wasn’t that much of a problem. For the few available APIs there was a source plugin. With the rise of both public GraphQL APIs, like GitHub or Shopify, and with so many more people having a GraphQL API of their own (or using one of the GraphQL solutions like Prisma, GraphCMS or AppSync), writing a plugin for each one became unfeasible. Meet "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gatsby-source-graphql"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"how-does-it-work"},"children":[{"type":"element","tagName":"a","properties":{"href":"#how-does-it-work","ariaLabel":"how does it work permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"How does it work?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Instead of creating nodes for all potential items in a third-party API, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gatsby-source-graphql"}]},{"type":"text","value":" uses schema stitching to combine the schema of a third-party API with the Gatsby schema. Schema stitching combines multiple GraphQL schemas into one, "},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/graphql-tools/schema-stitching.html"},"children":[{"type":"text","value":"read more about it here"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The plugin puts the full third-party GraphQL API under one field in Gatsby’s API. This way any types or fields of that API can be queried. There is no need to prefetch that data beforehand to create nodes, because the data will be fetched on-demand as required by the page queries."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The actual stitching happens on the Gatsby level. There is a new action, "},{"type":"element","tagName":"a","properties":{"href":"/docs/actions/#addThirdPartySchema"},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"addThirdPartySchema"}]}]},{"type":"text","value":", that can be used to add arbitrary schemas for stitching. It’s a deliberately low-level API that we hope other plugin authors can use in the future to implement some mind-blowing GraphQL functionality."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"conclusions"},"children":[{"type":"element","tagName":"a","properties":{"href":"#conclusions","ariaLabel":"conclusions permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Conclusions"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gatsby-source-graphql"}]},{"type":"text","value":" is part of "},{"type":"element","tagName":"a","properties":{"href":"/blog/2018-09-17-gatsby-v2/"},"children":[{"type":"text","value":"Gatsby’s 2.0 release"}]},{"type":"text","value":". Try it out now! "},{"type":"element","tagName":"a","properties":{"href":"/docs/third-party-graphql"},"children":[{"type":"text","value":"Check out the docs"}]},{"type":"text","value":" or "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/freiksenet/gatsby-github-displayer"},"children":[{"type":"text","value":"a sample project using GitHub’s GraphQL API"}]},{"type":"text","value":"."}]}],"data":{"quirksMode":false}},"excerpt":"When Gatsby was started 3.5 years ago,  GraphQL  was still an internal project at Facebook and had yet to be open sourced. Since being open…","timeToRead":5,"fields":{"slug":"/blog/2018-09-25-announcing-graphql-stitching-support/","publishedAt":null},"frontmatter":{"title":"Announcing support for natively querying 3rd-party GraphQL APIs with Gatsby","excerpt":null,"date":"September 25th 2018","rawDate":"2018-09-25T00:00:00.000Z","canonicalLink":null,"tags":["graphql","plugin","source"],"image":null,"imageAuthor":null,"imageAuthorLink":null,"imageTitle":null,"showImageInArticle":null,"author":{"id":"Mikhail Novikov","bio":"GraphQL sommelier. Did Reindex, GraphQL Delegation, Schema Stitching, Launchpad. Organizer @GraphQLFinland.","twitter":"@freiksenet","avatar":{"childImageSharp":{"fixed":{"tracedSVG":"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30' version='1'%3e%3crect width='100%25' height='100%25' fill='%23f6f2f8'/%3e%3cpath d='M12 8c-2 2-2 7-1 6l1 1c-1 1-1 2 2 7v4c0 3 0 3 5 3h5v-6c0-7-1-8-5-6-2 2-4 1-4-4v-3l1-1c0-2-4-3-4-1' fill='%23e0d6eb' fill-rule='evenodd'/%3e%3c/svg%3e","width":63,"height":63,"src":"/static/5429bb44f659c90adf5ad9756da87eaa/eb2ad/freiksenet.jpg","srcSet":"/static/5429bb44f659c90adf5ad9756da87eaa/eb2ad/freiksenet.jpg 1x,\n/static/5429bb44f659c90adf5ad9756da87eaa/2d344/freiksenet.jpg 1.5x,\n/static/5429bb44f659c90adf5ad9756da87eaa/6dc12/freiksenet.jpg 2x,\n/static/5429bb44f659c90adf5ad9756da87eaa/c804e/freiksenet.jpg 3x"}}},"fields":{"slug":"/contributors/mikhail-novikov/"}}}}},"pageContext":{"slug":"/blog/2018-09-25-announcing-graphql-stitching-support/","prev":{"fields":{"slug":"/blog/2018-09-21-lullabot-podcast/","package":null,"released":true},"frontmatter":{"title":"Listen to this Gatsby interview on the Lullabot podcast","draft":null,"canonicalLink":null,"publishedAt":null,"issue":null,"tags":null}},"next":{"fields":{"slug":"/blog/2018-09-27-reach-router/","package":null,"released":true},"frontmatter":{"title":"How we improved Gatsby's accessibility in v2 by switching to @reach/router","draft":null,"canonicalLink":null,"publishedAt":null,"issue":null,"tags":["routing","v2","accessibility"]}}}}