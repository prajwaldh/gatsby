{"data":{"markdownRemark":{"html":"<p>This guide will walk you through the process of using <a href=\"https://www.gatsbyjs.org/\">Gatsby</a> with <a href=\"https://developer.wordpress.org/rest-api/reference/\">WordPress Rest Api</a>.</p>\n<p>WordPress is a free and open-source content management system (CMS). Let’s say you have a site built with WordPress and you want to pull the existing data into your static Gatsby site. You can do that with <a href=\"https://www.gatsbyjs.org/packages/gatsby-source-wordpress/?=wordpress\">gatsby-source-wordpress</a>. Let’s begin!</p>\n<p><em>Note: this guide uses the <code class=\"language-text\">gatsby-starter-default</code> to provide you with a knowledge necessary to start working with WordPress but if you get stuck at some point of the guide feel free to use\n<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/examples/using-wordpress\">this example</a> to gain extra insights.</em></p>\n<h2 id=\"setup\"><a href=\"#setup\" aria-label=\"setup permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup</h2>\n<h3 id=\"quick-start\"><a href=\"#quick-start\" aria-label=\"quick start permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Quick start</h3>\n<p>This guide assumes that you have a Gatsby project set up. If you need to set up a project, head to the <a href=\"/docs\">Quick Start guide</a>, then come back.</p>\n<h3 id=\"gatsby-configjs\"><a href=\"#gatsby-configjs\" aria-label=\"gatsby configjs permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-config.js</h3>\n<p>Essentially the Gatsby home base. The two things defined here initially (in the starter) are <code class=\"language-text\">siteMetadata</code> and <code class=\"language-text\">plugins</code> you can add to enable new functionalities on your site.</p>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Gatsby Default Starter\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"gatsby-plugin-react-helmet\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"plugin-gatsby-source-wordpress\"><a href=\"#plugin-gatsby-source-wordpress\" aria-label=\"plugin gatsby source wordpress permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Plugin: gatsby-source-wordpress</h3>\n<p>Now that you have some understanding of project structure lets add fetching WordPress data functionality. There’s a plugin for that. <a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-source-wordpress\"><code class=\"language-text\">gatsby-source-wordpress</code></a> is Gatsby’s plugin for sourcing data from WordPress sites using the WordPress JSON REST API. You can install it by running the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-source-wordpress</code></pre></div>\n<h3 id=\"configuring-the-plugin\"><a href=\"#configuring-the-plugin\" aria-label=\"configuring the plugin permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuring the plugin</h3>\n<p>In <code class=\"language-text\">gatsby-config.js</code>, add your configuration options, including your WordPress site’s baseUrl, protocol, whether it’s hosted on <a href=\"http://wordpress.com/\">wordpress.com</a> or self-hosted, and whether it makes use of the Advanced Custom Fields (ACF) plugin.</p>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-wordpress`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// your wordpress source</span>\n        baseUrl<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`wpexample.com`</span></span><span class=\"token punctuation\">,</span>\n        protocol<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// is it hosted on wordpress.com, or self-hosted?</span>\n        hostingWPCOM<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// does your site use the Advanced Custom Fields Plugin?</span>\n        useACF<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"using-wordpress-data\"><a href=\"#using-wordpress-data\" aria-label=\"using wordpress data permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using WordPress data</h2>\n<p>Once your source plugin is pulling data, you can construct your site pages by implementing the <code class=\"language-text\">createPages</code> API in <code class=\"language-text\">gatsby-node.js</code>. When this is called, your data has already been fetched and is available to query with GraphQL. Gatsby uses <a href=\"/docs/querying-with-graphql/#how-does-graphql-and-gatsby-work-together\">GraphQL at build time</a>; Your source plugin (in this case, <code class=\"language-text\">gatsby-source-wordpress</code>) fetches your data, and Gatsby uses that data to ”<a href=\"/docs/querying-with-graphql/#how-does-graphql-and-gatsby-work-together\">automatically <em>infer</em> a GraphQL schema</a>” that you can query against.</p>\n<p>The <code class=\"language-text\">createPages</code> API exposes the <code class=\"language-text\">graphql</code> function:</p>\n<blockquote>\n<p>The GraphQL function allows us to run arbitrary queries against the local WordPress GraphQL schema… like the site has a built-in database constructed from the fetched data that you can run queries against. (<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/examples/using-wordpress/gatsby-node.js#L15\">Source</a>)</p>\n</blockquote>\n<p>You can use <code class=\"language-text\">gatsby-node.js</code> file from the plugin demo to get started. For the purpose of this guide the code to <a href=\"https://github.com/gatsbyjs/gatsby/blob/master/examples/using-wordpress/gatsby-node.js#L12\">construct ‘posts’</a> does what it needs to do out of the box (at least for the moment). It queries your local WordPress GraphQL schema for post data, then <a href=\"https://github.com/gatsbyjs/gatsby/blob/master/examples/using-wordpress/gatsby-node.js#L94\">iterates through each post node</a> to construct a static page for each, <a href=\"https://github.com/gatsbyjs/gatsby/blob/master/examples/using-wordpress/gatsby-node.js#L97\">based on whatever template you define</a> and feed it.</p>\n<p>For example, below is the part of the demo <code class=\"language-text\">gatsby-node.js</code> file that iterates over all the WordPress post data.</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> postTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`./src/templates/post.js`</span></span><span class=\"token punctuation\">)</span>\n\n_<span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allWordpressPost<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">,</span> edge <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// will be the url for the page</span>\n    path<span class=\"token punctuation\">:</span> edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// specify the component template of your choice</span>\n    component<span class=\"token punctuation\">:</span> <span class=\"token function\">slash</span><span class=\"token punctuation\">(</span>postTemplate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// In the ^template's GraphQL query, 'id' will be available</span>\n    <span class=\"token comment\">// as a GraphQL variable to query for this posts's data.</span>\n    context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">:</span> edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>The <a href=\"/docs/api-specification/#concepts\">docs define a Gatsby page</a> as “a site page with a pathname, a template component, and optional graphql query and layout component.” See the docs on the <a href=\"/docs/bound-action-creators/#createPage\">createPage bound action creator</a> and <a href=\"/docs/creating-and-modifying-pages/\">guide on creating and modifying pages for more detail</a>.</p>\n<h2 id=\"wrapping-up\"><a href=\"#wrapping-up\" aria-label=\"wrapping up permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Wrapping Up</h2>\n<p>This was a very basic example meant to help you understand how you can fetch data from WordPress and use it with Gatsby. As\nthe guide mentioned already, if you got stuck, you can have a look at\n<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/examples/using-wordpress\">example repo</a>, which is a working example\ncreated to support this guide.</p>\n<h2 id=\"other-resources\"><a href=\"#other-resources\" aria-label=\"other resources permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Other resources</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/blog/2018-01-22-getting-started-gatsby-and-wordpress/\">Blog post on which this guide is based on</a></li>\n<li><a href=\"http://watch-learn.com/series/gatsbyjs-wordpress\">Watch + Learn video tutorials</a></li>\n<li><a href=\"https://indigotree.co.uk/how-use-wordpress-headless-cms/\">Another blog post on using Gatsby with WordPress</a></li>\n</ul>","excerpt":"This guide will walk you through the process of using  Gatsby  with  WordPress Rest Api . WordPress is a free and open-source content…","timeToRead":4,"fields":{"slug":"/docs/sourcing-from-wordpress/","anchor":"sourcing-from-wordpress"},"frontmatter":{"title":"Sourcing from WordPress","overview":null,"issue":null},"parent":{"__typename":"File","relativePath":"docs/sourcing-from-wordpress.md"}}},"pageContext":{"slug":"/docs/sourcing-from-wordpress/"}}