{"data":{"markdownRemark":{"html":"<p>Using the <a href=\"/docs/node-apis/#onCreatePage\"><code class=\"language-text\">onCreatePage</code></a> API in your project’s <code class=\"language-text\">gatsby-node.js</code> file, it’s possible to create different 404 pages for different URL prefixes, such as <code class=\"language-text\">/en/</code>).</p>\n<p>In the following example, we will create an English 404 page at <code class=\"language-text\">src/pages/en/404.js</code>, and a German 404 page at <code class=\"language-text\">/src/pages/de/404.js</code>. Here is a simple example:</p>\n<div class=\"gatsby-code-title\">src/pages/en/404.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../components/layout\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Page Not Found<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Oops<span class=\"token punctuation\">,</span> we couldn't find <span class=\"token keyword\">this</span> page<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-code-title\">src/pages/de/404.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../components/layout\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Seite nicht gefunden<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Ups<span class=\"token punctuation\">,</span> wir konnten diese Seite nicht finden<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now, open up your project’s <code class=\"language-text\">gatsby-node.js</code> and add the following code:</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span>onCreatePage <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage<span class=\"token punctuation\">,</span> deletePage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token comment\">// Check if the page is a localized 404</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/^\\/[a-z]{2}\\/404\\/$/</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> oldPage <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>page <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Get the language code from the path, and match all paths</span>\n    <span class=\"token comment\">// starting with this code (apart from other valid paths)</span>\n    <span class=\"token keyword\">const</span> langCode <span class=\"token operator\">=</span> page<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`/`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n    page<span class=\"token punctuation\">.</span>matchPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>langCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/*`</span></span>\n\n    <span class=\"token comment\">// Recreate the modified page</span>\n    <span class=\"token function\">deletePage</span><span class=\"token punctuation\">(</span>oldPage<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now, whenever Gatsby creates a page, it will check if the page is a localized 404 with a path in the format of <code class=\"language-text\">/XX/404/</code>. If this is the case, then it will get the language code, and match all paths starting with this code, apart from other valid paths. This means that whenever you visit a non-existent page on your site, whose path starts with <code class=\"language-text\">/en/</code> or <code class=\"language-text\">/de/</code> (e.g. <code class=\"language-text\">/en/this-does-not-exist</code>), your localized 404 page will be displayed instead.</p>\n<p>For best results, you should configure your server to serve these 404 pages in the same manner - i.e. for <code class=\"language-text\">/en/&lt;non existent path&gt;</code>, your server should serve the page <code class=\"language-text\">/en/404/</code>. Otherwise, you’ll briefly see the default 404 page until the Gatsby runtime loads. If you’re using Netlify, you can use <a href=\"/packages/gatsby-plugin-netlify/\"><code class=\"language-text\">gatsby-plugin-netlify</code></a> to do this automatically. Note that you should still create a default 404 page (usually at <code class=\"language-text\">src/pages/404.js</code>) to handle non-prefixed paths, e.g. <code class=\"language-text\">https://example.com/this-does-not-exist</code>.</p>","excerpt":"Using the   API in your project’s   file, it’s possible to create different 404 pages for different URL prefixes, such as  ). In the…","timeToRead":2,"fields":{"slug":"/docs/creating-prefixed-404-pages-for-different-languages/","anchor":"creating-prefixed-404-pages-for-different-languages"},"frontmatter":{"title":"Creating Prefixed 404 Pages for Different Languages","overview":null,"issue":null},"parent":{"__typename":"File","relativePath":"docs/creating-prefixed-404-pages-for-different-languages.md"}}},"pageContext":{"slug":"/docs/creating-prefixed-404-pages-for-different-languages/"}}