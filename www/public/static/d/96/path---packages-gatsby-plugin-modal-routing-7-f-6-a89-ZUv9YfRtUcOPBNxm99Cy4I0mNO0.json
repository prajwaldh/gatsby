{"data":{"markdownRemark":null,"npmPackage":{"name":"gatsby-plugin-modal-routing","description":"Gatsby plugin to enable routing of modal pages","keywords":["gatsby","gatsby-plugin","modal","routing"],"lastPublisher":{"name":"lsirivong","avatar":"https://gravatar.com/avatar/da36b0e3a063340b6d97e65fdd97bd71"},"repository":{"url":"https://github.com/lsirivong/gatsby-plugin-modal-routing"},"readme":{"childMarkdownRemark":{"html":"<h1 id=\"gatsby-plugin-modal-routing\"><a href=\"#gatsby-plugin-modal-routing\" aria-label=\"gatsby plugin modal routing permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-plugin-modal-routing</h1>\n<p>Adds support for viewing gatsby pages within modals at their gatsby defined routes.</p>\n<h2 id=\"examples\"><a href=\"#examples\" aria-label=\"examples permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Examples</h2>\n<ul>\n<li><a href=\"https://gatsby-starter-with-gatsby-plugin-modal-routing.netlify.com/\">https://gatsby-starter-with-gatsby-plugin-modal-routing.netlify.com/</a></li>\n<li><a href=\"https://gatsbygram-with-gatsby-plugin-modal-routing.netlify.com/\">https://gatsbygram-with-gatsby-plugin-modal-routing.netlify.com/</a></li>\n</ul>\n<h2 id=\"install\"><a href=\"#install\" aria-label=\"install permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save gatsby-plugin-modal-routing</code></pre></div>\n<h2 id=\"motivation\"><a href=\"#motivation\" aria-label=\"motivation permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Motivation</h2>\n<p>The problem: how to handle modals (stateful routes) with gatsby’s page based routing?</p>\n<p>We want a modal to open within the context of whatever page it was linked to, change\nthe browser’s URL, and render server-side allowing permalink navigation.</p>\n<p>Current Gatsby V2 examples which use <code class=\"language-text\">PageRenderer</code> flicker when re-rendering content\nunderneath the modal. This plugin aims to handle modal routing edge cases and provide\na consistent rendering experience with a flexible API.</p>\n<h2 id=\"how-to-use\"><a href=\"#how-to-use\" aria-label=\"how to use permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use</h2>\n<p><strong>Note that this plugin is currently in alpha, and this API is subject to change</strong></p>\n<p>Add the plugin to your <code class=\"language-text\">gatsby-config.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-config.js</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-modal-routing`</span></span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"plugin-options\"><a href=\"#plugin-options\" aria-label=\"plugin options permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Plugin Options</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-modal-routing`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// A selector to set react-modal's app root to, default is `#___gatsby`</span>\n        <span class=\"token comment\">// See http://reactcommunity.org/react-modal/accessibility/#app-element</span>\n        appElement<span class=\"token punctuation\">:</span> <span class=\"token string\">'#___gatsby'</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// Object of props that will be passed to the react-modal container</span>\n        <span class=\"token comment\">// See http://reactcommunity.org/react-modal/#usage</span>\n        modalProps<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"rendering-page-content-in-modals\"><a href=\"#rendering-page-content-in-modals\" aria-label=\"rendering page content in modals permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rendering page content in modals</h3>\n<p>Any gatsby page may be rendered in a modal if it is routed to appropriately (see next\nsection below for creating a modal link).</p>\n<p>The <code class=\"language-text\">ModalRoutingContext</code> React.Context component can be used to conditionally render\ncontent if the page is rendered in a modal.</p>\n<p>The Context consumer is passes an object with <code class=\"language-text\">modal</code> and <code class=\"language-text\">closeTo</code> properties to it’s\nchild render function</p>\n<ul>\n<li><code class=\"language-text\">modal</code> (<code class=\"language-text\">boolean</code>) - indicates if the page content will be rendered in a modal. Use\nthis to conditionally render modal content like a close button.</li>\n<li><code class=\"language-text\">closeTo</code> (<code class=\"language-text\">string</code>) - if the page content is rendering in a modal, denotes the\npathname of the page where the modal was opened, otherwise <code class=\"language-text\">null</code>.</li>\n</ul>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// pages/modal-example.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ModalRoutingContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-plugin-modal-routing'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ModalExamplePage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>ModalRoutingContext<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> modal<span class=\"token punctuation\">,</span> closeTo <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>modal <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>modalCloseTo<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n            Close\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>header<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>\n              Website Title\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n\n        <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>Modal Page<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n\n        <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token string\">\"/\"</span><span class=\"token operator\">></span>Go back to the homepage<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ModalRoutingContext<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span>\n\nexports <span class=\"token keyword\">default</span> ModalExamplePage</code></pre></div>\n<h3 id=\"opening-a-page-in-a-modal\"><a href=\"#opening-a-page-in-a-modal\" aria-label=\"opening a page in a modal permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Opening a page in a modal</h3>\n<p>Pages can be opened in a modal context by passing the <code class=\"language-text\">{ modal: true }</code> flag to Link state.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// src/components/some-component.js\n\nimport { Link } from &#39;gatsby&#39;\n\n...\n\n&lt;Link\n  to=&quot;/login/&quot;\n  state={{\n    modal: true\n  }}\n&gt;\n  Login\n&lt;/Link&gt;</code></pre></div>\n<p><code class=\"language-text\">gatsby-plugin-modal-routing</code> also provides a <code class=\"language-text\">Link</code> component as a convenience to encapsulate\nthis flag for you.</p>\n<p>This is equivalent to the example above:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// src/components/some-component.js\n\nimport { Link } from &#39;gatsby-plugin-modal-routing&#39;\n\n...\n\n&lt;Link\n  to=&quot;/login/&quot;\n  asModal\n&gt;\n  Login\n&lt;/Link&gt;</code></pre></div>\n<h2 id=\"scroll-state\"><a href=\"#scroll-state\" aria-label=\"scroll state permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scroll State</h2>\n<p>When the site opens a modal, gatsby’s default scroll update is prevented, so that the\nunderlying page remains scrolled at the same position.</p>\n<p>When routing to a non-modal page <strong>from</strong> a modal, gatsby’s default scroll update is\nallowed, causing the page to scroll to the top. This is the case even if the non-modal\npage is the same as the underlying page.</p>\n<p>To prevent this, pass the <code class=\"language-text\">{ noScroll: true }</code> flag to Link state.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// src/components/modal-content.js\n\nimport { Link } from &#39;gatsby&#39;\n\n...\n\n&lt;Link\n  to=&quot;/&quot;\n  state={{\n    noScroll: true\n  }}\n&gt;\n  Close Modal\n&lt;/Link&gt;</code></pre></div>\n<p>As a convenience, this plugin’s <code class=\"language-text\">Link</code> component will detect if the <code class=\"language-text\">to</code> pathname matches the\ncontent rendered under the modal and set the <code class=\"language-text\">noScroll</code> flag for you.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// src/components/modal-content.js\n\nimport { Link } from &#39;gatsby-plugin-modal-routing&#39;\n\n...\n\n&lt;Link\n  to=&quot;/&quot;\n&gt;\n  Close Modal\n&lt;/Link&gt;</code></pre></div>","timeToRead":3}}}},"pageContext":{"slug":"/packages/gatsby-plugin-modal-routing/","id":"650a51f8-fdbe-5079-abed-cb64316c2213","layout":"plugins"}}